{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(queryCourseRes),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(handleSearchCourse),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(rootCourseSaga);import{takeEvery,put,call}from\"redux-saga/effects\";import{QUERY_COURSE,QUERY_COURSE_RES_SUCCESS,FETCH_SEARCH_COURSE_SUCCESS,FETCH_SEARCH_COURSE}from\"../../../constants/actionTypes\";import{openNotification}from\"../../../utils/commonFunction\";import Service from\"../../../lib/Service\";//获取所有课程，用于学生添加课程那个\nfunction queryCourseRes(data){var _data$args,page,userId,url,res;return _regeneratorRuntime.wrap(function queryCourseRes$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_data$args=data.args,page=_data$args.page,userId=_data$args.userId;url=\"course/queryCourse?page=\".concat(page,\"&userId=\").concat(userId);_context.next=5;return call(Service.get,url);case 5:res=_context.sent;_context.t0=res.data.error_code;_context.next=_context.t0===0?9:12;break;case 9:_context.next=11;return put({type:QUERY_COURSE_RES_SUCCESS,payload:res.data.data});case 11:return _context.abrupt(\"break\",13);case 12:return _context.abrupt(\"return\",0);case 13:_context.next=17;break;case 15:_context.prev=15;_context.t1=_context[\"catch\"](0);case 17:case\"end\":return _context.stop();}}},_marked,null,[[0,15]]);}function handleSearchCourse(data){var _data$args2,page,teacherName,course,userId,url,res;return _regeneratorRuntime.wrap(function handleSearchCourse$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_data$args2=data.args,page=_data$args2.page,teacherName=_data$args2.teacherName,course=_data$args2.course,userId=_data$args2.userId;url=\"course/queryCourse?page=\".concat(page,\"&teacherName=\").concat(teacherName,\"&course=\").concat(course,\"&userId=\").concat(userId);_context2.next=4;return call(Service.get,url);case 4:res=_context2.sent;_context2.t0=res.data.error_code;_context2.next=_context2.t0===0?8:_context2.t0===-1?11:_context2.t0===2?13:15;break;case 8:_context2.next=10;return put({type:FETCH_SEARCH_COURSE_SUCCESS,payload:res.data.data});case 10:return _context2.abrupt(\"break\",16);case 11:openNotification(res.data.message);return _context2.abrupt(\"break\",16);case 13:openNotification(res.data.message);return _context2.abrupt(\"break\",16);case 15:return _context2.abrupt(\"return\",0);case 16:case\"end\":return _context2.stop();}}},_marked2);}export default function rootCourseSaga(){return _regeneratorRuntime.wrap(function rootCourseSaga$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return takeEvery(QUERY_COURSE,queryCourseRes);case 2:_context3.next=4;return takeEvery(FETCH_SEARCH_COURSE,handleSearchCourse);case 4:case\"end\":return _context3.stop();}}},_marked3);}","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/redux/sagas/courseSagas/courseResource.js"],"names":["queryCourseRes","handleSearchCourse","rootCourseSaga","takeEvery","put","call","QUERY_COURSE","QUERY_COURSE_RES_SUCCESS","FETCH_SEARCH_COURSE_SUCCESS","FETCH_SEARCH_COURSE","openNotification","Service","data","args","page","userId","url","get","res","error_code","type","payload","teacherName","course","message"],"mappings":"+LAWUA,c,iDAsBAC,kB,iDAsBeC,c,EAvDzB,OAASC,SAAT,CAAoBC,GAApB,CAAyBC,IAAzB,KAAqC,oBAArC,CAEA,OACIC,YADJ,CAEIC,wBAFJ,CAGIC,2BAHJ,CAIIC,mBAJJ,KAKO,gCALP,CAMA,OAAQC,gBAAR,KAA+B,+BAA/B,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CACA;AACA,QAAUX,CAAAA,cAAV,CAAyBY,IAAzB,uLAE+BA,IAAI,CAACC,IAFpC,CAEeC,IAFf,YAEeA,IAFf,CAEqBC,MAFrB,YAEqBA,MAFrB,CAGYC,GAHZ,mCAG6CF,IAH7C,oBAG4DC,MAH5D,kBAIoB,MAAMV,CAAAA,IAAI,CAACM,OAAO,CAACM,GAAT,CAAcD,GAAd,CAAV,CAJpB,OAIcE,GAJd,2BAKgBA,GAAG,CAACN,IAAJ,CAASO,UALzB,6BAMiB,CANjB,oCAOgB,MAAMf,CAAAA,GAAG,CAAC,CACNgB,IAAI,CAACb,wBADC,CAENc,OAAO,CAAEH,GAAG,CAACN,IAAJ,CAASA,IAFZ,CAAD,CAAT,CAPhB,mFAauB,CAbvB,gKAsBA,QAAUX,CAAAA,kBAAV,CAA6BW,IAA7B,mMACiDA,IAAI,CAACC,IADtD,CACYC,IADZ,aACYA,IADZ,CACkBQ,WADlB,aACkBA,WADlB,CAC+BC,MAD/B,aAC+BA,MAD/B,CACuCR,MADvC,aACuCA,MADvC,CAEUC,GAFV,mCAE2CF,IAF3C,yBAE+DQ,WAF/D,oBAEqFC,MAFrF,oBAEsGR,MAFtG,mBAGgB,MAAMV,CAAAA,IAAI,CAACM,OAAO,CAACM,GAAT,CAAcD,GAAd,CAAV,CAHhB,OAGUE,GAHV,6BAIYA,GAAG,CAACN,IAAJ,CAASO,UAJrB,+BAKa,CALb,kBAWa,CAAC,CAXd,mBAca,CAdb,sCAMY,MAAMf,CAAAA,GAAG,CAAC,CACNgB,IAAI,CAAEZ,2BADA,CAENa,OAAO,CAAEH,GAAG,CAACN,IAAJ,CAASA,IAFZ,CAAD,CAAT,CANZ,oDAYYF,gBAAgB,CAACQ,GAAG,CAACN,IAAJ,CAASY,OAAV,CAAhB,CAZZ,4CAeYd,gBAAgB,CAACQ,GAAG,CAACN,IAAJ,CAASY,OAAV,CAAhB,CAfZ,6EAkBmB,CAlBnB,2DAsBA,cAAe,SAAUtB,CAAAA,cAAV,8IACX,MAAMC,CAAAA,SAAS,CAACG,YAAD,CAAeN,cAAf,CAAf,CADW,wBAEX,MAAMG,CAAAA,SAAS,CAACM,mBAAD,CAAsBR,kBAAtB,CAAf,CAFW","sourcesContent":["import { takeEvery, put, call } from \"redux-saga/effects\";\r\n\r\nimport {\r\n    QUERY_COURSE,\r\n    QUERY_COURSE_RES_SUCCESS,\r\n    FETCH_SEARCH_COURSE_SUCCESS,\r\n    FETCH_SEARCH_COURSE\r\n} from \"../../../constants/actionTypes\";\r\nimport {openNotification} from \"../../../utils/commonFunction\"\r\nimport Service from \"../../../lib/Service\";\r\n//获取所有课程，用于学生添加课程那个\r\nfunction* queryCourseRes(data) {\r\n    try {\r\n        const {page, userId} = data.args;\r\n        let url = `course/queryCourse?page=${page}&userId=${userId}`;\r\n        const res = yield call(Service.get, url);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type:QUERY_COURSE_RES_SUCCESS,\r\n                    payload: res.data.data,\r\n                });\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n    catch (e) {\r\n\r\n        }\r\n\r\n}\r\n\r\nfunction *handleSearchCourse(data) {\r\n    const { page, teacherName, course, userId} = data.args;\r\n    const url = `course/queryCourse?page=${page}&teacherName=${teacherName}&course=${course}&userId=${userId}`;\r\n    const res = yield call(Service.get, url);\r\n    switch (res.data.error_code) {\r\n        case 0:\r\n            yield put({\r\n                type: FETCH_SEARCH_COURSE_SUCCESS,\r\n                payload: res.data.data\r\n            });\r\n            break;\r\n        case -1:\r\n            openNotification(res.data.message);\r\n            break;\r\n        case 2:\r\n            openNotification(res.data.message);\r\n            break;\r\n        default:\r\n            return 0;\r\n    }\r\n}\r\n\r\nexport default function* rootCourseSaga() {\r\n    yield takeEvery(QUERY_COURSE, queryCourseRes);\r\n    yield takeEvery(FETCH_SEARCH_COURSE, handleSearchCourse);\r\n}"]},"metadata":{},"sourceType":"module"}