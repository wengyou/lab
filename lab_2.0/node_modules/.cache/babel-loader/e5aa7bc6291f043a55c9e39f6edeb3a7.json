{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(fetchResourceData),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(deleteResource),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(searchResource),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(importResourceData),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(searchSoftware),_marked6=/*#__PURE__*/_regeneratorRuntime.mark(fetchSoftwareData),_marked7=/*#__PURE__*/_regeneratorRuntime.mark(deleteSoftware),_marked8=/*#__PURE__*/_regeneratorRuntime.mark(importSoftwareData),_marked9=/*#__PURE__*/_regeneratorRuntime.mark(rootAdminSagas);import{takeEvery,call,put}from\"redux-saga/effects\";import Service from\"../../../lib/Service\";import{FETCH_ADMIN_RESOURCE_DATA,FETCH_ADMIN_RESOURCE_DATA_SUCCESS,FETCH_ADMIN_SOFTWARE_DATA,FETCH_ADMIN_SOFTWARE_DATA_SUCCESS,SEARCH_RESOURCE_DATA,SEARCH_RESOURCE_DATA_SUCCESS,SEARCH_SOFTWARE_DATA,SEARCH_SOFTWARE_DATA_SUCCESS,DELETE_RESOURCE_DATA,DELETE_RESOURCE_DATA_SUCCESS,DELETE_SOFTWARE_DATA,DELETE_SOFTWARE_DATA_SUCCESS,IMPORT_RESOURCE,IMPORT_RESOURCE_SUCCESS,IMPORT_SOFTWARE,IMPORT_SOFTWARE_SUCCESS}from\"../../../constants/actionTypes\";import{openNotification}from\"../../../utils/commonFunction\";//获取学习资料\nfunction fetchResourceData(data){var _data$args,page,type,res;return _regeneratorRuntime.wrap(function fetchResourceData$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_data$args=data.args,page=_data$args.page,type=_data$args.type;_context.next=4;return call(Service.get,\"resource/queryResource?page=\".concat(page,\"&type=\").concat(type));case 4:res=_context.sent;_context.t0=res.data.error_code;_context.next=_context.t0===0?8:_context.t0===-1?11:_context.t0===2?13:15;break;case 8:_context.next=10;return put({type:FETCH_ADMIN_RESOURCE_DATA_SUCCESS,payload:res.data.data});case 10:return _context.abrupt(\"break\",16);case 11:openNotification(res.data.message);return _context.abrupt(\"break\",16);case 13:openNotification(res.data.message);return _context.abrupt(\"break\",16);case 15:return _context.abrupt(\"return\",0);case 16:_context.next=21;break;case 18:_context.prev=18;_context.t1=_context[\"catch\"](0);console.log(_context.t1);case 21:case\"end\":return _context.stop();}}},_marked,null,[[0,18]]);}//删除学习资料\nfunction deleteResource(args){var _args$args,list,type,userId,formData,resourceIdList,data,res;return _regeneratorRuntime.wrap(function deleteResource$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_args$args=args.args,list=_args$args.list,type=_args$args.type,userId=_args$args.userId;formData=new FormData();formData.append('resourceIdList',list);resourceIdList=formData.get('resourceIdList');data={resourceIdList:resourceIdList,type:type,userId:userId};_context2.next=8;return call(Service.post,\"resource/delete\",data);case 8:res=_context2.sent;_context2.t0=res.data.error_code;_context2.next=_context2.t0===0?12:_context2.t0===-1?16:_context2.t0===2?18:20;break;case 12:_context2.next=14;return put({type:DELETE_RESOURCE_DATA_SUCCESS});case 14:openNotification(res.data.message);return _context2.abrupt(\"break\",21);case 16:openNotification(res.data.data);return _context2.abrupt(\"break\",21);case 18:openNotification(res.data.message);return _context2.abrupt(\"break\",21);case 20:return _context2.abrupt(\"return\",0);case 21:_context2.next=26;break;case 23:_context2.prev=23;_context2.t1=_context2[\"catch\"](0);console.log(_context2.t1);case 26:case\"end\":return _context2.stop();}}},_marked2,null,[[0,23]]);}//搜索学习资料\nfunction searchResource(args){var _args$args2,page,value,type,flag,url,res;return _regeneratorRuntime.wrap(function searchResource$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_args$args2=args.args,page=_args$args2.page,value=_args$args2.value,type=_args$args2.type,flag=_args$args2.flag;if(flag===\"resourceName\"){url=\"resource/queryResource?page=\".concat(page,\"&resourceName=\").concat(value,\"&type=\").concat(type);}else{url=\"resource/queryResource?page=\".concat(page,\"&userName=\").concat(value,\"&type=\").concat(type);}_context3.next=5;return call(Service.get,url);case 5:res=_context3.sent;_context3.t0=res.data.error_code;_context3.next=_context3.t0===0?9:_context3.t0===-1?12:_context3.t0===2?14:16;break;case 9:_context3.next=11;return put({type:SEARCH_RESOURCE_DATA_SUCCESS,payload:res.data.data});case 11:return _context3.abrupt(\"break\",17);case 12:openNotification(res.data.message);return _context3.abrupt(\"break\",17);case 14:openNotification(res.data.message);return _context3.abrupt(\"break\",17);case 16:return _context3.abrupt(\"return\",0);case 17:_context3.next=22;break;case 19:_context3.prev=19;_context3.t1=_context3[\"catch\"](0);console.log(_context3.t1);case 22:case\"end\":return _context3.stop();}}},_marked3,null,[[0,19]]);}//导入学习资料\nfunction importResourceData(args){var _args$args3,type,userId,file,formData,res;return _regeneratorRuntime.wrap(function importResourceData$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_args$args3=args.args,type=_args$args3.type,userId=_args$args3.userId,file=_args$args3.file;formData=new FormData();formData.append(\"type\",type);formData.append(\"userId\",userId);formData.append(\"file\",file);_context4.next=8;return call(Service.post,\"resource/upload\",formData);case 8:res=_context4.sent;_context4.t0=res.data.error_code;_context4.next=_context4.t0===0?12:_context4.t0===-1?16:_context4.t0===2?18:20;break;case 12:_context4.next=14;return put({type:IMPORT_RESOURCE_SUCCESS,payload:res.data.data});case 14:openNotification(res.data.message);return _context4.abrupt(\"break\",21);case 16:openNotification(res.data.message);return _context4.abrupt(\"break\",21);case 18:openNotification(res.data.message);return _context4.abrupt(\"break\",21);case 20:return _context4.abrupt(\"return\",0);case 21:_context4.next=26;break;case 23:_context4.prev=23;_context4.t1=_context4[\"catch\"](0);console.log(_context4.t1);case 26:case\"end\":return _context4.stop();}}},_marked4,null,[[0,23]]);}//搜索软件\nfunction searchSoftware(args){var _args$args4,page,value,type,flag,url,res;return _regeneratorRuntime.wrap(function searchSoftware$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_args$args4=args.args,page=_args$args4.page,value=_args$args4.value,type=_args$args4.type,flag=_args$args4.flag;if(flag===\"softwareName\"){url=\"resource/queryResource?page=\".concat(page,\"&resourceName=\").concat(value,\"&type=\").concat(type);}else{url=\"resource/queryResource?page=\".concat(page,\"&userName=\").concat(value,\"&type=\").concat(type);}_context5.next=5;return call(Service.get,url);case 5:res=_context5.sent;_context5.t0=res.data.error_code;_context5.next=_context5.t0===0?9:_context5.t0===-1?12:_context5.t0===2?14:16;break;case 9:_context5.next=11;return put({type:SEARCH_SOFTWARE_DATA_SUCCESS,payload:res.data.data});case 11:return _context5.abrupt(\"break\",17);case 12:openNotification(res.data.message);return _context5.abrupt(\"break\",17);case 14:openNotification(res.data.message);return _context5.abrupt(\"break\",17);case 16:return _context5.abrupt(\"return\",0);case 17:_context5.next=22;break;case 19:_context5.prev=19;_context5.t1=_context5[\"catch\"](0);console.log(_context5.t1);case 22:case\"end\":return _context5.stop();}}},_marked5,null,[[0,19]]);}//获取软件\nfunction fetchSoftwareData(data){var _data$args2,page,type,res;return _regeneratorRuntime.wrap(function fetchSoftwareData$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_data$args2=data.args,page=_data$args2.page,type=_data$args2.type;_context6.next=4;return call(Service.get,\"resource/queryResource?page=\".concat(page,\"&type=\").concat(type));case 4:res=_context6.sent;_context6.t0=res.data.error_code;_context6.next=_context6.t0===0?8:_context6.t0===-1?11:_context6.t0===2?13:15;break;case 8:_context6.next=10;return put({type:FETCH_ADMIN_SOFTWARE_DATA_SUCCESS,payload:res.data.data});case 10:return _context6.abrupt(\"break\",16);case 11:openNotification(res.data.message);return _context6.abrupt(\"break\",16);case 13:openNotification(res.data.message);return _context6.abrupt(\"break\",16);case 15:return _context6.abrupt(\"return\",0);case 16:_context6.next=21;break;case 18:_context6.prev=18;_context6.t1=_context6[\"catch\"](0);console.log(_context6.t1);case 21:case\"end\":return _context6.stop();}}},_marked6,null,[[0,18]]);}//删除软件\nfunction deleteSoftware(args){var _args$args5,list,type,userId,formData,resourceIdList,data,res;return _regeneratorRuntime.wrap(function deleteSoftware$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_args$args5=args.args,list=_args$args5.list,type=_args$args5.type,userId=_args$args5.userId;formData=new FormData();formData.append('resourceIdList',list);resourceIdList=formData.get('resourceIdList');data={resourceIdList:resourceIdList,type:type,userId:userId};_context7.next=8;return call(Service.post,\"resource/delete\",data);case 8:res=_context7.sent;_context7.t0=res.data.error_code;_context7.next=_context7.t0===0?12:_context7.t0===-1?16:_context7.t0===2?18:20;break;case 12:_context7.next=14;return put({type:DELETE_SOFTWARE_DATA_SUCCESS});case 14:openNotification(res.data.message);return _context7.abrupt(\"break\",21);case 16:openNotification(res.data.data);return _context7.abrupt(\"break\",21);case 18:openNotification(res.data.message);return _context7.abrupt(\"break\",21);case 20:return _context7.abrupt(\"return\",0);case 21:_context7.next=26;break;case 23:_context7.prev=23;_context7.t1=_context7[\"catch\"](0);console.log(_context7.t1);case 26:case\"end\":return _context7.stop();}}},_marked7,null,[[0,23]]);}//导入软件\nfunction importSoftwareData(args){var _args$args6,type,userId,file,formData,res;return _regeneratorRuntime.wrap(function importSoftwareData$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_args$args6=args.args,type=_args$args6.type,userId=_args$args6.userId,file=_args$args6.file;formData=new FormData();formData.append(\"type\",type);formData.append(\"userId\",userId);formData.append(\"file\",file);_context8.next=8;return call(Service.post,\"resource/upload\",formData);case 8:res=_context8.sent;_context8.t0=res.data.error_code;_context8.next=_context8.t0===0?12:_context8.t0===-1?16:_context8.t0===2?18:20;break;case 12:_context8.next=14;return put({type:IMPORT_SOFTWARE_SUCCESS,payload:res.data.data});case 14:openNotification(res.data.message);return _context8.abrupt(\"break\",21);case 16:openNotification(res.data.message);return _context8.abrupt(\"break\",21);case 18:openNotification(res.data.message);return _context8.abrupt(\"break\",21);case 20:return _context8.abrupt(\"return\",0);case 21:_context8.next=26;break;case 23:_context8.prev=23;_context8.t1=_context8[\"catch\"](0);console.log(_context8.t1);case 26:case\"end\":return _context8.stop();}}},_marked8,null,[[0,23]]);}export default function rootAdminSagas(){return _regeneratorRuntime.wrap(function rootAdminSagas$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return takeEvery(FETCH_ADMIN_RESOURCE_DATA,fetchResourceData);case 2:_context9.next=4;return takeEvery(FETCH_ADMIN_SOFTWARE_DATA,fetchSoftwareData);case 4:_context9.next=6;return takeEvery(SEARCH_RESOURCE_DATA,searchResource);case 6:_context9.next=8;return takeEvery(SEARCH_SOFTWARE_DATA,searchSoftware);case 8:_context9.next=10;return takeEvery(DELETE_RESOURCE_DATA,deleteResource);case 10:_context9.next=12;return takeEvery(DELETE_SOFTWARE_DATA,deleteSoftware);case 12:_context9.next=14;return takeEvery(IMPORT_RESOURCE,importResourceData);case 14:_context9.next=16;return takeEvery(IMPORT_SOFTWARE,importSoftwareData);case 16:case\"end\":return _context9.stop();}}},_marked9);}","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/redux/sagas/adminSagas/resourceManage.js"],"names":["fetchResourceData","deleteResource","searchResource","importResourceData","searchSoftware","fetchSoftwareData","deleteSoftware","importSoftwareData","rootAdminSagas","takeEvery","call","put","Service","FETCH_ADMIN_RESOURCE_DATA","FETCH_ADMIN_RESOURCE_DATA_SUCCESS","FETCH_ADMIN_SOFTWARE_DATA","FETCH_ADMIN_SOFTWARE_DATA_SUCCESS","SEARCH_RESOURCE_DATA","SEARCH_RESOURCE_DATA_SUCCESS","SEARCH_SOFTWARE_DATA","SEARCH_SOFTWARE_DATA_SUCCESS","DELETE_RESOURCE_DATA","DELETE_RESOURCE_DATA_SUCCESS","DELETE_SOFTWARE_DATA","DELETE_SOFTWARE_DATA_SUCCESS","IMPORT_RESOURCE","IMPORT_RESOURCE_SUCCESS","IMPORT_SOFTWARE","IMPORT_SOFTWARE_SUCCESS","openNotification","data","args","page","type","get","res","error_code","payload","message","console","log","list","userId","formData","FormData","append","resourceIdList","post","value","flag","url","file"],"mappings":"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","sourcesContent":["import { takeEvery, call, put } from \"redux-saga/effects\";\r\nimport Service from \"../../../lib/Service\";\r\nimport {\r\n    FETCH_ADMIN_RESOURCE_DATA,\r\n    FETCH_ADMIN_RESOURCE_DATA_SUCCESS,\r\n    FETCH_ADMIN_SOFTWARE_DATA,\r\n    FETCH_ADMIN_SOFTWARE_DATA_SUCCESS,\r\n    SEARCH_RESOURCE_DATA,\r\n    SEARCH_RESOURCE_DATA_SUCCESS,\r\n    SEARCH_SOFTWARE_DATA,\r\n    SEARCH_SOFTWARE_DATA_SUCCESS,\r\n    DELETE_RESOURCE_DATA,\r\n    DELETE_RESOURCE_DATA_SUCCESS,\r\n    DELETE_SOFTWARE_DATA,\r\n    DELETE_SOFTWARE_DATA_SUCCESS,\r\n    IMPORT_RESOURCE,\r\n    IMPORT_RESOURCE_SUCCESS,\r\n    IMPORT_SOFTWARE,\r\n    IMPORT_SOFTWARE_SUCCESS\r\n} from \"../../../constants/actionTypes\";\r\nimport {openNotification} from \"../../../utils/commonFunction\";\r\n\r\n//获取学习资料\r\nfunction *fetchResourceData(data) {\r\n    try {\r\n        const {page, type } = data.args;\r\n        const res = yield call(Service.get, `resource/queryResource?page=${page}&type=${type}`);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: FETCH_ADMIN_RESOURCE_DATA_SUCCESS,\r\n                    payload: res.data.data\r\n                });\r\n                break;\r\n            case -1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 2:\r\n                openNotification(res.data.message);\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    }catch (e) {\r\n        console.log(e);\r\n    }\r\n}\r\n//删除学习资料\r\nfunction *deleteResource(args) {\r\n    try {\r\n        const {list, type, userId } = args.args;\r\n        let formData = new FormData();\r\n        formData.append('resourceIdList',list);\r\n        const resourceIdList = formData.get('resourceIdList');\r\n        const data = {resourceIdList, type, userId };\r\n        const res = yield call(Service.post, \"resource/delete\", data);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: DELETE_RESOURCE_DATA_SUCCESS\r\n                });\r\n                openNotification(res.data.message);\r\n                break;\r\n            case -1:\r\n                openNotification(res.data.data);\r\n                break;\r\n            case 2:\r\n                openNotification(res.data.message);\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    }catch (e) {\r\n        console.log(e);\r\n    }\r\n}\r\n//搜索学习资料\r\nfunction *searchResource(args) {\r\n    try {\r\n            const {page, value, type, flag } = args.args;\r\n            let url;\r\n            if (flag === \"resourceName\"){\r\n                url = `resource/queryResource?page=${page}&resourceName=${value}&type=${type}`;\r\n            } else {\r\n                url = `resource/queryResource?page=${page}&userName=${value}&type=${type}`;\r\n            }\r\n            const res = yield call(Service.get, url);\r\n            switch (res.data.error_code) {\r\n                case 0:\r\n                    yield put({\r\n                        type: SEARCH_RESOURCE_DATA_SUCCESS,\r\n                        payload: res.data.data\r\n                    });\r\n                    break;\r\n                case -1:\r\n                    openNotification(res.data.message);\r\n                    break;\r\n                case 2:\r\n                    openNotification(res.data.message);\r\n                    break;\r\n                default:\r\n                    return 0;\r\n            }\r\n    }catch (e) {\r\n        console.log(e);\r\n    }\r\n}\r\n//导入学习资料\r\nfunction *importResourceData(args) {\r\n    try {\r\n        const {type, userId, file} = args.args;\r\n        const formData = new FormData();\r\n        formData.append(\"type\", type);\r\n        formData.append(\"userId\", userId);\r\n        formData.append(\"file\", file);\r\n        const res = yield call(Service.post, \"resource/upload\", formData);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: IMPORT_RESOURCE_SUCCESS,\r\n                    payload: res.data.data\r\n                });\r\n                openNotification(res.data.message);\r\n                break;\r\n            case -1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 2:\r\n                openNotification(res.data.message);\r\n                break;\r\n            default:\r\n                return 0\r\n        }\r\n    }catch (e) {\r\n        console.log(e);\r\n    }\r\n}\r\n//搜索软件\r\nfunction *searchSoftware(args) {\r\n    try {\r\n        const {page, value, type, flag } = args.args;\r\n        let url;\r\n        if (flag === \"softwareName\"){\r\n            url = `resource/queryResource?page=${page}&resourceName=${value}&type=${type}`;\r\n        } else {\r\n            url = `resource/queryResource?page=${page}&userName=${value}&type=${type}`;\r\n        }\r\n        const res = yield call(Service.get, url);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: SEARCH_SOFTWARE_DATA_SUCCESS,\r\n                    payload: res.data.data\r\n                });\r\n                break;\r\n            case -1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 2:\r\n                openNotification(res.data.message);\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    }catch (e) {\r\n        console.log(e);\r\n    }\r\n}\r\n//获取软件\r\nfunction *fetchSoftwareData(data) {\r\n    try {\r\n        const {page, type } = data.args;\r\n        const res = yield call(Service.get, `resource/queryResource?page=${page}&type=${type}`);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: FETCH_ADMIN_SOFTWARE_DATA_SUCCESS,\r\n                    payload: res.data.data\r\n                });\r\n                break;\r\n            case -1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 2:\r\n                openNotification(res.data.message);\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    }catch (e) {\r\n        console.log(e);\r\n    }\r\n}\r\n//删除软件\r\nfunction *deleteSoftware(args) {\r\n    try {\r\n        const {list, type, userId } = args.args;\r\n        let formData = new FormData();\r\n        formData.append('resourceIdList',list);\r\n        const resourceIdList = formData.get('resourceIdList');\r\n        const data = {resourceIdList, type, userId };\r\n        const res = yield call(Service.post, \"resource/delete\", data);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: DELETE_SOFTWARE_DATA_SUCCESS\r\n                });\r\n                openNotification(res.data.message);\r\n                break;\r\n            case -1:\r\n                openNotification(res.data.data);\r\n                break;\r\n            case 2:\r\n                openNotification(res.data.message);\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    }catch (e) {\r\n        console.log(e);\r\n    }\r\n}\r\n//导入软件\r\nfunction *importSoftwareData(args) {\r\n    try {\r\n        const {type, userId, file} = args.args;\r\n        const formData = new FormData();\r\n        formData.append(\"type\", type);\r\n        formData.append(\"userId\", userId);\r\n        formData.append(\"file\", file);\r\n        const res = yield call(Service.post, \"resource/upload\", formData);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: IMPORT_SOFTWARE_SUCCESS,\r\n                    payload: res.data.data\r\n                });\r\n                openNotification(res.data.message);\r\n                break;\r\n            case -1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 2:\r\n                openNotification(res.data.message);\r\n                break;\r\n            default:\r\n                return 0\r\n        }\r\n    }catch (e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nexport default function *rootAdminSagas() {\r\n    yield takeEvery(FETCH_ADMIN_RESOURCE_DATA, fetchResourceData);\r\n    yield takeEvery(FETCH_ADMIN_SOFTWARE_DATA, fetchSoftwareData);\r\n    yield takeEvery(SEARCH_RESOURCE_DATA, searchResource);\r\n    yield takeEvery(SEARCH_SOFTWARE_DATA, searchSoftware);\r\n    yield takeEvery(DELETE_RESOURCE_DATA, deleteResource);\r\n    yield takeEvery(DELETE_SOFTWARE_DATA, deleteSoftware);\r\n    yield takeEvery(IMPORT_RESOURCE, importResourceData);\r\n    yield takeEvery(IMPORT_SOFTWARE, importSoftwareData);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}