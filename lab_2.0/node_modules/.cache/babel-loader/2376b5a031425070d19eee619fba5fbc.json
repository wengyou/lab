{"ast":null,"code":"import\"antd/es/table/style/css\";import _Table from\"antd/es/table\";import _slicedToArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import{connect}from\"react-redux\";import\"../static/style/learningDatas.scss\";import SearchInput from\"../components/Search\";import*as resource from\"../redux/actionCreators/resource\";import{isRecord}from\"immutable\";var LearningData=function LearningData(props){var resourceName=props.resourceName,userName=props.userName,type=props.type,total=props.total,studyResource=props.studyResource,handleFetchStudyRes=props.handleFetchStudyRes,handleSearchValue=props.handleSearchValue,handleDownload=props.handleDownload,searchFlag=props.searchFlag,page=props.page,learningDataTemp=props.learningDataTemp,time=props.time;useEffect(function(){handleFetchStudyRes({page:1,type:\"material\",resourceName:null,userName:null});},[learningDataTemp,time]);var _useState=useState(1),_useState2=_slicedToArray(_useState,2),current=_useState2[0],setCurrent=_useState2[1];useEffect(function(){setCurrent(page);},[page]);var columns=[{title:'资料名称',dataIndex:'title',key:'title'},{title:'大小',dataIndex:'size',key:'size'},{title:'上传人',dataIndex:'userName',key:'userName'},{title:'上传时间',key:'addTime',dataIndex:'addTime'},{title:'下载次数',key:'num',dataIndex:'downloadNum'},{title:'下载资料',key:'url',dataIndex:'url',render:function render(text,record){return/*#__PURE__*/React.createElement(\"a\",{download:record.title,href:{text:text}.text,onClick:function onClick(){handleDownload({id:record.id,type:\"material\"});}},\"\\u4E0B\\u8F7D\");}}];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"dataWrapper\"},/*#__PURE__*/React.createElement(SearchInput,null),/*#__PURE__*/React.createElement(_Table,{tableLayout:\"fixed\",rowKey:function rowKey(record){return record.id;},columns:columns,dataSource:studyResource,pagination:{total:total,pageSize:10,current:current,onChange:function onChange(e){!searchFlag?handleFetchStudyRes({page:e,type:\"material\",resourceName:null,userName:null}):handleSearchValue({page:e,type:type,resourceName:resourceName,userName:userName});}}})),/*#__PURE__*/React.createElement(\"style\",null,\"\\n                        .ant-table-content {\\n                            border: 1px dashed #efefef !important;\\n                        }\\n                   \"));};export default connect(function(state){return{resourceName:state.getIn([\"resource\",\"resource\",\"resourceName\"]),type:state.getIn([\"resource\",\"resource\",\"type\"]),userName:state.getIn([\"resource\",\"resource\",\"userName\"]),total:state.getIn([\"resource\",\"resource\",\"allLearningTotal\"]),searchFlag:state.getIn([\"resource\",\"resource\",\"searchFlag\"]),studyResource:state.getIn([\"resource\",\"resource\",\"studyResource\"]),learningUrl:state.getIn([\"resource\",\"resource\",\"learningUrl\"]),searchResource:state.getIn([\"resource\",\"searchRes\",\"searchResource\"]),page:state.getIn([\"resource\",\"resource\",\"page\"]),learningDataTemp:state.getIn([\"resource\",\"resource\",\"learningDataTemp\"]),time:state.getIn([\"resource\",\"resource\",\"time\"])};},function(dispatch){return{handleFetchStudyRes:function handleFetchStudyRes(args){dispatch(resource.fetchStudyResource(args));},loadResource:function loadResource(args){dispatch(resource.fetchLoadResource(args));},handleSearchValue:function handleSearchValue(args){dispatch(resource.fetchSearchValue(args));},handleDownload:function handleDownload(args){dispatch(resource.downloadResource(args));}};})(LearningData);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/pages/LearningData.js"],"names":["React","useEffect","useRef","useState","connect","SearchInput","resource","isRecord","LearningData","props","resourceName","userName","type","total","studyResource","handleFetchStudyRes","handleSearchValue","handleDownload","searchFlag","page","learningDataTemp","time","current","setCurrent","columns","title","dataIndex","key","render","text","record","id","pageSize","onChange","e","state","getIn","learningUrl","searchResource","dispatch","args","fetchStudyResource","loadResource","fetchLoadResource","fetchSearchValue","downloadResource"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"../static/style/learningDatas.scss\";\r\nimport SearchInput from \"../components/Search\";\r\nimport { Table } from 'antd';\r\nimport * as resource from \"../redux/actionCreators/resource\";\r\nimport {isRecord} from \"immutable\";\r\n\r\nconst LearningData = props => {\r\n    const {\r\n        resourceName,\r\n        userName,\r\n        type,\r\n        total,\r\n        studyResource,\r\n        handleFetchStudyRes,\r\n        handleSearchValue,\r\n        handleDownload,\r\n        searchFlag,\r\n        page,\r\n        learningDataTemp,\r\n        time,\r\n    } = props;\r\n    useEffect(() => {\r\n        handleFetchStudyRes({page: 1, type: \"material\", resourceName: null, userName: null})\r\n    },[learningDataTemp, time]);\r\n\r\n    const [current, setCurrent] = useState(1);\r\n    useEffect(()=>{\r\n        setCurrent(page);\r\n    },[page]);\r\n\r\n\r\n    const columns = [\r\n        {\r\n            title: '资料名称',\r\n            dataIndex: 'title',\r\n            key: 'title',\r\n        },\r\n        {\r\n            title: '大小',\r\n            dataIndex: 'size',\r\n            key: 'size',\r\n        },\r\n        {\r\n            title: '上传人',\r\n            dataIndex: 'userName',\r\n            key: 'userName',\r\n        },\r\n        {\r\n            title: '上传时间',\r\n            key: 'addTime',\r\n            dataIndex: 'addTime',\r\n        },\r\n        {\r\n            title: '下载次数',\r\n            key: 'num',\r\n            dataIndex: 'downloadNum',\r\n        },\r\n        {\r\n            title: '下载资料',\r\n            key: 'url',\r\n            dataIndex: 'url',\r\n            render: (text, record) => (\r\n                <a\r\n                    download={record.title}\r\n                    href={{text}.text}\r\n                    onClick={\r\n                        () => {\r\n                            handleDownload({\r\n                                id: record.id,\r\n                                type: \"material\"\r\n                            })\r\n                        }\r\n                    }\r\n                >\r\n                    下载\r\n                </a>\r\n            )\r\n        },\r\n    ];\r\n    return(\r\n       <>\r\n           <div className=\"dataWrapper\">\r\n               <SearchInput/>\r\n               <Table\r\n                   tableLayout={\"fixed\"}\r\n                   rowKey={record => record.id}\r\n                   columns={columns}\r\n                   dataSource={studyResource}\r\n                   pagination={{\r\n                       total,\r\n                       pageSize: 10,\r\n                       current,\r\n                       onChange: e => {\r\n                           !searchFlag ?\r\n                               handleFetchStudyRes({\r\n                                   page: e,\r\n                                   type: \"material\",\r\n                                   resourceName: null,\r\n                                   userName: null\r\n                               })\r\n                               :\r\n                               handleSearchValue({\r\n                                   page: e,\r\n                                   type,\r\n                                   resourceName,\r\n                                   userName\r\n                               });\r\n                       }\r\n                   }}\r\n               />\r\n           </div>\r\n           <style>\r\n               {\r\n                   `\r\n                        .ant-table-content {\r\n                            border: 1px dashed #efefef !important;\r\n                        }\r\n                   `\r\n               }\r\n           </style>\r\n       </>\r\n    )\r\n};\r\n\r\nexport default connect(\r\n    state => ({\r\n        resourceName: state.getIn([\"resource\",\"resource\",\"resourceName\"]),\r\n        type: state.getIn([\"resource\",\"resource\",\"type\"]),\r\n        userName: state.getIn([\"resource\",\"resource\",\"userName\"]),\r\n        total: state.getIn([\"resource\",\"resource\",\"allLearningTotal\"]),\r\n        searchFlag: state.getIn([\"resource\",\"resource\",\"searchFlag\"]),\r\n        studyResource: state.getIn([\"resource\",\"resource\",\"studyResource\"]),\r\n        learningUrl: state.getIn([\"resource\",\"resource\",\"learningUrl\"]),\r\n        searchResource: state.getIn([\"resource\", \"searchRes\", \"searchResource\"]),\r\n        page: state.getIn([\"resource\", \"resource\", \"page\"]),\r\n        learningDataTemp: state.getIn([\"resource\", \"resource\", \"learningDataTemp\"]),\r\n        time: state.getIn([\"resource\", \"resource\",\"time\"]),\r\n    }),\r\n    dispatch => ({\r\n        handleFetchStudyRes(args) {\r\n            dispatch(resource.fetchStudyResource(args));\r\n        },\r\n        loadResource(args) {\r\n            dispatch(resource.fetchLoadResource(args));\r\n        },\r\n        handleSearchValue(args){\r\n            dispatch(resource.fetchSearchValue(args));\r\n        },\r\n        handleDownload(args) {\r\n            dispatch(resource.downloadResource(args));\r\n        }\r\n    })\r\n)(LearningData);\r\n"]},"metadata":{},"sourceType":"module"}