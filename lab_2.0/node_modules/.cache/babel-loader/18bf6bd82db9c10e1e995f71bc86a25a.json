{"ast":null,"code":"import\"antd/es/table/style/css\";import _Table from\"antd/es/table\";import\"antd/es/button/style/css\";import _Button from\"antd/es/button\";import _slicedToArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import{connect}from\"react-redux\";import*as admin from\"../../redux/actionCreators/admin\";import\"../../static/style/admin.scss\";var RegisterUser=function RegisterUser(props){var total=props.total,adminRegisterUserData=props.adminRegisterUserData,handleRegisterUserData=props.handleRegisterUserData,userId=props.userId,handleAgreeRegister=props.handleAgreeRegister,handleDeleteRegisterUser=props.handleDeleteRegisterUser,temp=props.temp;var columns=[{key:'1',title:'学号',dataIndex:'userId'},{key:'2',title:'学生姓名',dataIndex:'userName'},{key:'3',title:'年级',dataIndex:'grade'},{key:'4',title:'学院',dataIndex:'academy'},{key:'5',title:'专业',dataIndex:'discipline'},{key:'6',title:'班级',dataIndex:'cls'},{key:'7',title:'性别',dataIndex:'sex'},{key:'8',title:'电话',dataIndex:'phone'},{key:'9',title:'教师姓名',dataIndex:'teacherName'},{key:'10',title:'注册时间',dataIndex:'registerDate'},{key:'11',title:'授权状态',dataIndex:'state',render:function render(text,record){return/*#__PURE__*/React.createElement(\"span\",{style:text===\"yes\"?{color:\"#000000\"}:{color:\"#FF0000\"}},text===\"yes\"?text=\"已被授权\":text=\"未被授权\");}}];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),$selectedRowKeys=_useState2[0],changeSelectedRowKeys=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedRowKeys=_useState4[0],setSelectedRowKeys=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),list=_useState6[0],setList=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),presentPage=_useState8[0],setPresentPage=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),deleteBtn=_useState10[0],setDeleteBtn=_useState10[1];var clearCheck=function clearCheck(){setSelectedRowKeys([]);};useEffect(function(){handleRegisterUserData(presentPage===1?{page:1,type:\"admin\"}:Math.ceil(total/10)>presentPage?{page:presentPage,type:\"admin\"}:{page:presentPage-1,type:\"admin\"});},[temp]);return/*#__PURE__*/React.createElement(\"div\",{className:\"adminTop\"},/*#__PURE__*/React.createElement(_Button,{disabled:deleteBtn,style:{marginLeft:\"0.5rem\"},icon:\"diff\",onClick:function onClick(){handleAgreeRegister({list:list});}},\"\\u6279\\u91CF\\u6388\\u6743\"),/*#__PURE__*/React.createElement(_Button,{style:{marginLeft:\"0.5rem\"},disabled:deleteBtn,icon:\"close\",onClick:function onClick(){handleDeleteRegisterUser({list:list});}},\"\\u5220\\u9664\\u7528\\u6237\"),/*#__PURE__*/React.createElement(_Table,{tableLayout:\"fixed\",rowKey:function rowKey(record){return record.id;},size:\"middle\",columns:columns,rowSelection:{selectedRowKeys:selectedRowKeys,onChange:function onChange(selectedRowKeys,selectedRows){var userId=selectedRows.map(function(el){return el.userId;});setList(userId);changeSelectedRowKeys(userId);setSelectedRowKeys(selectedRowKeys);selectedRowKeys.length>0?setDeleteBtn(false):setDeleteBtn(true);}},dataSource:Array.from(adminRegisterUserData),pagination:{total:total,pageSize:10,defaultCurrent:1,onChange:function onChange(e){handleRegisterUserData({page:e,type:\"admin\",userId:userId});setPresentPage(e);clearCheck();}}}));};export default connect(function(state){return{userId:state.getIn([\"userMana\",\"common\",\"userId\"]),adminRegisterUserData:state.getIn([\"admin\",\"userManage\",\"adminRegisterUserData\"]),total:state.getIn([\"admin\",\"userManage\",\"registerUserTotal\"]),temp:state.getIn([\"admin\",\"userManage\",\"temp\"])};},function(dispatch){return{handleRegisterUserData:function handleRegisterUserData(args){dispatch(admin.fetchRegisterUserData(args));},handleAgreeRegister:function handleAgreeRegister(args){dispatch(admin.agreeRegister(args));},handleDeleteRegisterUser:function handleDeleteRegisterUser(args){dispatch(admin.deleteRegisterUser(args));}};})(RegisterUser);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/components/Administrator/RegisterUser.js"],"names":["React","useEffect","useRef","useState","connect","admin","RegisterUser","props","total","adminRegisterUserData","handleRegisterUserData","userId","handleAgreeRegister","handleDeleteRegisterUser","temp","columns","key","title","dataIndex","render","text","record","color","$selectedRowKeys","changeSelectedRowKeys","selectedRowKeys","setSelectedRowKeys","list","setList","presentPage","setPresentPage","deleteBtn","setDeleteBtn","clearCheck","page","type","Math","ceil","marginLeft","id","onChange","selectedRows","map","el","length","Array","from","pageSize","defaultCurrent","e","state","getIn","dispatch","args","fetchRegisterUserData","agreeRegister","deleteRegisterUser"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {Button, Table, Input, InputNumber, Popconfirm, Form, Modal, Dropdown, Menu, Divider} from 'antd';\r\nimport * as admin from \"../../redux/actionCreators/admin\";\r\nimport \"../../static/style/admin.scss\";\r\nconst RegisterUser = props => {\r\n    const { total,\r\n        adminRegisterUserData,\r\n        handleRegisterUserData,\r\n        userId,\r\n        handleAgreeRegister,\r\n        handleDeleteRegisterUser,\r\n        temp\r\n    } = props;\r\n    const columns = [\r\n        {\r\n            key: '1',\r\n            title: '学号',\r\n            dataIndex: 'userId',\r\n        },\r\n        {\r\n            key: '2',\r\n            title: '学生姓名',\r\n            dataIndex: 'userName'\r\n        },\r\n        {\r\n            key: '3',\r\n            title: '年级',\r\n            dataIndex: 'grade'\r\n        },\r\n        {\r\n            key: '4',\r\n            title: '学院',\r\n            dataIndex: 'academy'\r\n        },\r\n        {\r\n            key: '5',\r\n            title: '专业',\r\n            dataIndex: 'discipline'\r\n        },\r\n        {\r\n            key: '6',\r\n            title: '班级',\r\n            dataIndex: 'cls'\r\n        },\r\n        {\r\n            key: '7',\r\n            title: '性别',\r\n            dataIndex: 'sex'\r\n        },\r\n        {\r\n            key: '8',\r\n            title: '电话',\r\n            dataIndex: 'phone'\r\n        },\r\n        {\r\n            key: '9',\r\n            title: '教师姓名',\r\n            dataIndex: 'teacherName',\r\n        },\r\n        {\r\n            key: '10',\r\n            title: '注册时间',\r\n            dataIndex: 'registerDate',\r\n        },\r\n        {\r\n            key: '11',\r\n            title: '授权状态',\r\n            dataIndex: 'state',\r\n            render: (text, record) => <span style={text===\"yes\"?{color: \"#000000\"}: {color: \"#FF0000\"}}>\r\n                {text===\"yes\"?text=\"已被授权\":text=\"未被授权\"}\r\n            </span>\r\n        }\r\n    ];\r\n    const [$selectedRowKeys, changeSelectedRowKeys] = useState([]);\r\n    const [selectedRowKeys, setSelectedRowKeys] = useState([]);\r\n    const [list, setList] = useState([]);\r\n    const [presentPage, setPresentPage] = useState(1);\r\n    const [deleteBtn, setDeleteBtn ] = useState(true);\r\n    const clearCheck = () => {\r\n        setSelectedRowKeys([])\r\n    };\r\n    useEffect(() => {\r\n        handleRegisterUserData(\r\n            presentPage === 1 ?\r\n                {page: 1, type: \"admin\"} :\r\n                (Math.ceil(total / 10) > presentPage ?\r\n                        {page: presentPage, type: \"admin\"} :\r\n                        {page: presentPage - 1, type: \"admin\"}\r\n                ));\r\n    }, [temp]);\r\n    return (\r\n        <div className={\"adminTop\"}>\r\n            <Button\r\n                disabled={deleteBtn}\r\n                style={{marginLeft: \"0.5rem\"}}\r\n                icon={\"diff\"}\r\n                onClick={\r\n                    () => {\r\n                        handleAgreeRegister({\r\n                            list: list\r\n                        })\r\n                    }\r\n                }\r\n            >\r\n                批量授权\r\n            </Button>\r\n            <Button\r\n                style={{marginLeft: \"0.5rem\"}}\r\n                disabled={deleteBtn}\r\n                icon={\"close\"}\r\n                onClick={\r\n                    () => {\r\n                        handleDeleteRegisterUser({\r\n                            list: list\r\n                        })\r\n                    }\r\n                }\r\n            >\r\n                删除用户\r\n            </Button>\r\n            <Table\r\n                tableLayout={\"fixed\"}\r\n                rowKey={record => record.id}\r\n                size={\"middle\"}\r\n                columns={ columns }\r\n                rowSelection={{\r\n                    selectedRowKeys,\r\n                    onChange: (selectedRowKeys, selectedRows) => {\r\n                        const userId = selectedRows.map(el => {\r\n                            return el.userId;\r\n                        });\r\n                        setList(userId);\r\n                        changeSelectedRowKeys(userId);\r\n                        setSelectedRowKeys(selectedRowKeys);\r\n                        selectedRowKeys.length > 0 ? setDeleteBtn(false) : setDeleteBtn(true);\r\n                    },\r\n                }}\r\n                dataSource={Array.from(adminRegisterUserData)}\r\n                pagination={{\r\n                    total,\r\n                    pageSize: 10,\r\n                    defaultCurrent: 1,\r\n                    onChange: e => {\r\n                        handleRegisterUserData({\r\n                            page: e,\r\n                            type: \"admin\",\r\n                            userId: userId\r\n                        });\r\n                        setPresentPage(e);\r\n                        clearCheck();\r\n                    }\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n\r\n};\r\nexport default connect(\r\n    state => ({\r\n        userId: state.getIn([\"userMana\", \"common\", \"userId\"]),\r\n        adminRegisterUserData: state.getIn([\"admin\", \"userManage\", \"adminRegisterUserData\"]),\r\n        total: state.getIn([\"admin\", \"userManage\", \"registerUserTotal\"]),\r\n        temp: state.getIn([\"admin\", \"userManage\", \"temp\"])\r\n    }),\r\n    dispatch => ({\r\n        handleRegisterUserData(args){\r\n            dispatch(admin.fetchRegisterUserData(args));\r\n        },\r\n        handleAgreeRegister(args) {\r\n            dispatch(admin.agreeRegister(args));\r\n        },\r\n        handleDeleteRegisterUser(args) {\r\n            dispatch(admin.deleteRegisterUser(args));\r\n        }\r\n    })\r\n)(RegisterUser);\r\n"]},"metadata":{},"sourceType":"module"}