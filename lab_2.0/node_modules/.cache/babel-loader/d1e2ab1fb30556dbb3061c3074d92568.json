{"ast":null,"code":"import\"antd/es/modal/style/css\";import _Modal from\"antd/es/modal\";import\"antd/es/table/style/css\";import _Table from\"antd/es/table\";import\"antd/es/menu/style/css\";import _Menu from\"antd/es/menu\";import _objectSpread from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import\"antd/es/dropdown/style/css\";import _Dropdown from\"antd/es/dropdown\";import\"antd/es/button/style/css\";import _Button from\"antd/es/button\";import _slicedToArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import\"antd/es/input/style/css\";import _Input from\"antd/es/input\";import React,{useEffect,useRef,useState}from\"react\";import{connect}from\"react-redux\";import*as admin from\"../../redux/actionCreators/admin\";import\"../../static/style/admin.scss\";import{openNotification}from\"../../utils/commonFunction\";var Search=_Input.Search;var mapStateToState=function mapStateToState(state){return{total:state.getIn([\"admin\",\"userManage\",\"teacherTotal\"]),adminTeacherData:state.getIn([\"admin\",\"userManage\",\"adminTeacherData\"]),temp:state.getIn([\"admin\",\"userManage\",\"temp\"]),addTeacherFlag:state.getIn([\"admin\",\"userManage\",\"addTeacherFlag\"]),modifyTeacherTemp:state.getIn([\"admin\",\"userManage\",\"modifyTeacherTemp\"]),teacherPage:state.getIn([\"admin\",\"userManage\",\"teacherPage\"]),searchFlag:state.getIn([\"admin\",\"userManage\",\"teacherSearchFlag\"]),userId_i:state.getIn([\"userMana\",\"common\",\"userId\"])};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{handleTeacherData:function handleTeacherData(args){dispatch(admin.fetchTeacherData(args));},handleAddTeacher:function handleAddTeacher(args){if(args.userId.length<4||args.userId.length>30){openNotification(\"教师编号请输入4-30位的教师编号\");}else if(args.userName.length<2||args.userName.length>30){openNotification(\"教师名字请输入2-30位的名字\");}else if(args.phone===null||args.phone.length<5||args.phone.length>30){openNotification(\"电话请输入5-30位的数字\");}else{dispatch(admin.addNewTeacher(args));}},handleDeleteTeacher:function handleDeleteTeacher(args){dispatch(admin.deleteTeacher(args));},handleModifyTeacher:function handleModifyTeacher(args){console.log(args);if(args.userId.length<4||args.userId.length>30){openNotification(\"教师编号请输入4-30位的教师编号\");}else if(args.userName.length<2||args.userName.length>30){openNotification(\"教师名字请输入2-30位的名字\");}else if(args.phone===null||args.phone.length<5||args.phone.length>30){openNotification(\"电话请输入5-30位的数字\");}else{dispatch(admin.modifyTeacher(args));}},handleSearchTeacherData:function handleSearchTeacherData(args){dispatch(admin.searchTeacher(args));},resetPassword:function resetPassword(args){dispatch(admin.resetPassword(args));}};};var TeacherMessage=function TeacherMessage(props){var total=props.total,adminTeacherData=props.adminTeacherData,handleTeacherData=props.handleTeacherData,handleAddTeacher=props.handleAddTeacher,handleDeleteTeacher=props.handleDeleteTeacher,handleModifyTeacher=props.handleModifyTeacher,temp=props.temp,addTeacherFlag=props.addTeacherFlag,modifyTeacherTemp=props.modifyTeacherTemp,handleSearchTeacherData=props.handleSearchTeacherData,teacherPage=props.teacherPage,searchFlag=props.searchFlag,userId_i=props.userId_i,resetPassword=props.resetPassword;var userId=useRef();var userName=useRef();var phone=useRef();var department=useRef();var academy=useState();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setId=_useState2[1];var isEditing=function isEditing(record){return record.id===id;};var columns=[{key:'1',title:'教师账号',dataIndex:'userId',editable:true},{key:'2',title:'教师姓名',render:function render(text,record){return isEditing(record)?/*#__PURE__*/React.createElement(_Input,{ref:userName,defaultValue:record.userName}):/*#__PURE__*/React.createElement(\"span\",null,record.userName);},editable:true},{key:'3',title:'学院',render:function render(text,record){return isEditing(record)?/*#__PURE__*/React.createElement(_Input,{ref:academy,defaultValue:record.academy}):/*#__PURE__*/React.createElement(\"span\",null,record.academy);},editable:true},{key:'4',title:'电话',render:function render(text,record){console.log(record);return isEditing(record)?/*#__PURE__*/React.createElement(_Input,{ref:phone,defaultValue:record.phone}):/*#__PURE__*/React.createElement(\"span\",null,record.phone);},editable:true},{key:'5',title:'教师部门',render:function render(text,record){return isEditing(record)?/*#__PURE__*/React.createElement(_Input,{ref:department,defaultValue:record.discipline}):/*#__PURE__*/React.createElement(\"span\",null,record.discipline);},editable:true},{key:'6',title:'性别',dataIndex:'sex',render:function render(text,record){return isEditing(record)?/*#__PURE__*/React.createElement(_Dropdown,{overlay:menu},/*#__PURE__*/React.createElement(_Button,{style:{padding:\"0 20px\"}},record.sex)):/*#__PURE__*/React.createElement(\"span\",null,record.sex);},editable:true},{key:'7',title:'',dataIndex:'operation',render:function render(text,record){var editable=isEditing(record);return editable?/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){handleModifyTeacher({userId:record.userId,userName:userName.current.state.value,academy:academy.current.state.value,phone:phone.current.state.value,discipline:department.current.state.value,sex:sex});setId(\"\");}},\"\\u4FDD\\u5B58\"):/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return setId(record.id);}},\"\\u4FEE\\u6539\");}},{key:'8',title:'',dataIndex:'resetPassword',render:function render(text,record){return/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){resetPassword({'id':record.userId,'userId':userId_i});}},\"\\u91CD\\u7F6E\\u5BC6\\u7801\");}}];var $columns=columns.map(function(el){if(!el.editable){return el;}return _objectSpread(_objectSpread({},el),{},{onCell:function onCell(record){return{record:record,dataIndex:el.dataIndex,title:el.title,editing:isEditing(record)};}});});var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),addFlag=_useState4[0],changeAddFlag=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),$selectedRowKeys=_useState6[0],changeSelectedRowKeys=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),sex=_useState8[0],setSex=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),list=_useState10[0],setList=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),selectedRowKeys=_useState12[0],setSelectedRowKeys=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),value=_useState14[0],setValue=_useState14[1];var _useState15=useState(1),_useState16=_slicedToArray(_useState15,2),presentPage=_useState16[0],setPresentPage=_useState16[1];var _useState17=useState(true),_useState18=_slicedToArray(_useState17,2),deleteBtn=_useState18[0],setDeleteBtn=_useState18[1];var clearCheck=function clearCheck(){setSelectedRowKeys([]);};function onClick(e){setSex(e.key);}var menu=/*#__PURE__*/React.createElement(_Menu,{onClick:onClick},/*#__PURE__*/React.createElement(_Menu.Item,{style:{textAlign:\"center\"},key:\"\\u7537\"},\"\\u7537\"),/*#__PURE__*/React.createElement(_Menu.Item,{style:{textAlign:\"center\"},key:\"\\u5973\"},\"\\u5973\"));useEffect(function(){handleTeacherData(presentPage===1?{page:1,type:\"teacher\"}:Math.ceil(total/10)>presentPage?{page:presentPage,type:\"teacher\"}:{page:presentPage-1,type:\"teacher\"});clearCheck();},[temp,modifyTeacherTemp]);useEffect(function(){changeAddFlag(false);},[addTeacherFlag]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"adminTop\"},/*#__PURE__*/React.createElement(_Button,{style:{marginLeft:'0.5rem'},onClick:function onClick(){return changeAddFlag(true);},icon:\"plus\"},\"\\u6DFB\\u52A0\\u6559\\u5E08\"),/*#__PURE__*/React.createElement(_Button,{disabled:deleteBtn,icon:\"close\",style:{marginLeft:\"0.5rem\"},onClick:function onClick(){handleDeleteTeacher({list:list});}},\"\\u5220\\u9664\\u6559\\u5E08\"),/*#__PURE__*/React.createElement(Search,{style:{width:\"20rem\",marginLeft:\"0.5rem\"},placeholder:\"\\u8BF7\\u8F93\\u5165\\u8001\\u5E08\\u59D3\\u540D\",onSearch:function onSearch(e){handleSearchTeacherData({page:1,type:\"teacher\",userName:e});setValue(e);},enterButton:true})),/*#__PURE__*/React.createElement(_Table,{rowKey:function rowKey(record){return record.id;},size:\"middle\",columns:$columns,rowSelection:{selectedRowKeys:selectedRowKeys,onChange:function onChange(selectedRowKeys,selectedRows){var userId=selectedRows.map(function(el){return el.userId;});setList(userId);changeSelectedRowKeys(userId);selectedRowKeys.length>0?setDeleteBtn(false):setDeleteBtn(true);setSelectedRowKeys(selectedRowKeys);}},dataSource:Array.from(adminTeacherData),pagination:{total:total,defaultCurrent:1,current:presentPage,onChange:function onChange(e){!searchFlag?handleTeacherData({page:e,type:\"teacher\"}):handleSearchTeacherData({page:e,type:\"teacher\",userName:value});setPresentPage(e);clearCheck();}}}),/*#__PURE__*/React.createElement(_Modal,{afterClose:function afterClose(){userId.current&&userName.current&&department.current&&setTimeout(function(){userId.current.state.value=\"\";userName.current.state.value=\"\";// phone.current.state.value = \"\";\ndepartment.current.state.value=\"\";},2000);},title:\"添加教师\",visible:addFlag,onCancel:function onCancel(){changeAddFlag(false);},okText:\"\\u6DFB\\u52A0\",onOk:function onOk(){handleAddTeacher({type:\"teacher\",userId:userId.current.state.value,userName:userName.current.state.value,phone:phone.current.state.value,discipline:department.current.state.value,adminTeacherData:adminTeacherData,sex:sex});}},/*#__PURE__*/React.createElement(\"div\",{className:\"_wrap row row-start-center\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u6559\\u5E08\\u8D26\\u53F7\\uFF1A\"),/*#__PURE__*/React.createElement(_Input,{ref:userId})),/*#__PURE__*/React.createElement(\"div\",{className:\"_wrap row row-start-center\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u6559\\u5E08\\u59D3\\u540D\\uFF1A\"),/*#__PURE__*/React.createElement(_Input,{ref:userName})),/*#__PURE__*/React.createElement(\"div\",{className:\"_wrap row row-start-center\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u6559\\u5E08\\u7535\\u8BDD\\uFF1A\"),/*#__PURE__*/React.createElement(_Input,{ref:phone})),/*#__PURE__*/React.createElement(\"div\",{className:\"_wrap row row-start-center\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u6559\\u5E08\\u90E8\\u95E8\\uFF1A\"),/*#__PURE__*/React.createElement(_Input,{ref:department})),/*#__PURE__*/React.createElement(\"div\",{className:\"_wrap row row-start-center\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u9009\\u62E9\\u6027\\u522B\\uFF1A\"),/*#__PURE__*/React.createElement(_Dropdown,{overlay:menu},/*#__PURE__*/React.createElement(_Button,{style:{padding:\"0 20px\"}},sex)))),/*#__PURE__*/React.createElement(\"style\",null,\"\\n                    ._wrap {\\n                        margin-bottom: 20px;\\n                    }\\n                    .ant-input {\\n                        width: 80%;\\n                    }\\n                    input {\\n                        margin: 20px;\\n                    }\\n                    \"));};export default connect(mapStateToState,mapDispatchToProps)(TeacherMessage);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/components/Administrator/TeacherMessage.js"],"names":["React","useEffect","useRef","useState","connect","admin","openNotification","Search","mapStateToState","state","total","getIn","adminTeacherData","temp","addTeacherFlag","modifyTeacherTemp","teacherPage","searchFlag","userId_i","mapDispatchToProps","dispatch","handleTeacherData","args","fetchTeacherData","handleAddTeacher","userId","length","userName","phone","addNewTeacher","handleDeleteTeacher","deleteTeacher","handleModifyTeacher","console","log","modifyTeacher","handleSearchTeacherData","searchTeacher","resetPassword","TeacherMessage","props","department","academy","id","setId","isEditing","record","columns","key","title","dataIndex","editable","render","text","discipline","menu","padding","sex","current","value","$columns","map","el","onCell","editing","addFlag","changeAddFlag","$selectedRowKeys","changeSelectedRowKeys","setSex","list","setList","selectedRowKeys","setSelectedRowKeys","setValue","presentPage","setPresentPage","deleteBtn","setDeleteBtn","clearCheck","onClick","e","textAlign","page","type","Math","ceil","marginLeft","width","onChange","selectedRows","Array","from","defaultCurrent","setTimeout"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {Button, Table, Input, Modal, Dropdown, Menu} from 'antd';\r\nimport * as admin from \"../../redux/actionCreators/admin\";\r\nimport \"../../static/style/admin.scss\";\r\nimport {openNotification} from \"../../utils/commonFunction\";\r\nconst { Search } = Input;\r\nconst mapStateToState = state => ({\r\n    total: state.getIn([\"admin\", \"userManage\", \"teacherTotal\"]),\r\n    adminTeacherData: state.getIn([\"admin\", \"userManage\", \"adminTeacherData\"]),\r\n    temp: state.getIn([\"admin\", \"userManage\", \"temp\"]),\r\n    addTeacherFlag: state.getIn([\"admin\", \"userManage\", \"addTeacherFlag\"]),\r\n    modifyTeacherTemp: state.getIn([\"admin\", \"userManage\", \"modifyTeacherTemp\"]),\r\n    teacherPage: state.getIn([\"admin\", \"userManage\", \"teacherPage\"]),\r\n    searchFlag: state.getIn([\"admin\", \"userManage\", \"teacherSearchFlag\"]),\r\n    userId_i: state.getIn([\"userMana\", \"common\", \"userId\"]),\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    handleTeacherData(args){\r\n        dispatch(admin.fetchTeacherData(args));\r\n    },\r\n    handleAddTeacher(args) {\r\n        if(args.userId.length < 4 || args.userId.length > 30){\r\n            openNotification(\"教师编号请输入4-30位的教师编号\")\r\n        } else if(args.userName.length <2 || args.userName.length > 30){\r\n            openNotification(\"教师名字请输入2-30位的名字\")\r\n        } else if (args.phone === null || args.phone.length <5 || args.phone.length > 30){\r\n            openNotification(\"电话请输入5-30位的数字\")\r\n        } else {\r\n            dispatch(admin.addNewTeacher(args));\r\n        }\r\n    },\r\n    handleDeleteTeacher(args) {\r\n        dispatch(admin.deleteTeacher(args));\r\n    },\r\n    handleModifyTeacher(args) {\r\n        console.log(args)\r\n        if(args.userId.length < 4 || args.userId.length > 30){\r\n            openNotification(\"教师编号请输入4-30位的教师编号\")\r\n        } else if(args.userName.length <2 || args.userName.length > 30){\r\n            openNotification(\"教师名字请输入2-30位的名字\")\r\n        } else if (args.phone === null || args.phone.length <5 || args.phone.length > 30){\r\n            openNotification(\"电话请输入5-30位的数字\")\r\n        } else {\r\n            dispatch(admin.modifyTeacher(args));\r\n        }\r\n    },\r\n    handleSearchTeacherData(args) {\r\n        dispatch(admin.searchTeacher(args))\r\n    },\r\n    resetPassword(args) {\r\n        dispatch(admin.resetPassword(args))\r\n    }\r\n});\r\n\r\nconst TeacherMessage = props => {\r\n    const {\r\n        total,\r\n        adminTeacherData,\r\n        handleTeacherData,\r\n        handleAddTeacher,\r\n        handleDeleteTeacher,\r\n        handleModifyTeacher,\r\n        temp,\r\n        addTeacherFlag,\r\n        modifyTeacherTemp,\r\n        handleSearchTeacherData,\r\n        teacherPage,\r\n        searchFlag,\r\n        userId_i,\r\n        resetPassword\r\n    } = props;\r\n    const userId = useRef();\r\n    const userName = useRef();\r\n    const phone = useRef();\r\n    const department = useRef();\r\n    const academy = useState();\r\n    const [id, setId] = useState(\"\");\r\n    const isEditing = record => record.id === id;\r\n    const columns = [\r\n        {\r\n            key: '1',\r\n            title: '教师账号',\r\n            dataIndex: 'userId',\r\n            editable: true\r\n        },\r\n        {\r\n            key: '2',\r\n            title: '教师姓名',\r\n            render: (text, record) => {\r\n                return isEditing(record) ? (\r\n                    <Input ref={userName} defaultValue={record.userName} />\r\n                ):(\r\n                    <span>{record.userName}</span>\r\n                )\r\n            },\r\n            editable: true\r\n        },\r\n        {\r\n            key: '3',\r\n            title: '学院',\r\n            render: (text, record) => {\r\n                return isEditing(record) ? (\r\n                    <Input ref={academy} defaultValue={record.academy} />\r\n                ):(\r\n                    <span>{record.academy}</span>\r\n                )\r\n            },\r\n            editable: true\r\n\r\n        },\r\n        {\r\n            key: '4',\r\n            title: '电话',\r\n            render: (text, record) => {\r\n                console.log(record)\r\n                return isEditing(record) ? (\r\n                    <Input ref={phone} defaultValue={record.phone} />\r\n                ):(\r\n                    <span>{record.phone}</span>\r\n                )\r\n            },\r\n            editable: true\r\n        },\r\n        {\r\n            key: '5',\r\n            title: '教师部门',\r\n            render: (text, record) => {\r\n                return isEditing(record) ? (\r\n                    <Input ref={department} defaultValue={record.discipline} />\r\n                ):(\r\n                    <span>{record.discipline}</span>\r\n                )\r\n            },\r\n            editable: true\r\n        },\r\n        {\r\n            key: '6',\r\n            title: '性别',\r\n            dataIndex: 'sex',\r\n            render: (text, record) => {\r\n                return isEditing(record) ? (\r\n                    <Dropdown overlay={menu}>\r\n                        <Button style={{ padding: \"0 20px\" }}>{record.sex}</Button>\r\n                    </Dropdown>\r\n                ):(\r\n                    <span>{record.sex}</span>\r\n                )\r\n            },\r\n            editable: true\r\n        },\r\n        {\r\n            key: '7',\r\n            title: '',\r\n            dataIndex: 'operation',\r\n            render: (text, record) => {\r\n                const editable = isEditing(record);\r\n                return editable ? (\r\n                    <a\r\n                        onClick={\r\n                            () => {\r\n                                handleModifyTeacher({\r\n                                    userId: record.userId,\r\n                                    userName: userName.current.state.value,\r\n                                    academy: academy.current.state.value,\r\n                                    phone: phone.current.state.value,\r\n                                    discipline: department.current.state.value,\r\n                                    sex\r\n                                });\r\n                                setId(\"\")\r\n                            }\r\n                        }\r\n                    >\r\n                        保存\r\n                    </a>\r\n                ) : (\r\n                    <a\r\n                        onClick={ () => setId(record.id)}\r\n                    >\r\n                        修改\r\n                    </a>\r\n                )\r\n            }\r\n        },\r\n        {\r\n            key: '8',\r\n            title: '',\r\n            dataIndex: 'resetPassword',  \r\n            render: (text, record) => {\r\n                return (<a \r\n                            onClick={() => {resetPassword({'id': record.userId, 'userId': userId_i})}}\r\n                        >\r\n                                重置密码\r\n                        </a>)\r\n                \r\n            }\r\n        }\r\n    ];\r\n    const $columns = columns.map(el => {\r\n        if (!el.editable) {\r\n            return el;\r\n        }\r\n        return {\r\n            ...el,\r\n            onCell: record => ({\r\n                record,\r\n                dataIndex: el.dataIndex,\r\n                title: el.title,\r\n                editing: isEditing(record),\r\n            })\r\n        }\r\n    });\r\n    const [addFlag, changeAddFlag] = useState(false);\r\n    const [$selectedRowKeys, changeSelectedRowKeys] = useState([]);\r\n    const [sex, setSex] = useState(\"\");\r\n    const [list, setList] = useState([]);\r\n    const [selectedRowKeys, setSelectedRowKeys] = useState([]);\r\n    const [value, setValue ] = useState(\"\");\r\n    const [presentPage, setPresentPage] = useState(1);\r\n    const [deleteBtn, setDeleteBtn ] = useState(true);\r\n    const clearCheck = () => {\r\n        setSelectedRowKeys([])\r\n    };\r\n\r\n    function onClick(e) {\r\n        setSex(e.key);\r\n    }\r\n    const menu = (\r\n        <Menu onClick={onClick}>\r\n            <Menu.Item style={{ textAlign: \"center\" }} key=\"男\">男</Menu.Item>\r\n            <Menu.Item style={{ textAlign: \"center\" }} key=\"女\">女</Menu.Item>\r\n        </Menu>\r\n    );\r\n    useEffect(()=> {\r\n        handleTeacherData(\r\n            presentPage === 1 ?\r\n                {page: 1, type: \"teacher\"} :\r\n                (Math.ceil(total / 10) > presentPage ?\r\n                        {page: presentPage, type: \"teacher\"} :\r\n                        {page: presentPage - 1, type: \"teacher\"}\r\n                ));\r\n        clearCheck()\r\n    }, [temp, modifyTeacherTemp]);\r\n\r\n    useEffect(() => {\r\n        changeAddFlag(false);\r\n    },[addTeacherFlag]);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"adminTop\">\r\n                <Button\r\n                    style={{marginLeft: '0.5rem'}}\r\n                    onClick={ () => changeAddFlag(true)}\r\n                    icon={\"plus\"}\r\n                >\r\n                    添加教师\r\n                </Button>\r\n                <Button\r\n                    disabled={deleteBtn}\r\n                    icon={\"close\"}\r\n                    style={{marginLeft: \"0.5rem\"}}\r\n                    onClick={ () => {\r\n                        handleDeleteTeacher({list: list})\r\n                    }}\r\n                >\r\n                    删除教师\r\n                </Button>\r\n                <Search\r\n                    style={{width: \"20rem\", marginLeft: \"0.5rem\"}}\r\n                    placeholder=\"请输入老师姓名\"\r\n                    onSearch={\r\n                        (e) => {\r\n                            handleSearchTeacherData({\r\n                                page: 1,\r\n                                type: \"teacher\",\r\n                                userName: e,\r\n                            });\r\n                            setValue(e);\r\n                        }\r\n                    }\r\n                    enterButton\r\n                />\r\n            </div>\r\n            {/* 表格 */}\r\n            <Table\r\n                rowKey={record => record.id}\r\n                size={\"middle\"}\r\n                columns={ $columns }\r\n                rowSelection={{\r\n                    selectedRowKeys,\r\n                    onChange: (selectedRowKeys, selectedRows) => {\r\n                        const userId = selectedRows.map(el => {\r\n                            return el.userId;\r\n                        });\r\n                        setList(userId);\r\n                        changeSelectedRowKeys(userId);\r\n                        selectedRowKeys.length > 0 ? setDeleteBtn(false) : setDeleteBtn(true);\r\n                        setSelectedRowKeys(selectedRowKeys);\r\n                    },\r\n                }}\r\n                dataSource={ Array.from(adminTeacherData) }\r\n                pagination={{\r\n                    total,\r\n                    defaultCurrent: 1,\r\n                    current: presentPage,\r\n                    onChange: e => {\r\n                        !searchFlag ?\r\n                        handleTeacherData({page: e, type: \"teacher\"}):\r\n                            handleSearchTeacherData({\r\n                                page: e,\r\n                                type: \"teacher\",\r\n                                userName: value\r\n                            });\r\n                        setPresentPage(e);\r\n                        clearCheck();\r\n                    }\r\n                }}\r\n            />\r\n            {/* 添加教师 */}\r\n            <Modal\r\n                afterClose={() => {\r\n                    userId.current && userName.current && department.current && \r\n                    setTimeout(() => {\r\n                        userId.current.state.value = \"\";\r\n                        userName.current.state.value = \"\";\r\n                        // phone.current.state.value = \"\";\r\n                        department.current.state.value = \"\";\r\n                    }, 2000)\r\n                }}\r\n                title={\"添加教师\"}\r\n                visible={addFlag}\r\n                onCancel={\r\n                    () => {\r\n                        changeAddFlag(false);\r\n                    }\r\n                }\r\n                okText=\"添加\"\r\n                onOk={() => {\r\n                    handleAddTeacher({\r\n                        type: \"teacher\",\r\n                        userId: userId.current.state.value,\r\n                        userName: userName.current.state.value,\r\n                        phone: phone.current.state.value,\r\n                        discipline: department.current.state.value,\r\n                        adminTeacherData,\r\n                        sex,\r\n                    });\r\n                }}\r\n            >\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>教师账号：</label>\r\n                    <Input ref={userId} />\r\n                </div>\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>教师姓名：</label>\r\n                    <Input ref={userName} />\r\n                </div>\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>教师电话：</label>\r\n                    <Input ref={phone} />\r\n                </div>\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>教师部门：</label>\r\n                    <Input ref={department} />\r\n                </div>\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>选择性别：</label>\r\n                    <Dropdown overlay={menu}>\r\n                        <Button style={{ padding: \"0 20px\" }}>{sex}</Button>\r\n                    </Dropdown>\r\n                </div>\r\n            </Modal>\r\n            <style>\r\n                {\r\n                    `\r\n                    ._wrap {\r\n                        margin-bottom: 20px;\r\n                    }\r\n                    .ant-input {\r\n                        width: 80%;\r\n                    }\r\n                    input {\r\n                        margin: 20px;\r\n                    }\r\n                    `\r\n                }\r\n            </style>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default connect(mapStateToState, mapDispatchToProps)(TeacherMessage);\r\n"]},"metadata":{},"sourceType":"module"}