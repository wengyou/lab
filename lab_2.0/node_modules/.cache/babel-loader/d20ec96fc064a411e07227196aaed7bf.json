{"ast":null,"code":"import \"antd/es/carousel/style/css\";\nimport _Carousel from \"antd/es/carousel\";\nimport \"antd/es/card/style/css\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/modal/style/css\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/button/style/css\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/table/style/css\";\nimport _Table from \"antd/es/table\";\nimport _toConsumableArray from \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\src\\\\pages\\\\Home.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport \"../static/style/home.scss\";\nimport * as announce from \"../redux/actionCreators/announce\";\nimport \"../redux/sagas/announceSagas/announceSaga\"; //首页的轮播图和公告\n\nvar Home = function Home(props) {\n  var total = props.total,\n      handleFetchAnnounceRes = props.handleFetchAnnounceRes,\n      announceResource = props.announceResource;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      modalContent = _useState2[0],\n      setModalContent = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      modalVisible = _useState4[0],\n      setModalVisible = _useState4[1];\n\n  var handleShowModal = function handleShowModal(data) {\n    setModalVisible(true);\n    setModalContent(data);\n  };\n\n  useEffect(function () {\n    handleFetchAnnounceRes({\n      page: 1,\n      rows: 4\n    });\n  }, []);\n  var columns = [{\n    title: '公告标题',\n    key: 'title',\n    width: '70%',\n    render: function render(data) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        onClick: function onClick() {\n          return handleShowModal(data);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 23\n        }\n      }, data.title));\n    }\n  }, {\n    title: '发布时间',\n    dataIndex: 'addTime',\n    key: 'addTime',\n    color: \"blue\"\n  }];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wrap\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"homeWrap\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"homeLeft\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(_Card, {\n    bordered: false,\n    title: \"实验室公告\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(_Table, {\n    rowKey: function rowKey(e) {\n      return e.id;\n    },\n    dataSource: _toConsumableArray(announceResource),\n    columns: columns,\n    pagination: {\n      total: total,\n      hideOnSinglePage: true,\n      simple: true,\n      pageSize: 4,\n      onChange: function onChange(e) {\n        return handleFetchAnnounceRes({\n          page: e,\n          rows: 4\n        });\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(_Modal, {\n    centered: true,\n    title: modalContent.title,\n    visible: modalVisible,\n    footer: /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      onClick: function onClick() {\n        return setModalVisible(!modalVisible);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 33\n      }\n    }, \"\\u786E\\u5B9A\"),\n    onCancel: function onCancel() {\n      return setModalVisible(!modalVisible);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: modalContent.content\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"0.9375rem\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 29\n    }\n  }, \"\\u9644\\u4EF6:\", modalContent.fileName ? /*#__PURE__*/React.createElement(\"a\", {\n    download: \"\",\n    href: modalContent.url,\n    style: {\n      marginLeft: \"0.6rem\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 41\n    }\n  }, modalContent.fileName) : '无'), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"100%\",\n      display: \"flex\",\n      justifyContent: \"flex-end\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 29\n    }\n  }, \"\\u2014\\u2014 \", modalContent.userName)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"homeRight\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(_Carousel, {\n    autoplay: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"img-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"img-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"img-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"img-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"img-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"img-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  })))));\n};\n\nexport default connect( //允许我们将store中的数据作为props绑定到组件中，只要store发生了变化就会调用，必须返回一个纯对象，这个对象会与组件的 props 合并\nfunction (state) {\n  return {\n    total: state.getIn([\"announce\", \"total\"]),\n    announceResource: state.getIn([\"announce\", \"announceResource\"])\n  };\n}, function (dispatch) {\n  return {\n    handleFetchAnnounceRes: function handleFetchAnnounceRes(page) {\n      dispatch(announce.queryAnnounce(page));\n    }\n  };\n})(Home);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/pages/Home.js"],"names":["React","useEffect","useState","connect","announce","Home","props","total","handleFetchAnnounceRes","announceResource","modalContent","setModalContent","modalVisible","setModalVisible","handleShowModal","data","page","rows","columns","title","key","width","render","dataIndex","color","e","id","hideOnSinglePage","simple","pageSize","onChange","__html","content","marginTop","fileName","url","marginLeft","display","justifyContent","userName","state","getIn","dispatch","queryAnnounce"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {Table, Carousel, Card, Modal, Button} from \"antd\";\r\nimport \"../static/style/home.scss\";\r\nimport * as announce from \"../redux/actionCreators/announce\";\r\nimport \"../redux/sagas/announceSagas/announceSaga\"\r\n\r\n//首页的轮播图和公告\r\nconst Home = props => {\r\n    const {total, handleFetchAnnounceRes, announceResource } = props;\r\n    const [modalContent,setModalContent] = useState({});\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const handleShowModal = data =>{\r\n        setModalVisible(true);\r\n        setModalContent(data);\r\n    };\r\n    useEffect(()=>{\r\n        handleFetchAnnounceRes({ page: 1, rows: 4})\r\n    }, []);\r\n\r\n    const columns = [\r\n        {\r\n            title: '公告标题',\r\n            key: 'title',\r\n            width: '70%',\r\n            render: (data) => (\r\n                <span><a onClick={()=>handleShowModal(data)}>{data.title}</a></span>\r\n            ),\r\n\r\n\r\n        },\r\n        {\r\n            title: '发布时间',\r\n            dataIndex: 'addTime',\r\n            key: 'addTime',\r\n            color: \"blue\"\r\n        }];\r\n    return (\r\n        <div className=\"wrap\">\r\n            <div className = \"homeWrap\">\r\n                <div className = \"homeLeft\">\r\n                    <Card\r\n                        bordered={false}\r\n                        title={\"实验室公告\"}\r\n                    >\r\n                        <Table\r\n                            rowKey={e=>(e.id)}\r\n                            dataSource = {[...announceResource]}\r\n                            columns = {columns}\r\n                            pagination = {{\r\n                                total,\r\n                                hideOnSinglePage: true,\r\n                                simple: true,\r\n                                pageSize: 4,\r\n                                onChange: e => handleFetchAnnounceRes({ page: e, rows: 4 }),\r\n                            }}\r\n                        />\r\n                        <Modal\r\n                            centered={true}\r\n                            title = {modalContent.title}\r\n                            visible={modalVisible}\r\n                            footer={\r\n                                <Button\r\n                                    type = \"primary\"\r\n                                    onClick={()=>(setModalVisible(!modalVisible))}\r\n                                >确定</Button>\r\n                            }\r\n                            onCancel={()=>(setModalVisible(!modalVisible))}\r\n                        >\r\n                            <div dangerouslySetInnerHTML = {{__html: modalContent.content}} />\r\n                            <div style={{marginTop:\"0.9375rem\"}}>附件:\r\n                                {\r\n                                    modalContent.fileName ?\r\n                                        <a\r\n                                            download={\"\"}\r\n                                            href={modalContent.url}\r\n                                            style={{marginLeft:\"0.6rem\"}}\r\n                                        >\r\n                                            {modalContent.fileName}\r\n                                        </a> :\r\n                                        '无'\r\n                                }\r\n                            </div>\r\n                            <div style={{width:\"100%\", display:\"flex\", justifyContent:\"flex-end\"}}>—— {modalContent.userName}</div>\r\n                        </Modal>\r\n                    </Card>\r\n                </div>\r\n                <div className = \"homeRight\">\r\n                    <Carousel autoplay>\r\n                        <div className={\"img-1\"}/>\r\n                        <div className={\"img-2\"}/>\r\n                        <div className={\"img-3\"}/>\r\n                        <div className={\"img-4\"}/>\r\n                        <div className={\"img-5\"}/>\r\n                        <div className={\"img-6\"}/>\r\n                    </Carousel>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default connect(\r\n    //允许我们将store中的数据作为props绑定到组件中，只要store发生了变化就会调用，必须返回一个纯对象，这个对象会与组件的 props 合并\r\n    state => ({\r\n        total: state.getIn([\"announce\", \"total\"]),\r\n        announceResource: state.getIn([\"announce\", \"announceResource\"])\r\n\r\n    }),\r\n    dispatch => ({\r\n        handleFetchAnnounceRes(page) {\r\n            dispatch(announce.queryAnnounce(page))\r\n        }\r\n    })\r\n)(Home);\r\n"]},"metadata":{},"sourceType":"module"}