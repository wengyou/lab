{"ast":null,"code":"import\"antd/es/table/style/css\";import _Table from\"antd/es/table\";import _toConsumableArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import\"../static/style/learningDatas.scss\";import SearchInput from\"../components/Search\";import{withRouter}from\"react-router-dom\";import*as resource from\"../redux/actionCreators/resource\";var Software=function Software(props){var page=props.page,searchFlag=props.searchFlag,handleSearchValue=props.handleSearchValue,resourceName=props.resourceName,userName=props.userName,type=props.type,total=props.total,softwareResource=props.softwareResource,handleFetchSoftwareRes=props.handleFetchSoftwareRes,handleDownloadSoftware=props.handleDownloadSoftware,softwareDataTemp=props.softwareDataTemp,history=props.history;useEffect(function(){handleFetchSoftwareRes({page:1,type:\"software\",resourceName:null,userName:null});},[softwareDataTemp]);var columns=[{title:'软件名称',dataIndex:'title',key:'title'},{title:'大小',dataIndex:'size',align:'center',key:'size'},{title:'上传人',dataIndex:'userName',align:'center',key:'userName'},{title:'上传时间',key:'addTime',align:'center',dataIndex:'addTime'},{title:'下载次数',key:'num',align:'center',dataIndex:'downloadNum'},{title:'软件下载',key:'url',align:'center',dataIndex:'url',render:function render(text,record){return/*#__PURE__*/React.createElement(\"a\",{download:record.title,href:{text:text}.text,onClick:function onClick(){handleDownloadSoftware({id:record.id,type:\"software\"});}},\"\\u4E0B\\u8F7D\");}}];var _useState=useState(1),_useState2=_slicedToArray(_useState,2),current=_useState2[0],setCurrent=_useState2[1];useEffect(function(){setCurrent(page);},[page]);// console.log(history)\n// useEffect(() => {\n// }, [history])\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"dataWrapper\"},/*#__PURE__*/React.createElement(SearchInput,{data:type}),/*#__PURE__*/React.createElement(_Table,{rowKey:function rowKey(e){return e.id;},columns:columns,dataSource:_toConsumableArray(softwareResource),size:'small',pagination:{total:total,pageSize:10,current:current,onChange:function onChange(e){!searchFlag?handleFetchSoftwareRes({page:e,type:\"software\",resourceName:null,userName:null}):handleSearchValue({page:e,type:type,resourceName:resourceName,userName:userName});}}}));};export default withRouter(connect(function(state){return{total:state.getIn([\"resource\",\"resource\",\"allSoftwareTotal\"]),softwareResource:state.getIn([\"resource\",\"resource\",\"softwareResource\"]),resourceName:state.getIn([\"resource\",\"resource\",\"resourceName\"]),type:state.getIn([\"resource\",\"resource\",\"type\"]),userName:state.getIn([\"resource\",\"resource\",\"userName\"]),searchFlag:state.getIn([\"resource\",\"resource\",\"searchFlag\"]),searchResource:state.getIn([\"resource\",\"searchRes\",\"searchResource\"]),page:state.getIn([\"resource\",\"resource\",\"page\"]),softwareDataTemp:state.getIn([\"resource\",\"resource\",\"softwareDataTemp\"])};},function(dispatch){return{handleFetchSoftwareRes:function handleFetchSoftwareRes(args){dispatch(resource.fetchSoftwareResource(args));},handleSearchValue:function handleSearchValue(args){dispatch(resource.fetchSearchValue(args));},handleDownloadSoftware:function handleDownloadSoftware(args){dispatch(resource.downloadSoftware(args));}};})(Software));","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/pages/Software.js"],"names":["React","useEffect","useState","connect","SearchInput","withRouter","resource","Software","props","page","searchFlag","handleSearchValue","resourceName","userName","type","total","softwareResource","handleFetchSoftwareRes","handleDownloadSoftware","softwareDataTemp","history","columns","title","dataIndex","key","align","render","text","record","id","current","setCurrent","e","pageSize","onChange","state","getIn","searchResource","dispatch","args","fetchSoftwareResource","fetchSearchValue","downloadSoftware"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"../static/style/learningDatas.scss\";\r\nimport SearchInput from \"../components/Search\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport { Table } from 'antd';\r\nimport * as resource from \"../redux/actionCreators/resource\";\r\n\r\nconst Software = props => {\r\n    const {\r\n        page,\r\n        searchFlag,\r\n        handleSearchValue,\r\n        resourceName,\r\n        userName,\r\n        type,\r\n        total,\r\n        softwareResource,\r\n        handleFetchSoftwareRes,\r\n        handleDownloadSoftware,\r\n        softwareDataTemp,\r\n        history\r\n    } = props;\r\n    useEffect(() => {\r\n        handleFetchSoftwareRes({page: 1, type: \"software\", resourceName: null, userName: null});\r\n    },[softwareDataTemp]);\r\n    const columns = [\r\n        {\r\n            title: '软件名称',\r\n            dataIndex: 'title',\r\n            key: 'title',\r\n        },\r\n        {\r\n            title: '大小',\r\n            dataIndex: 'size',\r\n            align: 'center',\r\n            key: 'size',\r\n        },\r\n        {\r\n            title: '上传人',\r\n            dataIndex: 'userName',\r\n            align: 'center',\r\n            key: 'userName',\r\n        },\r\n        {\r\n            title: '上传时间',\r\n            key: 'addTime',\r\n            align: 'center',\r\n            dataIndex: 'addTime',\r\n        },\r\n        {\r\n            title: '下载次数',\r\n            key: 'num',\r\n            align: 'center',\r\n            dataIndex: 'downloadNum',\r\n        },\r\n        {\r\n            title: '软件下载',\r\n            key: 'url',\r\n            align: 'center',\r\n            dataIndex: 'url',\r\n            render: (text, record) => (\r\n                <a\r\n                    download={record.title}\r\n                    href={{text}.text}\r\n                    onClick={\r\n                        () => {\r\n                            handleDownloadSoftware({\r\n                                id: record.id,\r\n                                type: \"software\"\r\n                            })\r\n                        }\r\n                    }\r\n                >\r\n                    下载\r\n                </a>\r\n            )\r\n        },\r\n    ];\r\n    const [current, setCurrent] = useState(1);\r\n    useEffect(()=>{\r\n        setCurrent(page);\r\n    },[page]);\r\n    // console.log(history)\r\n    // useEffect(() => {\r\n\r\n    // }, [history])\r\n    return(\r\n        <div className=\"dataWrapper\">\r\n            <SearchInput data={type}/>\r\n            <Table\r\n                rowKey={e => (e.id)}\r\n                columns={columns}\r\n                dataSource={[...softwareResource]}\r\n                size={'small'}\r\n                pagination={{\r\n                    total,\r\n                    pageSize: 10,\r\n                    current,\r\n                    onChange: e => {\r\n                        !searchFlag ?\r\n                            handleFetchSoftwareRes({\r\n                                page: e,\r\n                                type: \"software\",\r\n                                resourceName: null,\r\n                                userName: null\r\n\r\n                            })\r\n                            :\r\n                            handleSearchValue({\r\n                                page: e,\r\n                                type,\r\n                                resourceName,\r\n                                userName\r\n                            })\r\n                    }\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default withRouter(connect(\r\n    state => ({\r\n        total: state.getIn([\"resource\",\"resource\",\"allSoftwareTotal\"]),\r\n        softwareResource: state.getIn([\"resource\",\"resource\",\"softwareResource\"]),\r\n        resourceName: state.getIn([\"resource\",\"resource\",\"resourceName\"]),\r\n        type: state.getIn([\"resource\",\"resource\",\"type\"]),\r\n        userName: state.getIn([\"resource\",\"resource\",\"userName\"]),\r\n        searchFlag: state.getIn([\"resource\",\"resource\",\"searchFlag\"]),\r\n        searchResource: state.getIn([\"resource\", \"searchRes\", \"searchResource\"]),\r\n        page: state.getIn([\"resource\", \"resource\", \"page\"]),\r\n        softwareDataTemp: state.getIn([\"resource\", \"resource\", \"softwareDataTemp\"])\r\n    }),\r\n    dispatch => ({\r\n        handleFetchSoftwareRes(args) {\r\n            dispatch(resource.fetchSoftwareResource(args));\r\n        },\r\n        handleSearchValue(args){\r\n            dispatch(resource.fetchSearchValue(args));\r\n        },\r\n        handleDownloadSoftware(args) {\r\n            dispatch(resource.downloadSoftware(args));\r\n        }\r\n    })\r\n)(Software));\r\n"]},"metadata":{},"sourceType":"module"}