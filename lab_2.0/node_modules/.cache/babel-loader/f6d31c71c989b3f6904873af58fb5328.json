{"ast":null,"code":"import \"antd/es/table/style/css\";\nimport _Table from \"antd/es/table\";\nimport _slicedToArray from \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\src\\\\pages\\\\LearningData.js\";\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport \"../static/style/learningDatas.scss\";\nimport SearchInput from \"../components/Search\";\nimport * as resource from \"../redux/actionCreators/resource\";\nimport { isRecord } from \"immutable\";\n\nvar LearningData = function LearningData(props) {\n  var resourceName = props.resourceName,\n      userName = props.userName,\n      type = props.type,\n      total = props.total,\n      studyResource = props.studyResource,\n      handleFetchStudyRes = props.handleFetchStudyRes,\n      handleSearchValue = props.handleSearchValue,\n      handleDownload = props.handleDownload,\n      searchFlag = props.searchFlag,\n      page = props.page,\n      learningDataTemp = props.learningDataTemp,\n      time = props.time;\n  useEffect(function () {\n    handleFetchStudyRes({\n      page: 1,\n      type: \"material\",\n      resourceName: null,\n      userName: null\n    });\n  }, [learningDataTemp, time]);\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      current = _useState2[0],\n      setCurrent = _useState2[1];\n\n  useEffect(function () {\n    setCurrent(page);\n  }, [page]);\n  var columns = [{\n    title: '资料名称',\n    dataIndex: 'title',\n    key: 'title'\n  }, {\n    title: '大小',\n    dataIndex: 'size',\n    key: 'size'\n  }, {\n    title: '上传人',\n    dataIndex: 'userName',\n    key: 'userName'\n  }, {\n    title: '上传时间',\n    key: 'addTime',\n    dataIndex: 'addTime'\n  }, {\n    title: '下载次数',\n    key: 'num',\n    dataIndex: 'downloadNum'\n  }, {\n    title: '下载资料',\n    key: 'url',\n    dataIndex: 'url',\n    render: function render(text, record) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        download: record.title,\n        href: {\n          text: text\n        }.text,\n        onClick: function onClick() {\n          handleDownload({\n            id: record.id,\n            type: \"material\"\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }\n      }, \"\\u4E0B\\u8F7D\");\n    }\n  }];\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dataWrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(SearchInput, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 16\n    }\n  }), /*#__PURE__*/React.createElement(_Table, {\n    tableLayout: \"fixed\",\n    rowKey: function rowKey(record) {\n      return record.id;\n    },\n    columns: columns,\n    dataSource: studyResource,\n    pagination: {\n      total: total,\n      pageSize: 10,\n      current: current,\n      onChange: function onChange(e) {\n        !searchFlag ? handleFetchStudyRes({\n          page: e,\n          type: \"material\",\n          resourceName: null,\n          userName: null\n        }) : handleSearchValue({\n          page: e,\n          type: type,\n          resourceName: resourceName,\n          userName: userName\n        });\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 16\n    }\n  })), /*#__PURE__*/React.createElement(\"style\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 12\n    }\n  }, \"\\n                        .ant-table-content {\\n                            border: 1px dashed #efefef !important;\\n                        }\\n                   \"));\n};\n\nexport default connect(function (state) {\n  return {\n    resourceName: state.getIn([\"resource\", \"resource\", \"resourceName\"]),\n    type: state.getIn([\"resource\", \"resource\", \"type\"]),\n    userName: state.getIn([\"resource\", \"resource\", \"userName\"]),\n    total: state.getIn([\"resource\", \"resource\", \"allLearningTotal\"]),\n    searchFlag: state.getIn([\"resource\", \"resource\", \"searchFlag\"]),\n    studyResource: state.getIn([\"resource\", \"resource\", \"studyResource\"]),\n    learningUrl: state.getIn([\"resource\", \"resource\", \"learningUrl\"]),\n    searchResource: state.getIn([\"resource\", \"searchRes\", \"searchResource\"]),\n    page: state.getIn([\"resource\", \"resource\", \"page\"]),\n    learningDataTemp: state.getIn([\"resource\", \"resource\", \"learningDataTemp\"]),\n    time: state.getIn([\"resource\", \"resource\", \"time\"])\n  };\n}, function (dispatch) {\n  return {\n    handleFetchStudyRes: function handleFetchStudyRes(args) {\n      dispatch(resource.fetchStudyResource(args));\n    },\n    loadResource: function loadResource(args) {\n      dispatch(resource.fetchLoadResource(args));\n    },\n    handleSearchValue: function handleSearchValue(args) {\n      dispatch(resource.fetchSearchValue(args));\n    },\n    handleDownload: function handleDownload(args) {\n      dispatch(resource.downloadResource(args));\n    }\n  };\n})(LearningData);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/pages/LearningData.js"],"names":["React","useEffect","useRef","useState","connect","SearchInput","resource","isRecord","LearningData","props","resourceName","userName","type","total","studyResource","handleFetchStudyRes","handleSearchValue","handleDownload","searchFlag","page","learningDataTemp","time","current","setCurrent","columns","title","dataIndex","key","render","text","record","id","pageSize","onChange","e","state","getIn","learningUrl","searchResource","dispatch","args","fetchStudyResource","loadResource","fetchLoadResource","fetchSearchValue","downloadResource"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"../static/style/learningDatas.scss\";\r\nimport SearchInput from \"../components/Search\";\r\nimport { Table } from 'antd';\r\nimport * as resource from \"../redux/actionCreators/resource\";\r\nimport {isRecord} from \"immutable\";\r\n\r\nconst LearningData = props => {\r\n    const {\r\n        resourceName,\r\n        userName,\r\n        type,\r\n        total,\r\n        studyResource,\r\n        handleFetchStudyRes,\r\n        handleSearchValue,\r\n        handleDownload,\r\n        searchFlag,\r\n        page,\r\n        learningDataTemp,\r\n        time,\r\n    } = props;\r\n    useEffect(() => {\r\n        handleFetchStudyRes({page: 1, type: \"material\", resourceName: null, userName: null})\r\n    },[learningDataTemp, time]);\r\n\r\n    const [current, setCurrent] = useState(1);\r\n    useEffect(()=>{\r\n        setCurrent(page);\r\n    },[page]);\r\n\r\n\r\n    const columns = [\r\n        {\r\n            title: '资料名称',\r\n            dataIndex: 'title',\r\n            key: 'title',\r\n        },\r\n        {\r\n            title: '大小',\r\n            dataIndex: 'size',\r\n            key: 'size',\r\n        },\r\n        {\r\n            title: '上传人',\r\n            dataIndex: 'userName',\r\n            key: 'userName',\r\n        },\r\n        {\r\n            title: '上传时间',\r\n            key: 'addTime',\r\n            dataIndex: 'addTime',\r\n        },\r\n        {\r\n            title: '下载次数',\r\n            key: 'num',\r\n            dataIndex: 'downloadNum',\r\n        },\r\n        {\r\n            title: '下载资料',\r\n            key: 'url',\r\n            dataIndex: 'url',\r\n            render: (text, record) => (\r\n                <a\r\n                    download={record.title}\r\n                    href={{text}.text}\r\n                    onClick={\r\n                        () => {\r\n                            handleDownload({\r\n                                id: record.id,\r\n                                type: \"material\"\r\n                            })\r\n                        }\r\n                    }\r\n                >\r\n                    下载\r\n                </a>\r\n            )\r\n        },\r\n    ];\r\n    return(\r\n       <>\r\n           <div className=\"dataWrapper\">\r\n               <SearchInput/>\r\n               <Table\r\n                   tableLayout={\"fixed\"}\r\n                   rowKey={record => record.id}\r\n                   columns={columns}\r\n                   dataSource={studyResource}\r\n                   pagination={{\r\n                       total,\r\n                       pageSize: 10,\r\n                       current,\r\n                       onChange: e => {\r\n                           !searchFlag ?\r\n                               handleFetchStudyRes({\r\n                                   page: e,\r\n                                   type: \"material\",\r\n                                   resourceName: null,\r\n                                   userName: null\r\n                               })\r\n                               :\r\n                               handleSearchValue({\r\n                                   page: e,\r\n                                   type,\r\n                                   resourceName,\r\n                                   userName\r\n                               });\r\n                       }\r\n                   }}\r\n               />\r\n           </div>\r\n           <style>\r\n               {\r\n                   `\r\n                        .ant-table-content {\r\n                            border: 1px dashed #efefef !important;\r\n                        }\r\n                   `\r\n               }\r\n           </style>\r\n       </>\r\n    )\r\n};\r\n\r\nexport default connect(\r\n    state => ({\r\n        resourceName: state.getIn([\"resource\",\"resource\",\"resourceName\"]),\r\n        type: state.getIn([\"resource\",\"resource\",\"type\"]),\r\n        userName: state.getIn([\"resource\",\"resource\",\"userName\"]),\r\n        total: state.getIn([\"resource\",\"resource\",\"allLearningTotal\"]),\r\n        searchFlag: state.getIn([\"resource\",\"resource\",\"searchFlag\"]),\r\n        studyResource: state.getIn([\"resource\",\"resource\",\"studyResource\"]),\r\n        learningUrl: state.getIn([\"resource\",\"resource\",\"learningUrl\"]),\r\n        searchResource: state.getIn([\"resource\", \"searchRes\", \"searchResource\"]),\r\n        page: state.getIn([\"resource\", \"resource\", \"page\"]),\r\n        learningDataTemp: state.getIn([\"resource\", \"resource\", \"learningDataTemp\"]),\r\n        time: state.getIn([\"resource\", \"resource\",\"time\"]),\r\n    }),\r\n    dispatch => ({\r\n        handleFetchStudyRes(args) {\r\n            dispatch(resource.fetchStudyResource(args));\r\n        },\r\n        loadResource(args) {\r\n            dispatch(resource.fetchLoadResource(args));\r\n        },\r\n        handleSearchValue(args){\r\n            dispatch(resource.fetchSearchValue(args));\r\n        },\r\n        handleDownload(args) {\r\n            dispatch(resource.downloadResource(args));\r\n        }\r\n    })\r\n)(LearningData);\r\n"]},"metadata":{},"sourceType":"module"}