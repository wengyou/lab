{"ast":null,"code":"import \"antd/es/modal/style/css\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/table/style/css\";\nimport _Table from \"antd/es/table\";\nimport _objectSpread from \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport \"antd/es/select/style/css\";\nimport _Select from \"antd/es/select\";\nimport \"antd/es/input/style/css\";\nimport _Input from \"antd/es/input\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\src\\\\components\\\\addStudents.jsx\";\n\nimport React, { useState } from \"react\";\nimport { connect } from 'react-redux';\nimport { teacherAddStudent } from '../redux/actionCreators/resource';\nimport * as resource from \"../redux/actionCreators/resource\";\nvar Search = _Input.Search;\nvar Option = _Select.Option;\n\nvar AddStudents = function AddStudents(props) {\n  var _useState = useState({\n    type: 'userId',\n    page: 1,\n    input: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchInfo = _useState2[0],\n      setSearchInfo = _useState2[1];\n\n  var studentMessage = props.studentMessage,\n      total = props.total,\n      teacherCourseId = props.teacherCourseId,\n      visibleCallback = props.visibleCallback,\n      addStudentVisible = props.addStudentVisible,\n      handleTeacherAddStudent = props.handleTeacherAddStudent,\n      handleSearchStudent = props.handleSearchStudent; //改变option\n\n  var handleSelect = function handleSelect(value) {\n    setSearchInfo(_objectSpread(_objectSpread({}, searchInfo), {}, {\n      type: value\n    }));\n  }; //翻页\n\n\n  var changePage = function changePage(page) {\n    setSearchInfo(_objectSpread(_objectSpread({}, searchInfo), {}, {\n      page: page\n    }));\n    handleSearchStudent({\n      page: page,\n      type: \"student\",\n      userId: searchInfo.type === 'userId' ? searchInfo.input : '',\n      userName: searchInfo.type === 'userName' ? searchInfo.input : ''\n    });\n  }; //查询学生信息\n\n\n  var search = function search(value) {\n    setSearchInfo(_objectSpread(_objectSpread({}, searchInfo), {}, {\n      input: value\n    }));\n    handleSearchStudent({\n      page: 1,\n      type: \"student\",\n      userId: searchInfo.type === 'userId' ? value : '',\n      userName: searchInfo.type === 'userName' ? value : ''\n    });\n  }; //教师为学生添加课程\n\n\n  var addCourse = function addCourse(e) {\n    handleTeacherAddStudent({\n      userId: e.userId,\n      teacherCourseId: teacherCourseId\n    });\n  };\n\n  var columns = [{\n    title: \"学生姓名\",\n    align: 'center',\n    dataIndex: \"userName\",\n    key: \"userName\"\n  }, {\n    title: \"学生学号\",\n    align: 'center',\n    dataIndex: \"userId\",\n    key: \"userId\"\n  }, {\n    title: \"操作\",\n    key: \"operate\",\n    align: 'center',\n    render: function render(e) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        onClick: function onClick() {\n          return addCourse(e);\n        },\n        style: {\n          color: 'rgb(24, 144, 255)',\n          cursor: \"pointer\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }\n      }, \"\\u6DFB\\u52A0\");\n    }\n  }];\n  var mockData = [];\n\n  for (var i = 0; i < 70; i++) {\n    mockData.push({\n      userName: 'a' + i,\n      userId: i\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(_Modal, {\n    visible: addStudentVisible,\n    onCancel: function onCancel() {\n      return visibleCallback(false);\n    },\n    footer: null,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '17rem'\n    },\n    className: \"flex margin_column_xs\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Select, {\n    defaultValue: \"userId\",\n    onChange: handleSelect,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Option, {\n    value: \"userId\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, \"\\u5B66\\u53F7\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"userName\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, \"\\u59D3\\u540D\")), /*#__PURE__*/React.createElement(Search, {\n    onSearch: search,\n    enterButton: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(_Table, {\n    dataSource: studentMessage,\n    columns: columns,\n    pagination: {\n      current: searchInfo.page,\n      total: total,\n      onChange: changePage\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default connect(function (state) {\n  return {\n    studentMessage: state.getIn([\"resource\", \"resource\", \"studentMessage\"]),\n    total: state.getIn([\"resource\", \"resource\", \"studentTotal\"]),\n    userId: state.getIn([\"resource\", \"resource\", \"studentId\"]),\n    userName: state.getIn([\"resource\", \"resource\", \"studentName\"]),\n    page: state.getIn([\"resource\", \"resource\", \"page\"])\n  };\n}, function (dispatch) {\n  return {\n    handleTeacherAddStudent: function handleTeacherAddStudent(args) {\n      dispatch(teacherAddStudent(args));\n    },\n    handleSearchStudent: function handleSearchStudent(args) {\n      dispatch(resource.fetchStudentMes(args));\n    }\n  };\n})(AddStudents);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/components/addStudents.jsx"],"names":["React","useState","connect","teacherAddStudent","resource","Search","Option","AddStudents","props","type","page","input","searchInfo","setSearchInfo","studentMessage","total","teacherCourseId","visibleCallback","addStudentVisible","handleTeacherAddStudent","handleSearchStudent","handleSelect","value","changePage","userId","userName","search","addCourse","e","columns","title","align","dataIndex","key","render","color","cursor","mockData","i","push","width","current","onChange","state","getIn","dispatch","args","fetchStudentMes"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { connect } from 'react-redux';\nimport {Modal, Input, Select, Table} from \"antd\";\nimport { teacherAddStudent } from '../redux/actionCreators/resource';\nimport * as resource from \"../redux/actionCreators/resource\";\n\nconst { Search } = Input;\nconst { Option } = Select;\n\nconst AddStudents = (props) => {\n    const [searchInfo, setSearchInfo] = useState({type: 'userId', page: 1, input: ''})\n\n    const {\n        studentMessage,\n        total,\n        teacherCourseId,\n        visibleCallback,\n        addStudentVisible,\n        handleTeacherAddStudent,\n        handleSearchStudent\n    } = props;\n    //改变option\n    const handleSelect = (value) => {\n        setSearchInfo({\n            ...searchInfo,\n            type: value\n        })\n    }\n    //翻页\n    const changePage = (page) => {\n        setSearchInfo({\n            ...searchInfo,\n            page: page\n        });\n        handleSearchStudent({\n            page: page,\n            type: \"student\",\n            userId: searchInfo.type === 'userId' ? searchInfo.input : '',\n            userName: searchInfo.type === 'userName' ? searchInfo.input : ''\n        })\n\n    }\n    //查询学生信息\n    const search = (value) => {\n        setSearchInfo({\n            ...searchInfo,\n            input: value\n        })\n        handleSearchStudent({\n                    page: 1,\n                    type: \"student\",\n                    userId: searchInfo.type === 'userId' ? value : '',\n                    userName: searchInfo.type === 'userName' ? value : ''\n                })\n    };\n\n    //教师为学生添加课程\n    const addCourse = (e) => {\n        handleTeacherAddStudent(\n            {\n                userId: e.userId,\n                teacherCourseId: teacherCourseId\n            }\n        )\n    }\n\n    const columns = [\n        { title: \"学生姓名\", align: 'center', dataIndex: \"userName\", key: \"userName\" },\n        { title: \"学生学号\", align: 'center', dataIndex: \"userId\", key: \"userId\" },\n        {\n            title: \"操作\",\n            key: \"operate\",\n            align: 'center',\n            render: (e)=> (\n                <span\n                    onClick={()=>(addCourse(e))}\n                    style={{color: 'rgb(24, 144, 255)' ,cursor: \"pointer\",}}\n                >\n                    添加\n                </span>\n            )\n        }\n    ]\n\n    let  mockData = [];\n    for(let i = 0; i < 70; i++){\n        mockData.push({\n            userName : 'a' + i,\n            userId: i\n        })\n    }\n\n\n    return (\n        <Modal\n            visible={addStudentVisible}\n            onCancel={() => (visibleCallback(false))}\n            footer={null}\n        >\n            <div style={{width: '17rem'}} className='flex margin_column_xs'>\n                <Select\n                    defaultValue='userId'\n                    onChange={handleSelect}\n                >\n                    <Option value='userId'>学号</Option>\n                    <Option value='userName'>姓名</Option>\n                </Select>\n                <Search\n                    onSearch={search}\n                    enterButton\n                />\n            </div>\n            <Table\n                dataSource={studentMessage}\n                columns={columns}\n                pagination={{\n                    current: searchInfo.page,\n                    total,\n                    onChange: changePage\n                }}\n            />\n        </Modal>\n    )\n};\n\nexport default connect(\n    state => ({\n        studentMessage: state.getIn([\"resource\", \"resource\", \"studentMessage\"]),\n        total: state.getIn([\"resource\", \"resource\", \"studentTotal\"]),\n        userId: state.getIn([\"resource\", \"resource\", \"studentId\"]),\n        userName: state.getIn([\"resource\", \"resource\", \"studentName\"]),\n        page: state.getIn([\"resource\", \"resource\", \"page\"]),\n\n    }),\n    dispatch => ({\n        handleTeacherAddStudent(args){\n            dispatch(teacherAddStudent(args))\n        },\n        handleSearchStudent(args){\n            dispatch(resource.fetchStudentMes(args))\n        }\n    })\n)(AddStudents)\n"]},"metadata":{},"sourceType":"module"}