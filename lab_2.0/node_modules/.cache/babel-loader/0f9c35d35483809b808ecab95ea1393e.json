{"ast":null,"code":"import _slicedToArray from \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport \"antd/es/table/style/css\";\nimport _Table from \"antd/es/table\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\src\\\\components\\\\AllTasks.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as course from \"../redux/actionCreators/resource\";\nimport SearchCourse from \"./SearchCourse\"; //老师显示上机任务的第三个\n\nvar AllTasks = function AllTasks(props) {\n  var taskTotal = props.taskTotal,\n      type = props.type,\n      userIdentify = props.userIdentify,\n      userId = props.userId,\n      courseResource = props.courseResource,\n      courseTask = props.courseTask,\n      handleFetchTaskRes = props.handleFetchTaskRes,\n      handleFetchCourseRes = props.handleFetchCourseRes,\n      handleStudentAddCourse = props.handleStudentAddCourse,\n      updateCourseFlag = props.updateCourseFlag,\n      page = props.page;\n  useEffect(function () {\n    handleFetchCourseRes({\n      page: 1,\n      userId: userId\n    });\n  }, [updateCourseFlag]); //点击那个加号展开实验任务详情\n\n  var _expandedRowRender = function expandedRowRender(record) {\n    var columns = [{\n      title: '实验任务',\n      dataIndex: 'taskName',\n      key: 'taskName'\n    }, {\n      title: '任务附件',\n      dataIndex: 'taskFileName',\n      key: 'taskFileName'\n    }, {\n      title: '发布时间',\n      dataIndex: 'addTime',\n      key: 'addTime'\n    }];\n    var el = /*#__PURE__*/React.createElement(_Table, {\n      rowKey: function rowKey(record) {\n        return record.id;\n      },\n      columns: columns,\n      dataSource: courseTask[record.teacherCourseId],\n      pagination: false,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 13\n      }\n    });\n    return el;\n  };\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      current = _useState2[0],\n      setCurrent = _useState2[1];\n\n  useEffect(function () {\n    setCurrent(page);\n  }, [page]);\n  var columns = [{\n    title: '实验课程',\n    dataIndex: 'courseName',\n    key: 'courseName'\n  }, {\n    title: '教学班编号',\n    dataIndex: 'teacherCourseId',\n    key: 'teacherCourseId'\n  }, {\n    title: '教学班备注',\n    dataIndex: 'remark',\n    key: 'remark'\n  }, {\n    title: '课程编号',\n    dataIndex: 'courseNumber',\n    key: 'courseNumber'\n  }, {\n    title: '课程教师',\n    dataIndex: 'teacherName',\n    key: 'teacherName'\n  }, {\n    title: '发布时间',\n    dataIndex: 'addTime',\n    key: 'addTime'\n  }, userIdentify === \"学生\" ? {\n    title: '实验处理',\n    key: 'handleTask',\n    render: function render(e) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        onClick: function onClick() {\n          return handleStudentAddCourse({\n            teacherCourseId: e.teacherCourseId,\n            userId: userId,\n            type: type\n          });\n        },\n        style: {\n          color: \"#189EFF\",\n          cursor: \"pointer\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 25\n        }\n      }, userIdentify === \"学生\" ? e.added ? \"已添加\" : \"添加课程\" : null);\n    }\n  } : {}];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"taskWrap\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SearchCourse, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(_Table, {\n    rowKey: function rowKey(record) {\n      return record.teacherCourseId;\n    },\n    size: 'small',\n    columns: columns,\n    expandedRowRender: function expandedRowRender(record) {\n      return _expandedRowRender(record);\n    },\n    onExpand: function onExpand(expanded, record) {\n      expanded && handleFetchTaskRes({\n        teacherCourseId: record.teacherCourseId,\n        courseTask: courseTask\n      });\n    },\n    dataSource: courseResource,\n    pagination: {\n      current: current,\n      pageSize: 10,\n      total: taskTotal,\n      onChange: function onChange(e) {\n        return handleFetchCourseRes({\n          page: e,\n          userId: userId\n        });\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default connect(function (state) {\n  return {\n    taskTotal: state.getIn([\"course\", \"taskTotal\"]),\n    courseResource: state.getIn([\"course\", \"courseResource\"]),\n    courseTask: state.getIn([\"course\", \"courseTask\"]),\n    userIdentify: state.getIn([\"userMana\", \"common\", \"userIdentify\"]),\n    userId: state.getIn([\"userMana\", \"common\", \"userId\"]),\n    type: state.getIn([\"userMana\", \"common\", \"type\"]),\n    addCourse_S: state.getIn([\"course\", \"addCourse_S\"]),\n    page: state.getIn([\"course\", \"page\"]),\n    updateCourseFlag: state.getIn([\"course\", \"updateCourseFlag\"])\n  };\n}, function (dispatch) {\n  return {\n    handleFetchCourseRes: function handleFetchCourseRes(args) {\n      dispatch(course.fetchCourse(args));\n    },\n    handleFetchTaskRes: function handleFetchTaskRes(teacherCourseId, courseTask) {\n      dispatch(course.fetchCourseTask(teacherCourseId, courseTask));\n    },\n    handleStudentAddCourse: function handleStudentAddCourse(args) {\n      dispatch(course.studentAddCourse(args));\n    }\n  };\n})(AllTasks);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/components/AllTasks.js"],"names":["React","useEffect","useState","connect","course","SearchCourse","AllTasks","props","taskTotal","type","userIdentify","userId","courseResource","courseTask","handleFetchTaskRes","handleFetchCourseRes","handleStudentAddCourse","updateCourseFlag","page","expandedRowRender","record","columns","title","dataIndex","key","el","id","teacherCourseId","current","setCurrent","render","e","color","cursor","added","expanded","pageSize","total","onChange","state","getIn","addCourse_S","dispatch","args","fetchCourse","fetchCourseTask","studentAddCourse"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Table } from \"antd\";\r\nimport * as course from \"../redux/actionCreators/resource\";\r\nimport SearchCourse from \"./SearchCourse\";\r\n//老师显示上机任务的第三个\r\nconst AllTasks = props => {\r\n    const {\r\n        taskTotal,\r\n        type,\r\n        userIdentify,\r\n        userId,\r\n        courseResource,\r\n        courseTask,\r\n        handleFetchTaskRes,\r\n        handleFetchCourseRes,\r\n        handleStudentAddCourse,\r\n        updateCourseFlag,\r\n        page,\r\n    } = props;\r\n    useEffect(()=>{\r\n        handleFetchCourseRes({page: 1, userId: userId});\r\n    },[updateCourseFlag]);\r\n//点击那个加号展开实验任务详情\r\n    const expandedRowRender = record => {\r\n        const columns = [\r\n            { title: '实验任务', dataIndex: 'taskName', key: 'taskName' },\r\n            { title: '任务附件', dataIndex: 'taskFileName', key: 'taskFileName' },\r\n            { title: '发布时间', dataIndex: 'addTime', key: 'addTime' }\r\n        ];\r\n        const el = (\r\n            <Table\r\n                rowKey={record => (record.id)}\r\n                columns={columns}\r\n                dataSource={courseTask[record.teacherCourseId]}\r\n                pagination={false}\r\n            />\r\n        );\r\n        return el;\r\n    };\r\n    const [ current, setCurrent ] = useState(1);\r\n    useEffect(() => {\r\n        setCurrent(page);\r\n    },[page]);\r\n    const columns = [\r\n            { title: '实验课程', dataIndex: 'courseName', key: 'courseName' },\r\n            { title: '教学班编号', dataIndex: 'teacherCourseId', key: 'teacherCourseId' },\r\n            { title: '教学班备注', dataIndex: 'remark', key: 'remark' },\r\n            { title: '课程编号', dataIndex: 'courseNumber', key: 'courseNumber' },\r\n            { title: '课程教师', dataIndex: 'teacherName', key: 'teacherName' },\r\n            { title: '发布时间', dataIndex: 'addTime', key: 'addTime' },\r\n            userIdentify === \"学生\"\r\n                ?\r\n                {\r\n                    title: '实验处理',\r\n                    key: 'handleTask',\r\n                    render: (e) => (\r\n                        <span\r\n                            onClick={() =>(\r\n                                    handleStudentAddCourse({\r\n                                        teacherCourseId: e.teacherCourseId,\r\n                                        userId: userId,\r\n                                        type: type\r\n                                    })\r\n                            )}\r\n                            style={{color: \"#189EFF\", cursor: \"pointer\"}}\r\n                        >\r\n                        {\r\n                            userIdentify === \"学生\" ?\r\n                                e.added ? \"已添加\" : \"添加课程\"\r\n                                :\r\n                                null\r\n                        }\r\n                    </span>\r\n                    )\r\n                } : {}\r\n        ];\r\n\r\n    return (\r\n        <div id=\"taskWrap\">\r\n            <SearchCourse/>\r\n            <Table\r\n                rowKey={record => record.teacherCourseId}\r\n                size={'small'}\r\n                columns={columns}\r\n                expandedRowRender={(record)=>(expandedRowRender(record))}\r\n                onExpand = {\r\n                    (expanded,record)=>{\r\n                        expanded && handleFetchTaskRes({teacherCourseId: record.teacherCourseId, courseTask});\r\n                    }\r\n                }\r\n                dataSource={courseResource}\r\n                pagination={{\r\n                    current,\r\n                    pageSize: 10,\r\n                    total: taskTotal,\r\n                    onChange: e => handleFetchCourseRes({ page: e, userId: userId }),\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n};\r\nexport default connect(\r\n    state => ({\r\n        taskTotal: state.getIn([\"course\", \"taskTotal\"]),\r\n        courseResource: state.getIn([\"course\", \"courseResource\"]),\r\n        courseTask: state.getIn([\"course\", \"courseTask\"]),\r\n        userIdentify: state.getIn([\"userMana\", \"common\", \"userIdentify\"]),\r\n        userId: state.getIn([\"userMana\", \"common\", \"userId\"]),\r\n        type: state.getIn([\"userMana\", \"common\", \"type\"]),\r\n        addCourse_S : state.getIn(([\"course\", \"addCourse_S\"])),\r\n        page: state.getIn([\"course\", \"page\"]),\r\n        updateCourseFlag: state.getIn([\"course\", \"updateCourseFlag\"])\r\n    }),\r\n    dispatch => ({\r\n        handleFetchCourseRes(args){\r\n            dispatch(course.fetchCourse(args));\r\n        },\r\n        handleFetchTaskRes(teacherCourseId,courseTask){\r\n            dispatch(course.fetchCourseTask(teacherCourseId, courseTask));\r\n        },\r\n        handleStudentAddCourse(args){\r\n            dispatch(course.studentAddCourse(args));\r\n        },\r\n    })\r\n)(AllTasks);\r\n"]},"metadata":{},"sourceType":"module"}