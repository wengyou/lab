{"ast":null,"code":"import \"antd/es/table/style/css\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/button/style/css\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/icon/style/css\";\nimport _Icon from \"antd/es/icon\";\nimport \"antd/es/modal/style/css\";\nimport _Modal from \"antd/es/modal\";\nimport _slicedToArray from \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport \"antd/es/input/style/css\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/select/style/css\";\nimport _Select from \"antd/es/select\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\src\\\\components\\\\Administrator\\\\TeacherCourse.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as course from \"../../redux/actionCreators/resource\";\nimport * as admin from \"../../redux/actionCreators/admin\";\nvar Option = _Select.Option;\nvar Search = _Input.Search;\nvar Reg = /^[\\s\\S]*.*[^\\s][\\s\\S]*$/;\n\nvar TeacherCourse = function TeacherCourse(props) {\n  var taskTotal = props.taskTotal,\n      teacherCourseFlag = props.teacherCourseFlag,\n      userId = props.userId,\n      courseResource = props.courseResource,\n      handleFetchCourseRes = props.handleFetchCourseRes,\n      handleDeleteTeacherCourse = props.handleDeleteTeacherCourse,\n      handleSearchCourse = props.handleSearchCourse;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      selected = _useState2[0],\n      setSelected = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedRow = _useState4[0],\n      setSelectedRow = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      deleteBtn = _useState6[0],\n      setDeleteBtn = _useState6[1];\n\n  var _useState7 = useState(1),\n      _useState8 = _slicedToArray(_useState7, 2),\n      presentPage = _useState8[0],\n      setPresentPage = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      arr = _useState10[0],\n      setArr = _useState10[1];\n\n  var _useState11 = useState(\"courseName\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      searchFlag = _useState12[0],\n      setSearchFlag = _useState12[1];\n\n  var confirm = _Modal.confirm;\n  useEffect(function () {\n    handleFetchCourseRes(presentPage === 1 ? {\n      page: 1,\n      userId: userId\n    } : Math.ceil(taskTotal / 10) > presentPage ? {\n      page: presentPage,\n      userId: userId\n    } : {\n      page: presentPage - 1,\n      userId: userId\n    });\n  }, [teacherCourseFlag]);\n  var columns = [{\n    title: '实验课程',\n    dataIndex: 'courseName',\n    key: 'courseName'\n  }, {\n    title: '教学班编号',\n    dataIndex: 'courseId',\n    key: 'courseId'\n  }, {\n    title: '教学班备注',\n    dataIndex: 'remark',\n    key: 'remark'\n  }, {\n    title: '课程编号',\n    dataIndex: 'courseNumber',\n    key: 'courseNumber'\n  }, {\n    title: '课程教师',\n    dataIndex: 'teacherName',\n    key: 'teacherName'\n  }, {\n    title: '发布时间',\n    dataIndex: 'addTime',\n    key: 'addTime'\n  }];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      margin: \"0.625rem\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    disabled: deleteBtn,\n    style: {\n      margin: \" 0 0.625rem\"\n    },\n    onClick: function onClick() {\n      return confirm({\n        title: '确认删除吗?',\n        onOk: function onOk() {\n          setSelected([]);\n          setDeleteBtn(true);\n          selectedRow.map(function (e) {\n            return arr.push(e.teacherCourseId);\n          });\n          handleDeleteTeacherCourse({\n            teacherCourseIdList: arr\n          });\n          setArr([]);\n        },\n        onCancel: function onCancel() {}\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(_Icon, {\n    type: \"delete\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  }), \"\\u5220\\u9664\\u8BFE\\u7A0B\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexWrap: \"nowrap\",\n      width: \"20rem\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(_Select, {\n    defaultValue: \"courseName\",\n    style: {\n      width: \"5.625rem\"\n    },\n    onChange: function onChange(e) {\n      return setSearchFlag(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Option, {\n    value: \"courseName\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 25\n    }\n  }, \"\\u8BFE\\u7A0B\\u540D\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"teacherName\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 25\n    }\n  }, \"\\u6559\\u5E08\\u540D\")), /*#__PURE__*/React.createElement(Search, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u641C\\u7D22\\u5185\\u5BB9\",\n    onSearch: function onSearch(value) {\n      Reg.test(value) ? handleSearchCourse(searchFlag === \"teacherName\" ? {\n        page: 1,\n        teacherName: value,\n        course: \"\",\n        userId: userId\n      } : {\n        page: 1,\n        teacherName: \"\",\n        course: value,\n        userId: userId\n      }) : handleSearchCourse({\n        page: 1,\n        teacherName: \"\",\n        course: \"\",\n        userId: userId\n      });\n      setPresentPage(1);\n    },\n    enterButton: true,\n    style: {\n      width: 200\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(_Table, {\n    rowKey: function rowKey(record) {\n      return record.teacherCourseId;\n    },\n    columns: columns,\n    dataSource: courseResource,\n    pagination: {\n      total: taskTotal,\n      current: presentPage,\n      onChange: function onChange(e) {\n        handleFetchCourseRes({\n          page: e,\n          userId: userId\n        });\n        setSelected([]);\n        setPresentPage(e);\n      }\n    },\n    rowSelection: {\n      selectedRowKeys: selected,\n      onChange: function onChange(selectedRowKeys, selectedRows) {\n        setSelectedRow(selectedRows);\n        setSelected(selectedRowKeys);\n        selectedRowKeys.length > 0 ? setDeleteBtn(false) : setDeleteBtn(true);\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default connect(function (state) {\n  return {\n    taskTotal: state.getIn([\"course\", \"taskTotal\"]),\n    courseResource: state.getIn([\"course\", \"courseResource\"]),\n    courseTask: state.getIn([\"course\", \"courseTask\"]),\n    userId: state.getIn([\"userMana\", \"common\", \"userId\"]),\n    teacherCourseFlag: state.getIn([\"admin\", \"labCourse\", \"teacherCourseFlag\"])\n  };\n}, function (dispatch) {\n  return {\n    handleFetchCourseRes: function handleFetchCourseRes(args) {\n      dispatch(course.fetchCourse(args));\n    },\n    handleSearchCourse: function handleSearchCourse(args) {\n      dispatch(course.fetchSearchCourse(args));\n    },\n    handleDeleteTeacherCourse: function handleDeleteTeacherCourse(args) {\n      dispatch(admin.deleteTeacherCourses(args));\n    }\n  };\n})(TeacherCourse);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/components/Administrator/TeacherCourse.js"],"names":["React","useEffect","useState","connect","course","admin","Option","Search","Reg","TeacherCourse","props","taskTotal","teacherCourseFlag","userId","courseResource","handleFetchCourseRes","handleDeleteTeacherCourse","handleSearchCourse","selected","setSelected","selectedRow","setSelectedRow","deleteBtn","setDeleteBtn","presentPage","setPresentPage","arr","setArr","searchFlag","setSearchFlag","confirm","page","Math","ceil","columns","title","dataIndex","key","margin","display","onOk","map","e","push","teacherCourseId","teacherCourseIdList","onCancel","flexWrap","width","value","test","teacherName","record","total","current","onChange","selectedRowKeys","selectedRows","length","state","getIn","courseTask","dispatch","args","fetchCourse","fetchSearchCourse","deleteTeacherCourses"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {Table, Button, Icon, Modal, Select, Input} from \"antd\";\r\nimport * as course from \"../../redux/actionCreators/resource\";\r\nimport * as admin from \"../../redux/actionCreators/admin\";\r\nconst { Option } = Select;\r\nconst { Search } = Input;\r\nconst Reg = /^[\\s\\S]*.*[^\\s][\\s\\S]*$/;\r\n\r\nconst TeacherCourse = props => {\r\n    const {taskTotal,teacherCourseFlag,  userId, courseResource, handleFetchCourseRes, handleDeleteTeacherCourse, handleSearchCourse} = props;\r\n    const [selected, setSelected] = useState([]);\r\n    const [selectedRow, setSelectedRow] = useState([]);\r\n    const [deleteBtn, setDeleteBtn] = useState(true);\r\n    const [presentPage, setPresentPage] = useState(1);\r\n    const [arr, setArr] = useState([]);\r\n    const [searchFlag, setSearchFlag] = useState(\"courseName\");\r\n    const { confirm } = Modal;\r\n    useEffect(()=>{\r\n        handleFetchCourseRes(\r\n            presentPage === 1 ?\r\n                {page: 1, userId: userId} :\r\n                (Math.ceil(taskTotal / 10) > presentPage ?\r\n                        {page: presentPage, userId: userId} :\r\n                        {page: presentPage - 1, userId: userId}\r\n                ));\r\n    },[teacherCourseFlag]);\r\n    const columns = [\r\n        { title: '实验课程', dataIndex: 'courseName', key: 'courseName' },\r\n        { title: '教学班编号', dataIndex: 'courseId', key: 'courseId' },\r\n        { title: '教学班备注', dataIndex: 'remark', key: 'remark' },\r\n        { title: '课程编号', dataIndex: 'courseNumber', key: 'courseNumber' },\r\n        { title: '课程教师', dataIndex: 'teacherName', key: 'teacherName' },\r\n        { title: '发布时间', dataIndex: 'addTime', key: 'addTime' },\r\n    ];\r\n    return (\r\n        <div\r\n            style={{margin: \"0.625rem\",}}\r\n        >\r\n            <div\r\n                style={{display: \"flex\", }}\r\n            >\r\n                <Button\r\n                    disabled={deleteBtn}\r\n                    style={{margin: \" 0 0.625rem\"}}\r\n                    onClick={()=>confirm({\r\n                        title: '确认删除吗?',\r\n                        onOk() {\r\n                            setSelected([]);\r\n                            setDeleteBtn(true);\r\n                            selectedRow.map(e => (arr.push(e.teacherCourseId)));\r\n                            handleDeleteTeacherCourse({\r\n                                teacherCourseIdList: arr,\r\n                            });\r\n                            setArr([]);\r\n                        },\r\n                        onCancel() {\r\n                        },\r\n                    })}\r\n                >\r\n                    <Icon type={\"delete\"}/>\r\n                    删除课程\r\n                </Button>\r\n                <div  style={{display: \"flex\", flexWrap: \"nowrap\", width: \"20rem\"}}>\r\n                    <Select\r\n                        defaultValue={\"courseName\"}\r\n                        style={{ width: \"5.625rem\" }}\r\n                        onChange={e=>(setSearchFlag(e))}\r\n                    >\r\n                        <Option value={\"courseName\"}>课程名</Option>\r\n                        <Option value={\"teacherName\"}>教师名</Option>\r\n                    </Select>\r\n                    <Search\r\n                        placeholder=\"请输入搜索内容\"\r\n                        onSearch={(value) =>{\r\n                            Reg.test(value) ?\r\n                                handleSearchCourse(\r\n                                    searchFlag === \"teacherName\" ? {\r\n                                        page: 1,\r\n                                        teacherName: value,\r\n                                        course: \"\",\r\n                                        userId: userId,\r\n                                    } : {\r\n                                        page: 1,\r\n                                        teacherName: \"\",\r\n                                        course: value,\r\n                                        userId: userId\r\n                                    }\r\n                                ) : handleSearchCourse({\r\n                                        page: 1,\r\n                                        teacherName: \"\",\r\n                                        course: \"\",\r\n                                        userId: userId,\r\n                                });\r\n                            setPresentPage(1);\r\n                        }}\r\n                        enterButton\r\n                        style={{ width: 200 }}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <Table\r\n                rowKey={record => record.teacherCourseId}\r\n                columns={columns}\r\n                dataSource={courseResource}\r\n                pagination={{\r\n                    total: taskTotal,\r\n                    current: presentPage,\r\n                    onChange: e => {\r\n                        handleFetchCourseRes({ page: e, userId: userId });\r\n                        setSelected([]);\r\n                        setPresentPage(e);\r\n                    },\r\n                }}\r\n\r\n                rowSelection ={{\r\n                    selectedRowKeys: selected,\r\n                    onChange: (selectedRowKeys, selectedRows) => {\r\n                        setSelectedRow(selectedRows);\r\n                        setSelected(selectedRowKeys);\r\n                        selectedRowKeys.length > 0 ? setDeleteBtn(false) : setDeleteBtn(true);\r\n                    }\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n\r\n};\r\nexport default connect(\r\n    state => ({\r\n        taskTotal: state.getIn([\"course\", \"taskTotal\"]),\r\n        courseResource: state.getIn([\"course\", \"courseResource\"]),\r\n        courseTask: state.getIn([\"course\", \"courseTask\"]),\r\n        userId: state.getIn([\"userMana\", \"common\", \"userId\"]),\r\n        teacherCourseFlag: state.getIn([\"admin\", \"labCourse\", \"teacherCourseFlag\"])\r\n    }),\r\n    dispatch => ({\r\n        handleFetchCourseRes(args){\r\n            dispatch(course.fetchCourse(args));\r\n        },\r\n        handleSearchCourse(args){\r\n            dispatch(course.fetchSearchCourse(args));\r\n        },\r\n        handleDeleteTeacherCourse(args){\r\n            dispatch(admin.deleteTeacherCourses(args))\r\n        },\r\n    }),\r\n)(TeacherCourse);\r\n"]},"metadata":{},"sourceType":"module"}