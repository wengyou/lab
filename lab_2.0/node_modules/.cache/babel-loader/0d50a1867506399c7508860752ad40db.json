{"ast":null,"code":"import\"antd/es/modal/style/css\";import _Modal from\"antd/es/modal\";import\"antd/es/table/style/css\";import _Table from\"antd/es/table\";import _objectSpread from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import\"antd/es/select/style/css\";import _Select from\"antd/es/select\";import\"antd/es/input/style/css\";import _Input from\"antd/es/input\";import React,{useState}from\"react\";import{connect}from'react-redux';import{teacherAddStudent}from'../redux/actionCreators/resource';import*as resource from\"../redux/actionCreators/resource\";var Search=_Input.Search;var Option=_Select.Option;var AddStudents=function AddStudents(props){var _useState=useState({type:'userId',page:1,input:''}),_useState2=_slicedToArray(_useState,2),searchInfo=_useState2[0],setSearchInfo=_useState2[1];var studentMessage=props.studentMessage,total=props.total,teacherCourseId=props.teacherCourseId,visibleCallback=props.visibleCallback,addStudentVisible=props.addStudentVisible,handleTeacherAddStudent=props.handleTeacherAddStudent,handleSearchStudent=props.handleSearchStudent;//改变option\nvar handleSelect=function handleSelect(value){setSearchInfo(_objectSpread(_objectSpread({},searchInfo),{},{type:value}));};//翻页\nvar changePage=function changePage(page){setSearchInfo(_objectSpread(_objectSpread({},searchInfo),{},{page:page}));handleSearchStudent({page:page,type:\"student\",userId:searchInfo.type==='userId'?searchInfo.input:'',userName:searchInfo.type==='userName'?searchInfo.input:''});};//查询学生信息\nvar search=function search(value){setSearchInfo(_objectSpread(_objectSpread({},searchInfo),{},{input:value}));handleSearchStudent({page:1,type:\"student\",userId:searchInfo.type==='userId'?value:'',userName:searchInfo.type==='userName'?value:''});};//教师为学生添加课程\nvar addCourse=function addCourse(e){handleTeacherAddStudent({userId:e.userId,teacherCourseId:teacherCourseId});};var columns=[{title:\"学生姓名\",align:'center',dataIndex:\"userName\",key:\"userName\"},{title:\"学生学号\",align:'center',dataIndex:\"userId\",key:\"userId\"},{title:\"操作\",key:\"operate\",align:'center',render:function render(e){return/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return addCourse(e);},style:{color:'rgb(24, 144, 255)',cursor:\"pointer\"}},\"\\u6DFB\\u52A0\");}}];var mockData=[];for(var i=0;i<70;i++){mockData.push({userName:'a'+i,userId:i});}return/*#__PURE__*/React.createElement(_Modal,{visible:addStudentVisible,onCancel:function onCancel(){return visibleCallback(false);},footer:null},/*#__PURE__*/React.createElement(\"div\",{style:{width:'17rem'},className:\"flex margin_column_xs\"},/*#__PURE__*/React.createElement(_Select,{defaultValue:\"userId\",onChange:handleSelect},/*#__PURE__*/React.createElement(Option,{value:\"userId\"},\"\\u5B66\\u53F7\"),/*#__PURE__*/React.createElement(Option,{value:\"userName\"},\"\\u59D3\\u540D\")),/*#__PURE__*/React.createElement(Search,{onSearch:search,enterButton:true})),/*#__PURE__*/React.createElement(_Table,{dataSource:studentMessage,columns:columns,pagination:{current:searchInfo.page,total:total,onChange:changePage}}));};export default connect(function(state){return{studentMessage:state.getIn([\"resource\",\"resource\",\"studentMessage\"]),total:state.getIn([\"resource\",\"resource\",\"studentTotal\"]),userId:state.getIn([\"resource\",\"resource\",\"studentId\"]),userName:state.getIn([\"resource\",\"resource\",\"studentName\"]),page:state.getIn([\"resource\",\"resource\",\"page\"])};},function(dispatch){return{handleTeacherAddStudent:function handleTeacherAddStudent(args){dispatch(teacherAddStudent(args));},handleSearchStudent:function handleSearchStudent(args){dispatch(resource.fetchStudentMes(args));}};})(AddStudents);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/components/addStudents.jsx"],"names":["React","useState","connect","teacherAddStudent","resource","Search","Option","AddStudents","props","type","page","input","searchInfo","setSearchInfo","studentMessage","total","teacherCourseId","visibleCallback","addStudentVisible","handleTeacherAddStudent","handleSearchStudent","handleSelect","value","changePage","userId","userName","search","addCourse","e","columns","title","align","dataIndex","key","render","color","cursor","mockData","i","push","width","current","onChange","state","getIn","dispatch","args","fetchStudentMes"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { connect } from 'react-redux';\nimport {Modal, Input, Select, Table} from \"antd\";\nimport { teacherAddStudent } from '../redux/actionCreators/resource';\nimport * as resource from \"../redux/actionCreators/resource\";\n\nconst { Search } = Input;\nconst { Option } = Select;\n\nconst AddStudents = (props) => {\n    const [searchInfo, setSearchInfo] = useState({type: 'userId', page: 1, input: ''})\n\n    const {\n        studentMessage,\n        total,\n        teacherCourseId,\n        visibleCallback,\n        addStudentVisible,\n        handleTeacherAddStudent,\n        handleSearchStudent\n    } = props;\n    //改变option\n    const handleSelect = (value) => {\n        setSearchInfo({\n            ...searchInfo,\n            type: value\n        })\n    }\n    //翻页\n    const changePage = (page) => {\n        setSearchInfo({\n            ...searchInfo,\n            page: page\n        });\n        handleSearchStudent({\n            page: page,\n            type: \"student\",\n            userId: searchInfo.type === 'userId' ? searchInfo.input : '',\n            userName: searchInfo.type === 'userName' ? searchInfo.input : ''\n        })\n\n    }\n    //查询学生信息\n    const search = (value) => {\n        setSearchInfo({\n            ...searchInfo,\n            input: value\n        })\n        handleSearchStudent({\n                    page: 1,\n                    type: \"student\",\n                    userId: searchInfo.type === 'userId' ? value : '',\n                    userName: searchInfo.type === 'userName' ? value : ''\n                })\n    };\n\n    //教师为学生添加课程\n    const addCourse = (e) => {\n        handleTeacherAddStudent(\n            {\n                userId: e.userId,\n                teacherCourseId: teacherCourseId\n            }\n        )\n    }\n\n    const columns = [\n        { title: \"学生姓名\", align: 'center', dataIndex: \"userName\", key: \"userName\" },\n        { title: \"学生学号\", align: 'center', dataIndex: \"userId\", key: \"userId\" },\n        {\n            title: \"操作\",\n            key: \"operate\",\n            align: 'center',\n            render: (e)=> (\n                <span\n                    onClick={()=>(addCourse(e))}\n                    style={{color: 'rgb(24, 144, 255)' ,cursor: \"pointer\",}}\n                >\n                    添加\n                </span>\n            )\n        }\n    ]\n\n    let  mockData = [];\n    for(let i = 0; i < 70; i++){\n        mockData.push({\n            userName : 'a' + i,\n            userId: i\n        })\n    }\n\n\n    return (\n        <Modal\n            visible={addStudentVisible}\n            onCancel={() => (visibleCallback(false))}\n            footer={null}\n        >\n            <div style={{width: '17rem'}} className='flex margin_column_xs'>\n                <Select\n                    defaultValue='userId'\n                    onChange={handleSelect}\n                >\n                    <Option value='userId'>学号</Option>\n                    <Option value='userName'>姓名</Option>\n                </Select>\n                <Search\n                    onSearch={search}\n                    enterButton\n                />\n            </div>\n            <Table\n                dataSource={studentMessage}\n                columns={columns}\n                pagination={{\n                    current: searchInfo.page,\n                    total,\n                    onChange: changePage\n                }}\n            />\n        </Modal>\n    )\n};\n\nexport default connect(\n    state => ({\n        studentMessage: state.getIn([\"resource\", \"resource\", \"studentMessage\"]),\n        total: state.getIn([\"resource\", \"resource\", \"studentTotal\"]),\n        userId: state.getIn([\"resource\", \"resource\", \"studentId\"]),\n        userName: state.getIn([\"resource\", \"resource\", \"studentName\"]),\n        page: state.getIn([\"resource\", \"resource\", \"page\"]),\n\n    }),\n    dispatch => ({\n        handleTeacherAddStudent(args){\n            dispatch(teacherAddStudent(args))\n        },\n        handleSearchStudent(args){\n            dispatch(resource.fetchStudentMes(args))\n        }\n    })\n)(AddStudents)\n"]},"metadata":{},"sourceType":"module"}