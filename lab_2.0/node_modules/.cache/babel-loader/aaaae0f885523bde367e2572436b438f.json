{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import\"antd/es/message/style/css\";import _message from\"antd/es/message\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(studentAddCourse),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(teacherAddStudent),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(teacherAddCourse),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(studentDeleteCourse),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(teacherDeleteCourse),_marked6=/*#__PURE__*/_regeneratorRuntime.mark(teacherAddRemark),_marked7=/*#__PURE__*/_regeneratorRuntime.mark(teacherReleaseTask),_marked8=/*#__PURE__*/_regeneratorRuntime.mark(teacherCheckStudent),_marked9=/*#__PURE__*/_regeneratorRuntime.mark(teacherDeleteStudent),_marked10=/*#__PURE__*/_regeneratorRuntime.mark(rootStudentAddCourse);//一系列课程处理操作，老师学生添加，删除课程，老师添加课程备注\nimport{call,put,takeEvery}from\"redux-saga/effects\";import Service from\"../../../lib/Service\";import{TEACHER_ADD_COURSE,STUDENT_ADD_COURSE,TEACHER_DELETE_COURSE,STUDENT_DELETE_COURSE,TEACHER_ADD_REMARK,TEACHER_RELEASE_TASKS,STUDENT_DELETE_COURSE_SUCCESS,STUDENT_ADD_COURSE_SUCCESS,TEACHER_DELETE_COURSE_SUCCESS,TEACHER_ADD_REMARK_SUCCESS,QUERY_MY_COURSE_SUCCESS,TEACHER_RELEASE_TASKS_SUCCESS,TEACHER_ADD_COURSE_SUCCESS,TEACHER_RELEASE_TASKS_FAILED,TEACHER_CHECK_STUDENT,TEACHER_CHECK_STUDENT_SUCCESS,TEACHER_DELETE_STUDENT_SUCCESS,TEACHER_DELETE_STUDENT,TEACHER_ADD_STUDENT,TEACHER_ADD_STUDENT_SUCCESS}from\"../../../constants/actionTypes\";//学生添加课程\nfunction studentAddCourse(args){var _args$args,teacherCourseId,userId,type,data,res,updateUrl,updateRes;return _regeneratorRuntime.wrap(function studentAddCourse$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_args$args=args.args,teacherCourseId=_args$args.teacherCourseId,userId=_args$args.userId,type=_args$args.type;data={teacherCourseId:teacherCourseId,userId:userId};_context.next=5;return call(Service.post,\"student/addCourse\",data);case 5:res=_context.sent;_context.t0=res.data.error_code;_context.next=_context.t0===0?9:_context.t0===-1?24:26;break;case 9:_message.success(\"添加成功~\");updateUrl=\"course/queryMyCourse?userId=\".concat(userId,\"&type=\").concat(type);_context.next=13;return call(Service.get,updateUrl);case 13:updateRes=_context.sent;_context.t1=updateRes.data.error_code;_context.next=_context.t1===0?17:22;break;case 17:_context.next=19;return put({type:STUDENT_ADD_COURSE_SUCCESS,payload:teacherCourseId});case 19:_context.next=21;return put({type:QUERY_MY_COURSE_SUCCESS,payload:updateRes.data.data});case 21:return _context.abrupt(\"break\",23);case 22:return _context.abrupt(\"return\",0);case 23:return _context.abrupt(\"break\",26);case 24:_message.error(\"请勿重复添加！\");return _context.abrupt(\"break\",26);case 26:_context.next=30;break;case 28:_context.prev=28;_context.t2=_context[\"catch\"](0);case 30:case\"end\":return _context.stop();}}},_marked,null,[[0,28]]);}//老师为学生添加课程\nfunction teacherAddStudent(args){var _args$args2,teacherCourseId,userId,data,res,Url,Res;return _regeneratorRuntime.wrap(function teacherAddStudent$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_args$args2=args.args,teacherCourseId=_args$args2.teacherCourseId,userId=_args$args2.userId;data={teacherCourseId:teacherCourseId,userId:userId};_context2.next=5;return call(Service.post,\"student/addCourse\",data);case 5:res=_context2.sent;_context2.t0=res.data.error_code;_context2.next=_context2.t0===0?9:_context2.t0===-1?23:25;break;case 9:_message.success(\"添加成功~\");Url=\"teacher/queryStudents?teacherCourseId=\".concat(teacherCourseId);_context2.next=13;return call(Service.get,Url);case 13:Res=_context2.sent;_context2.t1=Res.data.error_code;_context2.next=_context2.t1===0?17:_context2.t1===-1?20:22;break;case 17:_context2.next=19;return put({type:TEACHER_CHECK_STUDENT_SUCCESS,payload:Res.data.data});case 19:return _context2.abrupt(\"break\",22);case 20:_message.error(\"查询失败！\");return _context2.abrupt(\"break\",22);case 22:return _context2.abrupt(\"break\",25);case 23:_message.error(\"请勿重复添加！\");return _context2.abrupt(\"break\",25);case 25:_context2.next=29;break;case 27:_context2.prev=27;_context2.t2=_context2[\"catch\"](0);case 29:case\"end\":return _context2.stop();}}},_marked2,null,[[0,27]]);}//老师添加课程\nfunction teacherAddCourse(args){var _args$args3,courseId,teacherId,teacherCourseId,type,data,res,updateUrl,updateRes;return _regeneratorRuntime.wrap(function teacherAddCourse$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_args$args3=args.args,courseId=_args$args3.courseId,teacherId=_args$args3.teacherId,teacherCourseId=_args$args3.teacherCourseId,type=_args$args3.type;data={courseId:courseId,teacherId:teacherId};_context3.next=5;return call(Service.post,\"teacher/addCourse\",data);case 5:res=_context3.sent;_context3.t0=res.data.error_code;_context3.next=_context3.t0===0?9:_context3.t0===-1?24:26;break;case 9:_message.success(\"添加成功~\");updateUrl=\"course/queryMyCourse?userId=\".concat(teacherId,\"&type=\").concat(type);_context3.next=13;return call(Service.get,updateUrl);case 13:updateRes=_context3.sent;_context3.t1=updateRes.data.error_code;_context3.next=_context3.t1===0?17:22;break;case 17:_context3.next=19;return put({type:TEACHER_ADD_COURSE_SUCCESS,payload:courseId});case 19:_context3.next=21;return put({type:QUERY_MY_COURSE_SUCCESS,payload:updateRes.data.data});case 21:return _context3.abrupt(\"break\",23);case 22:return _context3.abrupt(\"return\",0);case 23:return _context3.abrupt(\"break\",27);case 24:_message.error(\"请勿重复添加！\");return _context3.abrupt(\"break\",27);case 26:_message.error(res.data.message);case 27:_context3.next=31;break;case 29:_context3.prev=29;_context3.t2=_context3[\"catch\"](0);case 31:case\"end\":return _context3.stop();}}},_marked3,null,[[0,29]]);}//学生删除课程\nfunction studentDeleteCourse(args){var _args$args4,studentCourseId,userId,teacherCourseId,data,res;return _regeneratorRuntime.wrap(function studentDeleteCourse$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_args$args4=args.args,studentCourseId=_args$args4.studentCourseId,userId=_args$args4.userId,teacherCourseId=_args$args4.teacherCourseId;data={studentCourseId:studentCourseId,userId:userId};_context4.next=5;return call(Service.post,\"student/deleteCourse\",data);case 5:res=_context4.sent;_context4.t0=res.data.error_code;_context4.next=_context4.t0===0?9:_context4.t0===-1?13:14;break;case 9:_message.success(\"删除成功~\");_context4.next=12;return put({type:STUDENT_DELETE_COURSE_SUCCESS,teacherCourseId:teacherCourseId,studentCourseId:studentCourseId});case 12:return _context4.abrupt(\"break\",14);case 13:_message.error(\"删除失败！\");case 14:_context4.next=18;break;case 16:_context4.prev=16;_context4.t1=_context4[\"catch\"](0);case 18:case\"end\":return _context4.stop();}}},_marked4,null,[[0,16]]);}//老师删除课程\nfunction teacherDeleteCourse(args){var _args$args5,id,userId,teacherCourseId,data,res;return _regeneratorRuntime.wrap(function teacherDeleteCourse$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_args$args5=args.args,id=_args$args5.id,userId=_args$args5.userId,teacherCourseId=_args$args5.teacherCourseId;data={id:id,userId:userId};_context5.next=5;return call(Service.post,\"teacher/deleteCourse\",data);case 5:res=_context5.sent;_context5.t0=res.data.error_code;_context5.next=_context5.t0===0?9:_context5.t0===-1?13:15;break;case 9:_message.success(\"删除成功！\");_context5.next=12;return put({type:TEACHER_DELETE_COURSE_SUCCESS,payload:teacherCourseId});case 12:return _context5.abrupt(\"break\",16);case 13:_message.error(\"删除失败！\");return _context5.abrupt(\"break\",16);case 15:return _context5.abrupt(\"return\",0);case 16:_context5.next=20;break;case 18:_context5.prev=18;_context5.t1=_context5[\"catch\"](0);case 20:case\"end\":return _context5.stop();}}},_marked5,null,[[0,18]]);}//老师添加课程备注\nfunction teacherAddRemark(args){var _args$args6,teacherCourseId,remark,data,res;return _regeneratorRuntime.wrap(function teacherAddRemark$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_args$args6=args.args,teacherCourseId=_args$args6.teacherCourseId,remark=_args$args6.remark;data={teacherCourseId:teacherCourseId,remark:remark};_context6.next=5;return call(Service.post,\"teacher/addRemark\",data);case 5:res=_context6.sent;_context6.t0=res.data.error_code;_context6.next=_context6.t0===0?9:_context6.t0===-1?13:14;break;case 9:_message.success(\"操作成功~\");_context6.next=12;return put({type:TEACHER_ADD_REMARK_SUCCESS,payload:data});case 12:return _context6.abrupt(\"break\",15);case 13:_message.error(\"操作失败！\");case 14:return _context6.abrupt(\"return\",0);case 15:_context6.next=19;break;case 17:_context6.prev=17;_context6.t1=_context6[\"catch\"](0);case 19:case\"end\":return _context6.stop();}}},_marked6,null,[[0,17]]);}//老师发布课程任务\nfunction teacherReleaseTask(args){var _args$args7,teacherCourseId,userId,taskName,file,formData,res,url,Res;return _regeneratorRuntime.wrap(function teacherReleaseTask$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_args$args7=args.args,teacherCourseId=_args$args7.teacherCourseId,userId=_args$args7.userId,taskName=_args$args7.taskName,file=_args$args7.file;formData=new FormData();formData.append('teacherCourseId',teacherCourseId);formData.append('userId',userId);formData.append('taskName',taskName);formData.append('fileName',file);_context7.next=9;return call(Service.post,\"teacher/addCourseTask\",formData);case 9:res=_context7.sent;_context7.t0=res.data.error_code;_context7.next=_context7.t0===0?13:_context7.t0===-1?26:30;break;case 13:_message.success('发布任务成功~');url=\"course/queryCourseTask?teacherCourseId=\".concat(teacherCourseId);_context7.next=17;return call(Service.get,url);case 17:Res=_context7.sent;_context7.t1=Res.data.error_code;_context7.next=_context7.t1===0?21:24;break;case 21:_context7.next=23;return put({type:TEACHER_RELEASE_TASKS_SUCCESS,payload:Res.data.data,teacherCourseId:teacherCourseId});case 23:return _context7.abrupt(\"break\",25);case 24:return _context7.abrupt(\"return\",0);case 25:return _context7.abrupt(\"break\",31);case 26:_context7.next=28;return put({type:TEACHER_RELEASE_TASKS_FAILED});case 28:_message.error(\"已发布过该实验任务！\");return _context7.abrupt(\"break\",31);case 30:_message.error(res.data.message);case 31:_context7.next=35;break;case 33:_context7.prev=33;_context7.t2=_context7[\"catch\"](0);case 35:case\"end\":return _context7.stop();}}},_marked7,null,[[0,33]]);}//老师查看选修该课学生名单\nfunction teacherCheckStudent(args){var teacherCourseId,url,res;return _regeneratorRuntime.wrap(function teacherCheckStudent$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;teacherCourseId=args.args.teacherCourseId;url=\"teacher/queryStudents?teacherCourseId=\".concat(teacherCourseId);_context8.next=5;return call(Service.get,url);case 5:res=_context8.sent;_context8.t0=res.data.error_code;_context8.next=_context8.t0===0?9:_context8.t0===-1?12:14;break;case 9:_context8.next=11;return put({type:TEACHER_CHECK_STUDENT_SUCCESS,payload:res.data.data});case 11:return _context8.abrupt(\"break\",14);case 12:_message.error(\"查询失败！\");return _context8.abrupt(\"break\",14);case 14:_context8.next=18;break;case 16:_context8.prev=16;_context8.t1=_context8[\"catch\"](0);case 18:case\"end\":return _context8.stop();}}},_marked8,null,[[0,16]]);}function teacherDeleteStudent(args){var studentCourseIdList,formData,res;return _regeneratorRuntime.wrap(function teacherDeleteStudent$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;studentCourseIdList=args.args.studentCourseIdList;formData=new FormData();formData.append(\"studentCourseIdList\",studentCourseIdList);_context9.next=6;return call(Service.post,\"teacher/deleteStudentCourses\",formData);case 6:res=_context9.sent;_context9.t0=res.data.error_code;_context9.next=_context9.t0===0?10:_context9.t0===-1?14:16;break;case 10:_message.success(\"删除成功~\");_context9.next=13;return put({type:TEACHER_DELETE_STUDENT_SUCCESS,payload:studentCourseIdList});case 13:return _context9.abrupt(\"break\",17);case 14:_message.error(\"删除失败！\");return _context9.abrupt(\"break\",17);case 16:return _context9.abrupt(\"return\",0);case 17:_context9.next=21;break;case 19:_context9.prev=19;_context9.t1=_context9[\"catch\"](0);case 21:case\"end\":return _context9.stop();}}},_marked9,null,[[0,19]]);}export default function rootStudentAddCourse(){return _regeneratorRuntime.wrap(function rootStudentAddCourse$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return takeEvery(STUDENT_ADD_COURSE,studentAddCourse);case 2:_context10.next=4;return takeEvery(TEACHER_ADD_COURSE,teacherAddCourse);case 4:_context10.next=6;return takeEvery(TEACHER_DELETE_COURSE,teacherDeleteCourse);case 6:_context10.next=8;return takeEvery(STUDENT_DELETE_COURSE,studentDeleteCourse);case 8:_context10.next=10;return takeEvery(TEACHER_ADD_REMARK,teacherAddRemark);case 10:_context10.next=12;return takeEvery(TEACHER_RELEASE_TASKS,teacherReleaseTask);case 12:_context10.next=14;return takeEvery(TEACHER_CHECK_STUDENT,teacherCheckStudent);case 14:_context10.next=16;return takeEvery(TEACHER_DELETE_STUDENT,teacherDeleteStudent);case 16:_context10.next=18;return takeEvery(TEACHER_ADD_STUDENT,teacherAddStudent);case 18:case\"end\":return _context10.stop();}}},_marked10);}","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/redux/sagas/courseSagas/handleCourse.js"],"names":["studentAddCourse","teacherAddStudent","teacherAddCourse","studentDeleteCourse","teacherDeleteCourse","teacherAddRemark","teacherReleaseTask","teacherCheckStudent","teacherDeleteStudent","rootStudentAddCourse","call","put","takeEvery","Service","TEACHER_ADD_COURSE","STUDENT_ADD_COURSE","TEACHER_DELETE_COURSE","STUDENT_DELETE_COURSE","TEACHER_ADD_REMARK","TEACHER_RELEASE_TASKS","STUDENT_DELETE_COURSE_SUCCESS","STUDENT_ADD_COURSE_SUCCESS","TEACHER_DELETE_COURSE_SUCCESS","TEACHER_ADD_REMARK_SUCCESS","QUERY_MY_COURSE_SUCCESS","TEACHER_RELEASE_TASKS_SUCCESS","TEACHER_ADD_COURSE_SUCCESS","TEACHER_RELEASE_TASKS_FAILED","TEACHER_CHECK_STUDENT","TEACHER_CHECK_STUDENT_SUCCESS","TEACHER_DELETE_STUDENT_SUCCESS","TEACHER_DELETE_STUDENT","TEACHER_ADD_STUDENT","TEACHER_ADD_STUDENT_SUCCESS","args","teacherCourseId","userId","type","data","post","res","error_code","success","updateUrl","get","updateRes","payload","error","Url","Res","courseId","teacherId","message","studentCourseId","id","remark","taskName","file","formData","FormData","append","url","studentCourseIdList"],"mappings":"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","sourcesContent":["//一系列课程处理操作，老师学生添加，删除课程，老师添加课程备注\r\nimport { call, put, takeEvery } from \"redux-saga/effects\";\r\nimport Service from \"../../../lib/Service\";\r\nimport {\r\n    TEACHER_ADD_COURSE,\r\n    STUDENT_ADD_COURSE,\r\n    TEACHER_DELETE_COURSE,\r\n    STUDENT_DELETE_COURSE,\r\n    TEACHER_ADD_REMARK,\r\n    TEACHER_RELEASE_TASKS,\r\n    STUDENT_DELETE_COURSE_SUCCESS,\r\n    STUDENT_ADD_COURSE_SUCCESS,\r\n    TEACHER_DELETE_COURSE_SUCCESS,\r\n    TEACHER_ADD_REMARK_SUCCESS,\r\n    QUERY_MY_COURSE_SUCCESS,\r\n    TEACHER_RELEASE_TASKS_SUCCESS,\r\n    TEACHER_ADD_COURSE_SUCCESS,\r\n    TEACHER_RELEASE_TASKS_FAILED,\r\n    TEACHER_CHECK_STUDENT,\r\n    TEACHER_CHECK_STUDENT_SUCCESS,\r\n    TEACHER_DELETE_STUDENT_SUCCESS,\r\n    TEACHER_DELETE_STUDENT,\r\n    TEACHER_ADD_STUDENT,\r\n    TEACHER_ADD_STUDENT_SUCCESS\r\n} from \"../../../constants/actionTypes\";\r\nimport { message } from \"antd\";\r\n\r\n\r\n//学生添加课程\r\nfunction* studentAddCourse(args) {\r\n    try {\r\n        const { teacherCourseId, userId, type } = args.args;\r\n        const data = { teacherCourseId, userId };\r\n        const res = yield call(Service.post, \"student/addCourse\", data );\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                message.success(\"添加成功~\");\r\n                const updateUrl = `course/queryMyCourse?userId=${userId}&type=${type}`;\r\n                const updateRes = yield call(Service.get, updateUrl);\r\n                switch(updateRes.data.error_code) {\r\n                    case 0:\r\n                        yield put({\r\n                            type: STUDENT_ADD_COURSE_SUCCESS,\r\n                            payload: teacherCourseId\r\n\r\n                        });\r\n                        yield put({\r\n                            type: QUERY_MY_COURSE_SUCCESS,\r\n                            payload: updateRes.data.data,\r\n                        });\r\n                        break;\r\n                    default:\r\n                        return 0;\r\n                }\r\n                break;\r\n            case -1:\r\n                message.error(\"请勿重复添加！\");\r\n                break;\r\n        }\r\n    }\r\n    catch (e) {\r\n    }\r\n}\r\n\r\n//老师为学生添加课程\r\nfunction* teacherAddStudent(args) {\r\n    try {\r\n        const { teacherCourseId, userId } = args.args;\r\n        const data = { teacherCourseId, userId };\r\n        const res = yield call(Service.post, \"student/addCourse\", data );\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                message.success(\"添加成功~\");\r\n                const Url = `teacher/queryStudents?teacherCourseId=${teacherCourseId}`;\r\n                const Res = yield call(Service.get, Url);\r\n                switch (Res.data.error_code) {\r\n                    case 0:\r\n                        yield put({\r\n                            type: TEACHER_CHECK_STUDENT_SUCCESS,\r\n                            payload: Res.data.data,\r\n                        });\r\n                        break;\r\n                    case -1:\r\n                        message.error(\"查询失败！\");\r\n                        break;\r\n                }\r\n                break;\r\n            case -1:\r\n                message.error(\"请勿重复添加！\");\r\n                break;\r\n        }\r\n    }\r\n    catch (e) {\r\n    }\r\n}\r\n\r\n//老师添加课程\r\nfunction* teacherAddCourse(args) {\r\n    try {\r\n        const { courseId, teacherId, teacherCourseId, type } = args.args;\r\n        const data = { courseId, teacherId };\r\n        const res = yield call(Service.post, \"teacher/addCourse\", data );\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                message.success( \"添加成功~\");\r\n                const updateUrl = `course/queryMyCourse?userId=${teacherId}&type=${type}`;\r\n                const updateRes = yield call(Service.get, updateUrl);\r\n                switch(updateRes.data.error_code) {\r\n                    case 0:\r\n                        yield put({\r\n                            type: TEACHER_ADD_COURSE_SUCCESS,\r\n                            payload: courseId\r\n                        });\r\n                        yield put({\r\n                            type: QUERY_MY_COURSE_SUCCESS,\r\n                            payload: updateRes.data.data,\r\n                        });\r\n                        break;\r\n                    default:\r\n                        return 0;\r\n                }\r\n                break;\r\n            case -1:\r\n                message.error(\"请勿重复添加！\");\r\n                break;\r\n            default:\r\n                message.error(res.data.message);\r\n        }\r\n    }\r\n    catch (e) {\r\n    }\r\n}\r\n\r\n//学生删除课程\r\nfunction* studentDeleteCourse(args) {\r\n    try {\r\n        const { studentCourseId, userId, teacherCourseId } = args.args;\r\n        const data = { studentCourseId, userId };\r\n        const res = yield call(Service.post, \"student/deleteCourse\", data );\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                message.success(\"删除成功~\");\r\n                yield put({\r\n                    type: STUDENT_DELETE_COURSE_SUCCESS,\r\n                    teacherCourseId: teacherCourseId,\r\n                    studentCourseId: studentCourseId\r\n                })\r\n                break;\r\n            case -1:\r\n                message.error(\"删除失败！\")\r\n        }\r\n    }\r\n    catch (e) {\r\n    }\r\n}\r\n//老师删除课程\r\nfunction* teacherDeleteCourse(args) {\r\n    try {\r\n        const { id, userId, teacherCourseId } = args.args;\r\n        const data = { id, userId };\r\n        const res = yield call(Service.post, \"teacher/deleteCourse\", data );\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                message.success( \"删除成功！\");\r\n                yield put({\r\n                    type: TEACHER_DELETE_COURSE_SUCCESS,\r\n                    payload: teacherCourseId,\r\n                });\r\n                break;\r\n            case -1:\r\n                message.error(\"删除失败！\");\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n    catch (e) {\r\n    }\r\n}\r\n\r\n//老师添加课程备注\r\nfunction* teacherAddRemark(args) {\r\n    try {\r\n        const {teacherCourseId, remark} = args.args;\r\n        const data = {teacherCourseId, remark};\r\n        const res = yield call(Service.post, \"teacher/addRemark\", data);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                message.success(\"操作成功~\");\r\n                yield put({\r\n                    type: TEACHER_ADD_REMARK_SUCCESS,\r\n                    payload: data\r\n                });\r\n                break;\r\n            case -1:\r\n                message.error(\"操作失败！\");\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n    catch (e) {\r\n\r\n    }\r\n}\r\n\r\n//老师发布课程任务\r\nfunction* teacherReleaseTask(args) {\r\n    try {\r\n        const {teacherCourseId, userId, taskName, file} = args.args;\r\n        const formData = new FormData();\r\n        formData.append('teacherCourseId',teacherCourseId);\r\n        formData.append('userId',userId);\r\n        formData.append('taskName',taskName);\r\n        formData.append('fileName', file);\r\n        const res = yield call(Service.post, \"teacher/addCourseTask\", formData);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                message.success('发布任务成功~');\r\n                const url = `course/queryCourseTask?teacherCourseId=${teacherCourseId}`;\r\n                const Res = yield call(Service.get, url);\r\n                switch (Res.data.error_code) {\r\n                    case 0:\r\n                        yield put({\r\n                            type:TEACHER_RELEASE_TASKS_SUCCESS,\r\n                            payload: Res.data.data,\r\n                            teacherCourseId,\r\n                        });\r\n                        break;\r\n                    default:\r\n                        return 0;\r\n                }\r\n                break;\r\n            case -1:\r\n                yield put(\r\n                    {\r\n                        type: TEACHER_RELEASE_TASKS_FAILED,\r\n                    }\r\n                );\r\n                message.error(\"已发布过该实验任务！\");\r\n                break;\r\n            default:\r\n                message.error(res.data.message);\r\n        }\r\n    }\r\n    catch (e) {\r\n\r\n    }\r\n}\r\n\r\n//老师查看选修该课学生名单\r\nfunction* teacherCheckStudent(args) {\r\n    try {\r\n        const {teacherCourseId} = args.args;\r\n        const url = `teacher/queryStudents?teacherCourseId=${teacherCourseId}`;\r\n        const res = yield call(Service.get, url);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: TEACHER_CHECK_STUDENT_SUCCESS,\r\n                    payload: res.data.data,\r\n                });\r\n                break;\r\n            case -1:\r\n                message.error(\"查询失败！\");\r\n                break;\r\n        }\r\n    }\r\n    catch (e) {\r\n\r\n    }\r\n}\r\n\r\nfunction* teacherDeleteStudent(args) {\r\n    try {\r\n        const {studentCourseIdList} = args.args;\r\n        const formData = new FormData;\r\n        formData.append(\"studentCourseIdList\", studentCourseIdList);\r\n        const res = yield call(Service.post, `teacher/deleteStudentCourses`, formData);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                message.success(\"删除成功~\");\r\n                yield put({\r\n                    type: TEACHER_DELETE_STUDENT_SUCCESS,\r\n                    payload: studentCourseIdList,\r\n                });\r\n                break;\r\n            case -1:\r\n                message.error(\"删除失败！\");\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n    catch (e) {\r\n\r\n    }\r\n}\r\n\r\nexport default function* rootStudentAddCourse() {\r\n    yield takeEvery(STUDENT_ADD_COURSE, studentAddCourse);\r\n    yield takeEvery(TEACHER_ADD_COURSE, teacherAddCourse);\r\n    yield takeEvery(TEACHER_DELETE_COURSE, teacherDeleteCourse);\r\n    yield takeEvery(STUDENT_DELETE_COURSE, studentDeleteCourse);\r\n    yield takeEvery(TEACHER_ADD_REMARK, teacherAddRemark);\r\n    yield takeEvery(TEACHER_RELEASE_TASKS, teacherReleaseTask);\r\n    yield takeEvery(TEACHER_CHECK_STUDENT, teacherCheckStudent);\r\n    yield takeEvery(TEACHER_DELETE_STUDENT, teacherDeleteStudent);\r\n    yield takeEvery(TEACHER_ADD_STUDENT, teacherAddStudent);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}