{"ast":null,"code":"import\"antd/es/table/style/css\";import _Table from\"antd/es/table\";import _toConsumableArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import\"antd/es/input/style/css\";import _Input from\"antd/es/input\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import*as course from\"../redux/actionCreators/resource\";//老师的上机任务显示的第二个界面\nvar Search=_Input.Search;var AllCourse=function AllCourse(props){var type=props.type,userId=props.userId,courseTotal=props.courseTotal,allCourse=props.allCourse,handleTeacherAddCourse=props.handleTeacherAddCourse,handleTeacherQueryCourse=props.handleTeacherQueryCourse;useEffect(function(){handleTeacherQueryCourse({page:1,userId:userId,courseName:''});},[userId]);var _useState=useState({page:1,courseName:'',userId:userId}),_useState2=_slicedToArray(_useState,2),args=_useState2[0],setArgs=_useState2[1];var columns=[{title:'课程名',dataIndex:'courseName',key:'courseName'},{title:'课程编号',dataIndex:'courseNumber',key:'courseNumber'},{title:'发布时间',dataIndex:'addTime',key:'addTime'},{title:'课程处理',key:'addTask',render:function render(e){return/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return handleTeacherAddCourse({courseId:e.id,teacherId:userId,type:type});},style:{color:\"#189EFF\",cursor:\"pointer\"}},\"\\u6DFB\\u52A0\\u8BFE\\u7A0B\");}}];//搜索\nvar handleSearch=function handleSearch(value){setArgs(_objectSpread(_objectSpread({},args),{},{page:1,courseName:value}));handleTeacherQueryCourse(_objectSpread(_objectSpread({},args),{},{page:1,courseName:value}));};//翻页\nvar changePage=function changePage(page){setArgs(_objectSpread(_objectSpread({},args),{},{page:page}));handleTeacherQueryCourse(_objectSpread(_objectSpread({},args),{},{page:page}));};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{width:'15rem'}},/*#__PURE__*/React.createElement(Search,{enterButton:true,onSearch:handleSearch})),/*#__PURE__*/React.createElement(_Table,{width:1024,rowKey:function rowKey(record){return record.id;},columns:columns,dataSource:_toConsumableArray(allCourse),pagination:{current:args.page,total:courseTotal,onChange:changePage}}));};export default connect(function(state){return{userId:state.getIn([\"userMana\",\"common\",\"userId\"]),courseTotal:state.getIn([\"course\",\"courseTotal\"]),allCourse:state.getIn([\"course\",\"allCourse\"]),type:state.getIn([\"userMana\",\"common\",\"type\"])};},function(dispatch){return{handleTeacherAddCourse:function handleTeacherAddCourse(args){dispatch(course.teacherAddCourse(args));},handleTeacherQueryCourse:function handleTeacherQueryCourse(args){dispatch(course.teacherQueryCourse(args));}};})(AllCourse);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/components/AllCourse.js"],"names":["React","useEffect","useState","connect","course","Search","AllCourse","props","type","userId","courseTotal","allCourse","handleTeacherAddCourse","handleTeacherQueryCourse","page","courseName","args","setArgs","columns","title","dataIndex","key","render","e","courseId","id","teacherId","color","cursor","handleSearch","value","changePage","width","record","current","total","onChange","state","getIn","dispatch","teacherAddCourse","teacherQueryCourse"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport { connect } from \"react-redux\"\r\nimport {Table, Input} from \"antd\";\r\nimport * as course from \"../redux/actionCreators/resource\";\r\n//老师的上机任务显示的第二个界面\r\n\r\nconst { Search } = Input;\r\n\r\nconst AllCourse = props => {\r\n    const { type, userId, courseTotal, allCourse, handleTeacherAddCourse, handleTeacherQueryCourse } = props;\r\n    useEffect(()=>{\r\n        handleTeacherQueryCourse({page: 1, userId: userId, courseName: ''});\r\n    },[userId]);\r\n    const [args, setArgs] = useState({page: 1, courseName: '', userId});\r\n\r\n    const columns = [\r\n        { title: '课程名', dataIndex: 'courseName', key: 'courseName' },\r\n        { title: '课程编号', dataIndex: 'courseNumber', key: 'courseNumber' },\r\n        { title: '发布时间', dataIndex: 'addTime', key: 'addTime' },\r\n            {\r\n                title: '课程处理',\r\n                key: 'addTask',\r\n                render: (e) => (\r\n                    <span\r\n                        onClick={() =>(\r\n                            handleTeacherAddCourse({\r\n                                courseId: e.id,\r\n                                teacherId: userId,\r\n                                type: type,\r\n                            })\r\n                        )}\r\n                        style={{color: \"#189EFF\", cursor: \"pointer\"}}\r\n                    >\r\n                        添加课程\r\n                    </span>\r\n                )\r\n            }\r\n    ];\r\n    //搜索\r\n    const handleSearch = (value) => {\r\n        setArgs({\r\n            ...args,\r\n            page: 1,\r\n            courseName: value\r\n        })\r\n        handleTeacherQueryCourse({\r\n            ...args,\r\n            page: 1,\r\n            courseName: value\r\n        })\r\n    }\r\n    //翻页\r\n    const changePage = (page) => {\r\n        setArgs({\r\n            ...args,\r\n            page: page\r\n        })\r\n        handleTeacherQueryCourse({\r\n            ...args,\r\n            page: page\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div style={{width: '15rem'}}>\r\n                <Search\r\n                    enterButton\r\n                    onSearch={handleSearch}\r\n                />\r\n            </div>\r\n            <Table\r\n                width={1024}\r\n                rowKey={record => record.id}\r\n                columns={columns}\r\n                dataSource={[...allCourse]}\r\n                pagination={{\r\n                    current: args.page,\r\n                    total: courseTotal,\r\n                    onChange:changePage\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default connect(\r\n    state => ({\r\n        userId: state.getIn([\"userMana\", \"common\", \"userId\"]),\r\n        courseTotal: state.getIn([\"course\", \"courseTotal\"]),\r\n        allCourse: state.getIn([\"course\", \"allCourse\"]),\r\n        type: state.getIn([\"userMana\", \"common\", \"type\"])\r\n\r\n    }),\r\n    dispatch => ({\r\n        handleTeacherAddCourse(args){\r\n            dispatch(course.teacherAddCourse(args));\r\n        },\r\n        handleTeacherQueryCourse(args){\r\n            dispatch(course.teacherQueryCourse(args));\r\n        }\r\n    })\r\n)\r\n(AllCourse);\r\n"]},"metadata":{},"sourceType":"module"}