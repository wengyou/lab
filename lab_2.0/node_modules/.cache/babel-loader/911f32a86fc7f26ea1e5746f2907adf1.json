{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(fetchStudyRes),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(fetchTeacherRes),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(deleteStudyData),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(downloadResource),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(rootResourceSagas);import{takeEvery,call,put}from\"redux-saga/effects\";import{FETCH_STUDY_RES_SUCCESS,FETCH_STUDY_RESOURCE,FETCH_TEACHER_DATA,FETCH_TEACHER_DATA_SUCCESS,DELETE_DATA,DELETE_DATA_SUCCESS,DOWNLOAD_RESOURCE,DOWNLOAD_RESOURCE_SUCCESS}from\"../../../constants/actionTypes\";import Service from\"../../../lib/Service\";import{openNotification}from\"../../../utils/commonFunction\";function fetchStudyRes(data){var _data$args,page,type,resourceName,userName,url,res,resData;return _regeneratorRuntime.wrap(function fetchStudyRes$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_data$args=data.args,page=_data$args.page,type=_data$args.type,resourceName=_data$args.resourceName,userName=_data$args.userName;if(data.args.resourceName!==null){url=\"resource/queryResource?page=\".concat(page,\"&type=\").concat(type,\"&resourceName=\").concat(resourceName);}else if(data.args.userName!==null){url=\"resource/queryResource?page=\".concat(page,\"&type=\").concat(type,\"&userName=\").concat(userName);}else{url=\"resource/queryResource?page=\".concat(page,\"&type=\").concat(type);}_context.next=5;return call(Service.get,url);case 5:res=_context.sent;resData=Object.assign(res.data.data,{type:type,resourceName:resourceName,userName:userName});_context.t0=res.data.error_code;_context.next=_context.t0===0?10:_context.t0===-1?13:_context.t0===1?15:_context.t0===2?17:19;break;case 10:_context.next=12;return put({type:FETCH_STUDY_RES_SUCCESS,payload:resData});case 12:return _context.abrupt(\"break\",20);case 13:openNotification(res.data.message);return _context.abrupt(\"break\",20);case 15:openNotification(res.data.message);return _context.abrupt(\"break\",20);case 17:openNotification(res.data.message);return _context.abrupt(\"break\",20);case 19:return _context.abrupt(\"return\",0);case 20:_context.next=24;break;case 22:_context.prev=22;_context.t1=_context[\"catch\"](0);case 24:case\"end\":return _context.stop();}}},_marked,null,[[0,22]]);}function fetchTeacherRes(data){var _data$args2,page,type,userName,url,res;return _regeneratorRuntime.wrap(function fetchTeacherRes$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_data$args2=data.args,page=_data$args2.page,type=_data$args2.type,userName=_data$args2.userName;url=\"resource/queryResource?page=\".concat(page,\"&type=\").concat(type,\"&userName=\").concat(userName);_context2.next=5;return call(Service.get,url);case 5:res=_context2.sent;_context2.t0=res.data.error_code;_context2.next=_context2.t0===0?9:_context2.t0===-1?12:_context2.t0===1?14:_context2.t0===2?16:18;break;case 9:_context2.next=11;return put({type:FETCH_TEACHER_DATA_SUCCESS,payload:res.data.data});case 11:return _context2.abrupt(\"break\",19);case 12:openNotification(res.data.message);return _context2.abrupt(\"break\",19);case 14:openNotification(res.data.message);return _context2.abrupt(\"break\",19);case 16:openNotification(res.data.message);return _context2.abrupt(\"break\",19);case 18:return _context2.abrupt(\"return\",0);case 19:_context2.next=24;break;case 21:_context2.prev=21;_context2.t1=_context2[\"catch\"](0);console.log(_context2.t1);case 24:case\"end\":return _context2.stop();}}},_marked2,null,[[0,21]]);}function deleteStudyData(args){var _args$args,resourceId,type,userId,formData,resourceIdList,data,res;return _regeneratorRuntime.wrap(function deleteStudyData$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_args$args=args.args,resourceId=_args$args.resourceId,type=_args$args.type,userId=_args$args.userId;formData=new FormData();formData.append('resourceIdList',resourceId);resourceIdList=formData.get('resourceIdList');data={resourceIdList:resourceIdList,type:type,userId:userId};_context3.next=8;return call(Service.post,\"resource/delete\",data);case 8:res=_context3.sent;_context3.t0=res.data.error_code;_context3.next=_context3.t0===0?12:_context3.t0===-1?16:_context3.t0===1?18:_context3.t0===2?20:22;break;case 12:_context3.next=14;return put({type:DELETE_DATA_SUCCESS});case 14:openNotification(res.data.message);return _context3.abrupt(\"break\",23);case 16:openNotification(res.data.message);return _context3.abrupt(\"break\",23);case 18:openNotification(res.data.message);return _context3.abrupt(\"break\",23);case 20:openNotification(res.data.message);return _context3.abrupt(\"break\",23);case 22:openNotification(\"删除失败\");case 23:_context3.next=28;break;case 25:_context3.prev=25;_context3.t1=_context3[\"catch\"](0);console.log(_context3.t1);case 28:case\"end\":return _context3.stop();}}},_marked3,null,[[0,25]]);}function downloadResource(args){var _args$args2,id,type,data,res;return _regeneratorRuntime.wrap(function downloadResource$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_args$args2=args.args,id=_args$args2.id,type=_args$args2.type;data={id:id,type:type};_context4.next=4;return call(Service.post,\"resource/download\",data);case 4:res=_context4.sent;_context4.t0=res.data.error_code;_context4.next=_context4.t0===0?8:_context4.t0===-1?11:_context4.t0===1?13:_context4.t0===2?15:17;break;case 8:_context4.next=10;return put({type:DOWNLOAD_RESOURCE_SUCCESS});case 10:return _context4.abrupt(\"break\",18);case 11:openNotification(res.data.message);return _context4.abrupt(\"break\",18);case 13:openNotification(res.data.message);return _context4.abrupt(\"break\",18);case 15:openNotification(res.data.message);return _context4.abrupt(\"break\",18);case 17:return _context4.abrupt(\"return\",0);case 18:case\"end\":return _context4.stop();}}},_marked4);}export default function rootResourceSagas(){return _regeneratorRuntime.wrap(function rootResourceSagas$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return takeEvery(FETCH_STUDY_RESOURCE,fetchStudyRes);case 2:_context5.next=4;return takeEvery(FETCH_TEACHER_DATA,fetchTeacherRes);case 4:_context5.next=6;return takeEvery(DELETE_DATA,deleteStudyData);case 6:_context5.next=8;return takeEvery(DOWNLOAD_RESOURCE,downloadResource);case 8:case\"end\":return _context5.stop();}}},_marked5);}","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/redux/sagas/resourceSagas/studyResource.js"],"names":["fetchStudyRes","fetchTeacherRes","deleteStudyData","downloadResource","rootResourceSagas","takeEvery","call","put","FETCH_STUDY_RES_SUCCESS","FETCH_STUDY_RESOURCE","FETCH_TEACHER_DATA","FETCH_TEACHER_DATA_SUCCESS","DELETE_DATA","DELETE_DATA_SUCCESS","DOWNLOAD_RESOURCE","DOWNLOAD_RESOURCE_SUCCESS","Service","openNotification","data","args","page","type","resourceName","userName","url","get","res","resData","Object","assign","error_code","payload","message","console","log","resourceId","userId","formData","FormData","append","resourceIdList","post","id"],"mappings":"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","sourcesContent":["import { takeEvery, call, put} from \"redux-saga/effects\";\r\nimport {\r\n    FETCH_STUDY_RES_SUCCESS,\r\n    FETCH_STUDY_RESOURCE,\r\n    FETCH_TEACHER_DATA,\r\n    FETCH_TEACHER_DATA_SUCCESS,\r\n    DELETE_DATA,\r\n    DELETE_DATA_SUCCESS,\r\n    DOWNLOAD_RESOURCE,\r\n    DOWNLOAD_RESOURCE_SUCCESS\r\n} from \"../../../constants/actionTypes\";\r\nimport Service from \"../../../lib/Service\";\r\nimport { openNotification } from \"../../../utils/commonFunction\";\r\n\r\nfunction *fetchStudyRes(data) {\r\n    try {\r\n        const {page, type, resourceName, userName} = data.args;\r\n        let url;\r\n        if (data.args.resourceName !== null) {\r\n            url = `resource/queryResource?page=${page}&type=${type}&resourceName=${resourceName}`;\r\n        } else if (data.args.userName !== null) {\r\n            url = `resource/queryResource?page=${page}&type=${type}&userName=${userName}`;\r\n        } else {\r\n            url = `resource/queryResource?page=${page}&type=${type}`;\r\n        }\r\n        const res = yield call(Service.get, url);\r\n        const resData = Object.assign(res.data.data, {type,resourceName,userName});\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: FETCH_STUDY_RES_SUCCESS,\r\n                    payload: resData,\r\n                });\r\n                break;\r\n            case -1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 2:\r\n                openNotification(res.data.message);\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    } catch (e) {\r\n\r\n    }\r\n}\r\n\r\nfunction *fetchTeacherRes(data) {\r\n    try{\r\n        const {page, type, userName} = data.args;\r\n        let url = `resource/queryResource?page=${page}&type=${type}&userName=${userName}`;\r\n        const res = yield call(Service.get, url);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: FETCH_TEACHER_DATA_SUCCESS,\r\n                    payload: res.data.data\r\n                });\r\n                break;\r\n            case -1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 2:\r\n                openNotification(res.data.message);\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    } catch (e) {\r\n        console.log(e)\r\n    }\r\n\r\n}\r\n\r\nfunction *deleteStudyData(args) {\r\n    try{\r\n        const {resourceId, type, userId} = args.args;\r\n        let formData = new FormData();\r\n        formData.append('resourceIdList',resourceId);\r\n        const resourceIdList = formData.get('resourceIdList');\r\n        const data = {resourceIdList, type, userId};\r\n        const res = yield call(Service.post, \"resource/delete\", data);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: DELETE_DATA_SUCCESS,\r\n                });\r\n                openNotification(res.data.message);\r\n                break;\r\n            case -1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 2:\r\n                openNotification(res.data.message);\r\n                break;\r\n            default:\r\n                openNotification(\"删除失败\");\r\n        }\r\n    }catch (e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nfunction *downloadResource(args) {\r\n    const {id, type } = args.args;\r\n    const data = {id, type };\r\n    const res = yield call(Service.post, \"resource/download\", data);\r\n    switch (res.data.error_code) {\r\n        case 0:\r\n            yield put({\r\n                type: DOWNLOAD_RESOURCE_SUCCESS\r\n            });\r\n            break;\r\n        case -1:\r\n            openNotification(res.data.message);\r\n            break;\r\n        case 1:\r\n            openNotification(res.data.message);\r\n            break;\r\n        case 2:\r\n            openNotification(res.data.message);\r\n            break;\r\n        default:\r\n            return 0;\r\n    }\r\n}\r\n\r\nexport default function *rootResourceSagas() {\r\n    yield takeEvery(FETCH_STUDY_RESOURCE, fetchStudyRes);\r\n    yield takeEvery(FETCH_TEACHER_DATA, fetchTeacherRes);\r\n    yield takeEvery(DELETE_DATA, deleteStudyData);\r\n    yield takeEvery(DOWNLOAD_RESOURCE, downloadResource);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}