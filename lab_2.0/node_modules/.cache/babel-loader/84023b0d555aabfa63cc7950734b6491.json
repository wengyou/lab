{"ast":null,"code":"import _defineProperty from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import\"antd/es/upload/style/css\";import _Upload from\"antd/es/upload\";import\"antd/es/input/style/css\";import _Input from\"antd/es/input\";import _toConsumableArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import\"antd/es/button/style/css\";import _Button from\"antd/es/button\";import\"antd/es/icon/style/css\";import _Icon from\"antd/es/icon\";import _objectSpread from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import\"antd/es/table/style/css\";import _Table from\"antd/es/table\";import\"antd/es/message/style/css\";import _message from\"antd/es/message\";import _slicedToArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import\"antd/es/modal/style/css\";import _Modal from\"antd/es/modal\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import*as course from\"../redux/actionCreators/resource\";import{export_json_to_excel2}from\"../lib/Export2Excel\";import AllCourse from\"./AllCourse\";import AddStudents from\"./addStudents\";var confirm=_Modal.confirm;//教师任务的第一个\nvar TeacherTasks=function TeacherTasks(props){var type=props.type,userId=props.userId,submitTotal=props.submitTotal,submitList=props.submitList,downloadUrl=props.downloadUrl,unSubmitList=props.unSubmitList,courseTask=props.courseTask,myCourse=props.myCourse,teacherUploadFlag=props.teacherUploadFlag,teacherUpdateFlag=props.teacherUpdateFlag,handleAddRemark=props.handleAddRemark,handleMyCourseRes=props.handleMyCourseRes,studentCourseList=props.studentCourseList,handleFetchTaskRes=props.handleFetchTaskRes,handleTeacherDeleteCourse=props.handleTeacherDeleteCourse,handleTeacherReleaseTask=props.handleTeacherReleaseTask,handleTeacherDeleteTask=props.handleTeacherDeleteTask,handleToggleUpload=props.handleToggleUpload,handleTeacherQuerySubmit=props.handleTeacherQuerySubmit,handleTeacherQueryUnsubmit=props.handleTeacherQueryUnsubmit,handleTeacherUpdateTask=props.handleTeacherUpdateTask,handleTeacherDownloadSubmit=props.handleTeacherDownloadSubmit,handleDeleteStudentCourse=props.handleDeleteStudentCourse,handleCheckStudent=props.handleCheckStudent;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),releaseVisible=_useState2[0],setReleaseVisible=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),remarkVisible=_useState4[0],setRemarkVisible=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),textVisible=_useState6[0],setTextVisible=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),updateVisible=_useState8[0],setUpdateVisible=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),unSubmitVisible=_useState10[0],setUnSubmitVisible=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),submitVisible=_useState12[0],setSubmitVisible=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),downloadVisible=_useState14[0],setDownloadVisible=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),checkStudentVisible=_useState16[0],setCheckStudentVisible=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),addCourseVisible=_useState18[0],setAddCourseVisible=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),addStudentVisible=_useState20[0],setAddStudentVisible=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),teacherCourseId=_useState22[0],setTeacherCourseId=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),taskName=_useState24[0],setTaskName=_useState24[1];var _useState25=useState(),_useState26=_slicedToArray(_useState25,2),taskId=_useState26[0],setTaskId=_useState26[1];var _useState27=useState(''),_useState28=_slicedToArray(_useState27,2),userIdList=_useState28[0],setUserIdList=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),updateName=_useState30[0],setUpdateName=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),remark=_useState32[0],setRemark=_useState32[1];var _useState33=useState([]),_useState34=_slicedToArray(_useState33,2),files=_useState34[0],setFiles=_useState34[1];var _useState35=useState([]),_useState36=_slicedToArray(_useState35,2),updateFiles=_useState36[0],setUpdateFiles=_useState36[1];var _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),uploadLoading=_useState38[0],setUploadLoading=_useState38[1];var _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),updateLoading=_useState40[0],setUpdateLoading=_useState40[1];var _useState41=useState(false),_useState42=_slicedToArray(_useState41,2),uploadBtn=_useState42[0],setUploadBtn=_useState42[1];var _useState43=useState(false),_useState44=_slicedToArray(_useState43,2),updateBtn=_useState44[0],setUpdateBtn=_useState44[1];var _useState45=useState({page:1,rows:10}),_useState46=_slicedToArray(_useState45,2),checkSubmit=_useState46[0],setCheckSubmit=_useState46[1];useEffect(function(){handleMyCourseRes({userId:userId,type:type});},[]);useEffect(function(){setReleaseVisible(false);setUploadLoading(false);setUploadBtn(false);},[teacherUploadFlag]);useEffect(function(){setUpdateVisible(false);setUpdateLoading(false);setUpdateBtn(false);},[teacherUpdateFlag]);//删除课程或任务时弹出的确认框\nvar deleteConfirm=function deleteConfirm(e,action){confirm({title:\"请确认~\",content:action==='deleteTask'?'删除将会移除所有学生作业，无法撤销，您确定吗？':'删除该实验课程，会删除和该课程相关的作业及实验任务附件，您确定吗？',onOk:function onOk(){action===\"deleteTask\"?handleTeacherDeleteTask({taskId:e.id,teacherCourseId:e.teacherCourseId}):handleTeacherDeleteCourse({id:e.teacherCourseId,userId:userId,teacherCourseId:e.teacherCourseId});},onCancel:function onCancel(){}});};//实现手动上传文件后发布任务\nvar handleUpload=function handleUpload(){if(taskName&&taskName.trim().length!==0){handleTeacherReleaseTask(files.length>0?{teacherCourseId:teacherCourseId,userId:userId,taskName:taskName,file:files[0],courseTask:courseTask}:{teacherCourseId:teacherCourseId,userId:userId,taskName:taskName,file:\"\",courseTask:courseTask});setTaskName(\"\");setFiles([]);}else{_message.error(\"任务名不能为空哦！\");setUploadLoading(false);}};var handleUpdate=function handleUpdate(){if(updateName&&updateName.trim().length!==0){handleTeacherUpdateTask({id:taskId,taskName:updateName,file:updateFiles[0],teacherCourseId:teacherCourseId,userId:userId});setUpdateFiles([]);setTaskName(\"\");}else{_message.error(\"任务名不能为空哦！\");setUpdateLoading(false);}};//添加/修改教学班备注\nvar addRemark=function addRemark(){handleAddRemark({teacherCourseId:teacherCourseId,remark:remark});setTimeout(function(){setRemarkVisible(!remarkVisible);setRemark(\"\");},1000);};//点击那个加号展开实验任务详情\nvar _expandedRowRender=function expandedRowRender(record){var columns=[{title:'任务名称',width:\"18%\",dataIndex:'taskName',key:'taskName',align:'center'},{title:'任务附件',key:'taskFileName',align:'center',width:\"18%\",render:function render(e){return/*#__PURE__*/React.createElement(\"a\",{download:\"\",href:e.url},e.taskFileName);}},{title:'发布时间',dataIndex:'addTime',key:'addTime',align:'center'},{title:'学生作业',key:'studentWork',align:'center',render:function render(e){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{style:{color:\"#189EFF\",cursor:\"pointer\",padding:\"0 0.375rem\"},onClick:function onClick(){return checkWorks(e);}},\"\\u67E5\\u770B\\u4F5C\\u4E1A\"),/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){handleToggleUpload({taskId:e.id,teacherCourseId:e.teacherCourseId});},style:{color:e.closed?\"darkBlue\":\"#B30000\",cursor:\"pointer\",padding:\"0 0.375rem\"}},e.closed?\"开启作业提交\":\"关闭作业提交\"),/*#__PURE__*/React.createElement(\"span\",{style:{color:\"#189EFF\",cursor:\"pointer\",padding:\"0 0.375rem\"},onClick:function onClick(){setUnSubmitVisible(!unSubmitVisible);handleTeacherQueryUnsubmit({teacherCourseId:e.teacherCourseId,taskId:e.id});}},\"\\u672A\\u63D0\\u4EA4\\u540D\\u5355\"));}},{title:'任务处理',key:\"dealTask\",align:'center',render:function render(e){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){setUpdateVisible(!updateVisible);setUpdateName(e.taskName);setTaskId(e.id);setTeacherCourseId(e.teacherCourseId);},style:{color:\"#189EFF\",cursor:\"pointer\"}},\"\\u4FEE\\u6539\\u4EFB\\u52A1\"),/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return deleteConfirm(e,\"deleteTask\");},style:{color:\"#B30000\",cursor:\"pointer\",padding:\"0 0.375rem\"}},\"\\u5220\\u9664\\u4EFB\\u52A1\"));}}];var el=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(_Table,{size:'small',rowKey:function rowKey(e){return e.id;},columns:columns,dataSource:courseTask[record.teacherCourseId],pagination:false}));return el;};//删除学生\nvar deleteStudent=function deleteStudent(e){confirm({title:'将删除学生上传到该任务的所有作业，请下载该学生的作业备份再删除',onOk:function onOk(){handleDeleteStudentCourse({studentCourseIdList:e.studentCourseId});},onCancel:function onCancel(){}});};//导出学生\nvar exportStudent=function exportStudent(){var tHeader=['学生姓名','学号'];var filterVal=['userName','userId'];export_json_to_excel2(tHeader,studentCourseList,filterVal,'选课学生信息');};//下载作业\nvar downloadWorks=function downloadWorks(type){if(type==='part'){if(userIdList.length!==0){var hide=_message.loading('文件正在打包中，请耐心等待～',0);handleTeacherDownloadSubmit({userIdList:userIdList,taskId:taskId,callback:function callback(e){return setDownloadVisible(e);},hide:hide});}else{_message.error('您还没有选择要下载的作业哦～');}}else if(type==='all'){var _hide=_message.loading('若文件体积过大，可能需要较长时间哦，请耐心等待～',0);handleTeacherDownloadSubmit({userIdList:'',taskId:taskId,callback:function callback(e){return setDownloadVisible(e);},hide:_hide});}};//查看学生作业\nvar checkWorks=function checkWorks(e){setUserIdList('');setCheckSubmit(_objectSpread(_objectSpread({},checkSubmit),{},{taskId:e.id}));handleTeacherQuerySubmit(_objectSpread(_objectSpread({},checkSubmit),{},{taskId:e.id}));setSubmitVisible(true);setTaskId(e.id);};//查看学生作业中的翻页\nvar changePage=function changePage(e){setCheckSubmit(_objectSpread(_objectSpread({},checkSubmit),{},{page:e}));handleTeacherQuerySubmit(_objectSpread(_objectSpread({},checkSubmit),{},{page:e}));};//改变学生作业中每页显示数量\nvar onShowSizeChange=function onShowSizeChange(current,pageSize){setCheckSubmit(_objectSpread(_objectSpread({},checkSubmit),{},{page:1,rows:pageSize}));handleTeacherQuerySubmit(_objectSpread(_objectSpread({},checkSubmit),{},{page:1,rows:pageSize}));};var columns=[{title:'实验课程',dataIndex:'courseName',key:'courseName',align:'center'},{title:'教学班编号',dataIndex:'teacherCourseId',key:'teacherCourseId',align:'center'},{title:'教学班备注',key:'remark',align:'center',render:function render(e){return/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){setTeacherCourseId(e.teacherCourseId);setRemarkVisible(!remarkVisible);setRemark(e.remark);},style:{color:e.remark?\"#F0BB04\":\"#189EFF\",cursor:\"pointer\"}},e.remark?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"padding_row_xxs\",style:{color:'rgba(0, 0, 0, 0.65)'}},e.remark.length>10?e.remark.substr(0,10)+'...':e.remark),\"\\u4FEE\\u6539\"):/*#__PURE__*/React.createElement(\"div\",null,\"\\u6DFB\\u52A0\"));}},{title:'课程编号',dataIndex:'courseNumber',key:'courseNumber',align:'center'},{title:'添加时间',dataIndex:'addTime',key:'addTime',align:'center'},{title:'课程处理',key:\"dealCourse\",align:'center',render:function render(e){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){setTeacherCourseId(e.teacherCourseId);setReleaseVisible(true);},style:{color:\"#189EFF\",cursor:\"pointer\"}},\"\\u53D1\\u5E03\\u4EFB\\u52A1\"),/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return deleteConfirm(e,\"deleteCourse\");},style:{color:\"#B30000\",cursor:\"pointer\",padding:\"0 0.375rem\"}},\"\\u5220\\u9664\\u8BFE\\u7A0B\"),/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){setTeacherCourseId(e.teacherCourseId);handleCheckStudent({teacherCourseId:e.teacherCourseId});setCheckStudentVisible(true);},style:{color:\"#F0BB04\",cursor:\"pointer\",padding:\"0 0.375rem\"}},\"\\u5B66\\u751F\\u4FE1\\u606F\"));}}];var releaseProps={beforeUpload:function beforeUpload(file){files.push(file);files.length>0?setUploadBtn(true):setUploadBtn(false);return false;},onRemove:function onRemove(file){var index=files.indexOf(file.originFileObj);files.splice(index,1);files.length>0?setUploadBtn(true):setUploadBtn(false);}};var updateProps={beforeUpload:function beforeUpload(file){updateFiles.push(file);updateFiles.length>0?setUpdateBtn(true):setUpdateBtn(false);return false;},onRemove:function onRemove(file){var index=updateFiles.indexOf(file.originFileObj);updateFiles.splice(index,1);updateFiles.length>0?setUpdateBtn(true):setUpdateBtn(false);}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(_Button,{onClick:function onClick(){setAddCourseVisible(true);},type:\"primary\",className:\"margin_column_xxs\"},/*#__PURE__*/React.createElement(_Icon,{type:'plus'}),\"\\u6DFB\\u52A0\"),/*#__PURE__*/React.createElement(_Table,{rowKey:function rowKey(record){return record.teacherCourseId;},size:'small',columns:columns,expandedRowRender:function expandedRowRender(record){return _expandedRowRender(record);},onExpand:function onExpand(expanded,record){expanded&&handleFetchTaskRes({teacherCourseId:record.teacherCourseId,courseTask:courseTask});},dataSource:_toConsumableArray(myCourse),pagination:false}),/*#__PURE__*/React.createElement(_Modal,{width:'64rem',title:\"\\u6DFB\\u52A0\\u8BFE\\u7A0B\",visible:addCourseVisible,footer:null,onCancel:function onCancel(){setAddCourseVisible(false);}},/*#__PURE__*/React.createElement(AllCourse,null)),/*#__PURE__*/React.createElement(_Modal,{title:\"\\u53D1\\u5E03\\u5B9E\\u9A8C\\u4EFB\\u52A1\\u53CA\\u4E0A\\u4F20\\u9644\\u4EF6\",visible:releaseVisible,onCancel:function onCancel(){setReleaseVisible(false);setUploadLoading(false);setFiles([]);setTaskName(\"\");},footer:[/*#__PURE__*/React.createElement(_Button,{onClick:function onClick(){setReleaseVisible(!releaseVisible);setUploadLoading(false);setUploadBtn(false);setFiles([]);setTaskName(\"\");}},\"\\u53D6\\u6D88\")],destroyOnClose:true},/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",marginBottom:\"0.75rem\"}},/*#__PURE__*/React.createElement(_Input,{style:{width:\"75%\"},value:taskName,placeholder:\"请输入任务名称\",onChange:function onChange(e){setTaskName(e.target.value);}}),/*#__PURE__*/React.createElement(_Button,{style:{marginLeft:\"0.75rem\"},type:\"primary\",loading:uploadLoading,onClick:function onClick(){if(files.length<=1){setUploadLoading(true);handleUpload();}else{_message.error(\"只能上传一个附件!\");}}},\"\\u53D1\\u5E03\\u4EFB\\u52A1\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\"}},/*#__PURE__*/React.createElement(_Upload,releaseProps,/*#__PURE__*/React.createElement(_Button,{disabled:uploadBtn,onClick:function onClick(){return setTextVisible(false);},style:{marginRight:\"0.625rem\"}},/*#__PURE__*/React.createElement(_Icon,{type:\"upload\"}),\"\\u9009\\u62E9\\u6587\\u4EF6\")),/*#__PURE__*/React.createElement(\"p\",{style:{display:textVisible?\"\":\"none\"}},textVisible?'(注：上传的文件将覆盖原有文件！)':'可不上传文件直接发布任务')),/*#__PURE__*/React.createElement(\"div\",{className:\"fontC_red fontS_12 padding_column_xxs\"},\"\\u53D1\\u5E03\\u7684\\u4EFB\\u52A1\\u548C\\u4E0A\\u4F20\\u5230\\u8BE5\\u4EFB\\u52A1\\u7684\\u4F5C\\u4E1A\\uFF0C\\u5C06\\u4E8E\\u6BCF\\u5E748\\u67081\\u65E5\\u6E05\\u7A7A\\uFF0C\\u8BF7\\u8001\\u5E08\\u53CA\\u65F6\\u5907\\u4EFD\\u3002\"))),/*#__PURE__*/React.createElement(_Modal,{rowKey:function rowKey(e){return e.id;},title:\"\\u4FEE\\u6539\\u4EFB\\u52A1\",visible:updateVisible,onCancel:function onCancel(){setUpdateVisible(!updateVisible);setUpdateLoading(false);setUpdateBtn(false);setUpdateFiles([]);},footer:[/*#__PURE__*/React.createElement(_Button,{disabled:updateBtn,onClick:function onClick(){setUpdateVisible(!updateVisible);setUpdateLoading(false);}},\"\\u53D6\\u6D88\")],destroyOnClose:true},/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",marginBottom:\"0.75rem\"}},/*#__PURE__*/React.createElement(_Input,{style:{width:\"75%\"},value:updateName,onChange:function onChange(e){setUpdateName(e.target.value);}}),/*#__PURE__*/React.createElement(_Button,{loading:updateLoading,style:{marginLeft:\"0.75rem\"},type:\"primary\",onClick:function onClick(){setUpdateLoading(true);handleUpdate();}},\"\\u786E\\u8BA4\\u4FEE\\u6539\")),/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\"}},/*#__PURE__*/React.createElement(_Upload,Object.assign({},updateProps,{showUploadList:true,multiple:true}),/*#__PURE__*/React.createElement(_Button,{disabled:updateBtn,onClick:function onClick(){return setTextVisible(false);},style:{marginRight:\"0.625rem\"}},/*#__PURE__*/React.createElement(_Icon,{type:\"upload\"}),\"\\u9009\\u62E9\\u6587\\u4EF6\")),/*#__PURE__*/React.createElement(\"p\",{style:{display:textVisible?\"\":\"none\"}},\"(\\u6CE8\\uFF1A\\u53EF\\u4E0D\\u4E0A\\u4F20\\u6587\\u4EF6\\u76F4\\u63A5\\u53D1\\u5E03\\u4EFB\\u52A1~)\"))),/*#__PURE__*/React.createElement(_Modal,{title:\"\".concat(remark?\"修改\":\"添加\",\"\\u5907\\u6CE8\"),visible:remarkVisible,footer:null,onCancel:function onCancel(){return setRemarkVisible(!remarkVisible);}},/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\"}},/*#__PURE__*/React.createElement(_Input,{style:{marginRight:\"0.8125rem\"},placeholder:\"\".concat(remark?remark:\"请输入内容（如：班级代码、专业等）\"),value:remark,onChange:function onChange(e){setRemark(e.target.value);}}),/*#__PURE__*/React.createElement(_Button,{type:\"primary\",onClick:function onClick(){return addRemark();}},\"\\u786E\\u8BA4\"))),/*#__PURE__*/React.createElement(_Modal,{title:\"\\u672A\\u63D0\\u4EA4\\u4F5C\\u4E1A\\u540D\\u5355\",visible:unSubmitVisible,footer:null,onCancel:function onCancel(){setUnSubmitVisible(!unSubmitVisible);}},/*#__PURE__*/React.createElement(_Table,{rowKey:function rowKey(e){return e.studentId;},size:\"small\",dataSource:_toConsumableArray(unSubmitList),columns:[{title:\"学生姓名\",dataIndex:\"userName\",key:\"userName\"},{title:\"学生学号\",dataIndex:\"userId\",key:\"userId\"}],pagination:false})),/*#__PURE__*/React.createElement(_Modal,_defineProperty({title:\"\\u9009\\u8BFE\\u5B66\\u751F\\u4FE1\\u606F\",visible:checkStudentVisible,footer:null,onCancel:function onCancel(){setCheckStudentVisible(false);}},\"footer\",[/*#__PURE__*/React.createElement(_Button,{onClick:function onClick(){setAddStudentVisible(true);}},\"\\u6DFB\\u52A0\"),/*#__PURE__*/React.createElement(_Button,{type:\"primary\",onClick:exportStudent},\"\\u5BFC\\u51FA\")]),/*#__PURE__*/React.createElement(_Table,{rowKey:function rowKey(e){return e.userId;},size:\"small\",dataSource:_toConsumableArray(studentCourseList),columns:[{title:\"学生姓名\",dataIndex:\"userName\",key:\"userName\"},{title:\"学生学号\",dataIndex:\"userId\",key:\"userId\"},{title:\"操作\",key:\"operate\",render:function render(e){return/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return deleteStudent(e);},style:{color:\"#B30000\",cursor:\"pointer\",padding:\"0 0.375rem\"}},\"\\u5220\\u9664\");}}],pagination:false})),/*#__PURE__*/React.createElement(_Modal,{title:\"请确认！\",width:\"15rem\",visible:downloadVisible,footer:/*#__PURE__*/React.createElement(\"a\",{download:\"\",href:downloadUrl},/*#__PURE__*/React.createElement(_Button,{type:\"primary\",onClick:function onClick(){return setDownloadVisible(false);}},\"\\u786E\\u5B9A\")),onCancel:function onCancel(){return setDownloadVisible(!downloadVisible);}},\"\\u70B9\\u51FB\\u786E\\u8BA4\\u6309\\u94AE\\u5373\\u53EF\\u5F00\\u59CB\\u4E0B\\u8F7D\\uFF5E\"),/*#__PURE__*/React.createElement(_Modal,{title:\"\\u5DF2\\u63D0\\u4EA4\\u4F5C\\u4E1A\\u4FE1\\u606F\",visible:submitVisible,width:\"64rem\",onCancel:function onCancel(){return setSubmitVisible(!submitVisible);},footer:null},/*#__PURE__*/React.createElement(_Button,{className:\"margin_row_xxs\",onClick:function onClick(){return downloadWorks('part');},type:\"primary\"},/*#__PURE__*/React.createElement(_Icon,{type:\"download\"}),\"\\u9009\\u62E9\\u4E0B\\u8F7D\"),/*#__PURE__*/React.createElement(_Button,{onClick:function onClick(){return downloadWorks('all');},type:\"primary\"},/*#__PURE__*/React.createElement(_Icon,{type:\"download\"}),\"\\u5168\\u90E8\\u4E0B\\u8F7D\"),/*#__PURE__*/React.createElement(_Table,{rowKey:function rowKey(e){return e.id;},pagination:{current:checkSubmit.page,total:submitTotal,showSizeChanger:true,onShowSizeChange:onShowSizeChange,onChange:changePage},rowSelection:{onChange:function onChange(selectedRowKeys,selectedRows){//setStartDownload(selectedRows);\nvar studentIdList=selectedRows.map(function(e){return e.studentId;});var idList=Array.from(new Set(studentIdList));setUserIdList(idList.join(\";\"));}},dataSource:_toConsumableArray(submitList),columns:[{title:\"学生姓名\",dataIndex:\"userName\",key:\"userName\"},{title:\"学号\",dataIndex:\"studentId\",key:\"studentId\"},{title:\"作业名称\",key:\"workName\",render:function render(e){return/*#__PURE__*/React.createElement(\"a\",{href:e.url},e.workName);}},{title:\"上传时间\",dataIndex:\"addTime\",key:\"addTime\"}]})),/*#__PURE__*/React.createElement(AddStudents,{addStudentVisible:addStudentVisible,visibleCallback:function visibleCallback(e){return setAddStudentVisible(e);},teacherCourseId:teacherCourseId}));};export default connect(function(state){return{userId:state.getIn([\"userMana\",\"common\",\"userId\"]),type:state.getIn([\"userMana\",\"common\",\"type\"]),myCourse:state.getIn([\"course\",\"myCourse\"]),courseTask:state.getIn([\"course\",\"courseTask\"]),unSubmitList:state.getIn([\"course\",\"unsubmitList\"]),submitList:state.getIn([\"course\",\"submitList\"]),submitTotal:state.getIn([\"course\",\"submitTotal\"]),downloadUrl:state.getIn([\"course\",\"downloadUrl\"]),studentCourseList:state.getIn([\"course\",\"studentCourseList\"]),studentCourseTotal:state.getIn([\"course\",\"studentCourseTotal\"]),teacherUploadFlag:state.getIn([\"course\",\"teacherUploadFlag\"]),teacherUpdateFlag:state.getIn([\"course\",\"teacherUpdateFlag\"])};},function(dispatch){return{handleMyCourseRes:function handleMyCourseRes(args){dispatch(course.queryMyCourse(args));},handleFetchTaskRes:function handleFetchTaskRes(teacherCourseId,courseTask){dispatch(course.fetchCourseTask(teacherCourseId,courseTask));},handleTeacherDeleteCourse:function handleTeacherDeleteCourse(args){dispatch(course.teacherDeleteCourse(args));},handleTeacherReleaseTask:function handleTeacherReleaseTask(args){dispatch(course.teacherReleaseTask(args));},handleTeacherUpdateTask:function handleTeacherUpdateTask(args){dispatch(course.teacherUpdateTask(args));},handleAddRemark:function handleAddRemark(args){dispatch(course.teacherAddRemark(args));},handleTeacherDeleteTask:function handleTeacherDeleteTask(args){dispatch(course.teacherDeleteTask(args));},handleToggleUpload:function handleToggleUpload(args){dispatch(course.teacherToggleUpload(args));},handleTeacherQueryUnsubmit:function handleTeacherQueryUnsubmit(args){dispatch(course.teacherQueryUnsubmit(args));},handleTeacherQuerySubmit:function handleTeacherQuerySubmit(taskId){dispatch(course.teacherQuerySubmit(taskId));},handleTeacherDownloadSubmit:function handleTeacherDownloadSubmit(args){dispatch(course.teacherDownloadSubmit(args));},handleDeleteStudentCourse:function handleDeleteStudentCourse(args){dispatch(course.teacherDeleteStudent(args));},handleCheckStudent:function handleCheckStudent(args){dispatch(course.teacherCheckStudent(args));}};})(TeacherTasks);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/components/TeacherTasks.js"],"names":["React","useEffect","useState","connect","course","export_json_to_excel2","AllCourse","AddStudents","confirm","TeacherTasks","props","type","userId","submitTotal","submitList","downloadUrl","unSubmitList","courseTask","myCourse","teacherUploadFlag","teacherUpdateFlag","handleAddRemark","handleMyCourseRes","studentCourseList","handleFetchTaskRes","handleTeacherDeleteCourse","handleTeacherReleaseTask","handleTeacherDeleteTask","handleToggleUpload","handleTeacherQuerySubmit","handleTeacherQueryUnsubmit","handleTeacherUpdateTask","handleTeacherDownloadSubmit","handleDeleteStudentCourse","handleCheckStudent","releaseVisible","setReleaseVisible","remarkVisible","setRemarkVisible","textVisible","setTextVisible","updateVisible","setUpdateVisible","unSubmitVisible","setUnSubmitVisible","submitVisible","setSubmitVisible","downloadVisible","setDownloadVisible","checkStudentVisible","setCheckStudentVisible","addCourseVisible","setAddCourseVisible","addStudentVisible","setAddStudentVisible","teacherCourseId","setTeacherCourseId","taskName","setTaskName","taskId","setTaskId","userIdList","setUserIdList","updateName","setUpdateName","remark","setRemark","files","setFiles","updateFiles","setUpdateFiles","uploadLoading","setUploadLoading","updateLoading","setUpdateLoading","uploadBtn","setUploadBtn","updateBtn","setUpdateBtn","page","rows","checkSubmit","setCheckSubmit","deleteConfirm","e","action","title","content","onOk","id","onCancel","handleUpload","trim","length","file","error","handleUpdate","addRemark","setTimeout","expandedRowRender","record","columns","width","dataIndex","key","align","render","url","taskFileName","color","cursor","padding","checkWorks","closed","el","deleteStudent","studentCourseIdList","studentCourseId","exportStudent","tHeader","filterVal","downloadWorks","hide","loading","callback","changePage","onShowSizeChange","current","pageSize","substr","releaseProps","beforeUpload","push","onRemove","index","indexOf","originFileObj","splice","updateProps","expanded","display","marginBottom","target","value","marginLeft","alignItems","marginRight","studentId","total","showSizeChanger","onChange","selectedRowKeys","selectedRows","studentIdList","map","idList","Array","from","Set","join","workName","state","getIn","studentCourseTotal","dispatch","args","queryMyCourse","fetchCourseTask","teacherDeleteCourse","teacherReleaseTask","teacherUpdateTask","teacherAddRemark","teacherDeleteTask","teacherToggleUpload","teacherQueryUnsubmit","teacherQuerySubmit","teacherDownloadSubmit","teacherDeleteStudent","teacherCheckStudent"],"mappings":"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","sourcesContent":["\r\nimport React, {useEffect, useState} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Table, Modal, Input, Button, Icon, Upload, message } from \"antd\";\r\nimport * as course from \"../redux/actionCreators/resource\";\r\nimport { export_json_to_excel2 } from \"../lib/Export2Excel\";\r\nimport AllCourse from \"./AllCourse\";\r\nimport AddStudents from \"./addStudents\";\r\n\r\nconst { confirm } = Modal;\r\n//教师任务的第一个\r\nconst TeacherTasks = props => {\r\n    const {\r\n        type, userId, submitTotal, submitList,downloadUrl,unSubmitList,\r\n        courseTask, myCourse, teacherUploadFlag, teacherUpdateFlag,\r\n        handleAddRemark, handleMyCourseRes,studentCourseList,\r\n        handleFetchTaskRes, handleTeacherDeleteCourse,\r\n        handleTeacherReleaseTask, handleTeacherDeleteTask,\r\n        handleToggleUpload, handleTeacherQuerySubmit,\r\n        handleTeacherQueryUnsubmit,handleTeacherUpdateTask,\r\n        handleTeacherDownloadSubmit,handleDeleteStudentCourse,\r\n        handleCheckStudent,\r\n    } = props;\r\n    const [ releaseVisible, setReleaseVisible ] = useState(false);\r\n    const [ remarkVisible, setRemarkVisible ] = useState(false);\r\n    const [ textVisible, setTextVisible ] = useState(true);\r\n    const [ updateVisible, setUpdateVisible ] = useState(false);\r\n    const [ unSubmitVisible, setUnSubmitVisible ] = useState(false);\r\n    const [ submitVisible, setSubmitVisible ] = useState(false);\r\n    const [ downloadVisible, setDownloadVisible ] = useState(false);\r\n    const [ checkStudentVisible, setCheckStudentVisible ] = useState(false);\r\n    const [ addCourseVisible, setAddCourseVisible ] = useState(false);\r\n    const [ addStudentVisible, setAddStudentVisible ] = useState(false);\r\n    const [teacherCourseId, setTeacherCourseId] = useState(\"\");\r\n    const [taskName, setTaskName] = useState(\"\");\r\n    const [taskId, setTaskId] = useState();\r\n    const [userIdList, setUserIdList] = useState('');\r\n    const [updateName, setUpdateName] = useState(\"\");\r\n    const [ remark, setRemark ] = useState(\"\");\r\n    const [files, setFiles] = useState([]);\r\n    const [updateFiles,setUpdateFiles] = useState([]);\r\n    const [uploadLoading, setUploadLoading] = useState(false);\r\n    const [updateLoading, setUpdateLoading] = useState(false);\r\n    const [uploadBtn, setUploadBtn] = useState(false);\r\n    const [updateBtn, setUpdateBtn] = useState(false);\r\n    const [checkSubmit, setCheckSubmit] = useState({page: 1, rows: 10});\r\n    useEffect(()=>{\r\n        handleMyCourseRes({ userId: userId, type:type })\r\n    },[]);\r\n    useEffect(()=>{\r\n        setReleaseVisible(false);\r\n        setUploadLoading(false);\r\n        setUploadBtn(false);\r\n    },[teacherUploadFlag]);\r\n    useEffect(()=>{\r\n        setUpdateVisible(false);\r\n        setUpdateLoading(false);\r\n        setUpdateBtn(false);\r\n    },[teacherUpdateFlag]);\r\n\r\n    //删除课程或任务时弹出的确认框\r\n    const deleteConfirm = (e, action) => {\r\n        confirm({\r\n            title: \"请确认~\",\r\n            content: action === 'deleteTask' ? '删除将会移除所有学生作业，无法撤销，您确定吗？' : '删除该实验课程，会删除和该课程相关的作业及实验任务附件，您确定吗？',\r\n            onOk() {\r\n                action === \"deleteTask\" ?\r\n                        handleTeacherDeleteTask({\r\n                            taskId: e.id,\r\n                            teacherCourseId: e.teacherCourseId\r\n                        })\r\n                    :\r\n                        handleTeacherDeleteCourse({\r\n                            id: e.teacherCourseId,\r\n                            userId: userId,\r\n                            teacherCourseId:e.teacherCourseId\r\n                        })\r\n            },\r\n            onCancel() {}\r\n        })\r\n    };\r\n    //实现手动上传文件后发布任务\r\n    const handleUpload = () => {\r\n        if(taskName && taskName.trim().length !== 0){\r\n            handleTeacherReleaseTask(\r\n                files.length > 0 ?\r\n                {\r\n                    teacherCourseId: teacherCourseId,\r\n                    userId: userId,\r\n                    taskName: taskName,\r\n                    file: files[0],\r\n                    courseTask: courseTask\r\n                }\r\n            :\r\n                    {\r\n                        teacherCourseId: teacherCourseId,\r\n                        userId: userId,\r\n                        taskName: taskName,\r\n                        file: \"\",\r\n                        courseTask: courseTask\r\n                    }\r\n            );\r\n            setTaskName(\"\");\r\n            setFiles([]);\r\n        } else {\r\n            message.error(\"任务名不能为空哦！\");\r\n            setUploadLoading(false);\r\n        }\r\n    };\r\n    const handleUpdate = () => {\r\n        if(updateName && updateName.trim().length !== 0){\r\n            handleTeacherUpdateTask({\r\n                id: taskId,\r\n                taskName: updateName,\r\n                file: updateFiles[0],\r\n                teacherCourseId: teacherCourseId,\r\n                userId: userId\r\n            });\r\n            setUpdateFiles([]);\r\n            setTaskName(\"\");\r\n        }\r\n        else{\r\n            message.error(\"任务名不能为空哦！\");\r\n            setUpdateLoading(false);\r\n\r\n\r\n        }\r\n    };\r\n    //添加/修改教学班备注\r\n    const addRemark = () =>{\r\n        handleAddRemark({\r\n            teacherCourseId: teacherCourseId,\r\n            remark: remark,\r\n        });\r\n        setTimeout(()=>{\r\n            setRemarkVisible(!remarkVisible);\r\n            setRemark(\"\");\r\n        }, 1000 );\r\n    };\r\n    //点击那个加号展开实验任务详情\r\n    const expandedRowRender = record => {\r\n        const columns = [\r\n            { title: '任务名称', width: \"18%\", dataIndex: 'taskName', key: 'taskName', align: 'center' },\r\n            {\r\n                title: '任务附件',\r\n                key: 'taskFileName',\r\n                align: 'center',\r\n                width: \"18%\",\r\n                render: e => (\r\n                    <a download={\"\"} href = {e.url}>{e.taskFileName}</a>\r\n                )\r\n            },\r\n            { title: '发布时间', dataIndex: 'addTime', key: 'addTime', align: 'center' },\r\n            {\r\n                title: '学生作业',\r\n                key: 'studentWork',\r\n                align: 'center',\r\n                render: e => (\r\n                    <div>\r\n                        <span\r\n                            style={{color: \"#189EFF\", cursor: \"pointer\", padding: \"0 0.375rem\"}}\r\n                            onClick={() => checkWorks(e)}\r\n                        >\r\n                            查看作业\r\n                        </span>\r\n                        <span\r\n                            onClick={()=>{\r\n                                handleToggleUpload({\r\n                                    taskId: e.id,\r\n                                    teacherCourseId: e.teacherCourseId,\r\n                                })\r\n                            }}\r\n                            style={{color: e.closed ? \"darkBlue\" : \"#B30000\", cursor: \"pointer\", padding: \"0 0.375rem\"}}\r\n                        >\r\n                            {\r\n                                e.closed ? \"开启作业提交\" : \"关闭作业提交\"\r\n                            }\r\n                        </span>\r\n                        <span\r\n                            style={{color: \"#189EFF\", cursor: \"pointer\", padding: \"0 0.375rem\"}}\r\n                            onClick={()=>{\r\n                                setUnSubmitVisible(!unSubmitVisible);\r\n                                handleTeacherQueryUnsubmit({\r\n                                    teacherCourseId: e.teacherCourseId,\r\n                                    taskId: e.id,\r\n                                });\r\n                            }}\r\n                        >\r\n                            未提交名单\r\n                        </span>\r\n                    </div>\r\n                )\r\n            },\r\n            {\r\n                title: '任务处理',\r\n                key: \"dealTask\",\r\n                align: 'center',\r\n                render: (e)=>(\r\n                    <div>\r\n                    <span\r\n                        onClick = {\r\n                            () => {\r\n                                setUpdateVisible(!updateVisible);\r\n                                setUpdateName(e.taskName);\r\n                                setTaskId(e.id);\r\n                                setTeacherCourseId(e.teacherCourseId);\r\n                            }\r\n                        }\r\n                        style = {{color: \"#189EFF\", cursor: \"pointer\"}}\r\n                    >\r\n                        修改任务\r\n                    </span>\r\n                        <span\r\n                            onClick={()=>deleteConfirm(e, \"deleteTask\")}\r\n                            style={{color: \"#B30000\", cursor: \"pointer\", padding: \"0 0.375rem\"}}\r\n                        >\r\n                        删除任务\r\n                        </span>\r\n                    </div>\r\n                )\r\n            }\r\n        ];\r\n        const el = (\r\n            <>\r\n                <Table\r\n                    size={'small'}\r\n                    rowKey={e => (e.id)}\r\n                    columns={columns}\r\n                    dataSource={courseTask[record.teacherCourseId]}\r\n                    pagination={false}\r\n                />\r\n            </>\r\n        );\r\n        return el;\r\n    };\r\n    //删除学生\r\n    const deleteStudent = (e) => {\r\n        confirm({\r\n            title: '将删除学生上传到该任务的所有作业，请下载该学生的作业备份再删除',\r\n            onOk(){\r\n                handleDeleteStudentCourse({\r\n                    studentCourseIdList: e.studentCourseId,\r\n                });\r\n            },\r\n            onCancel(){\r\n            }\r\n        })\r\n    }\r\n    //导出学生\r\n    const exportStudent = () => {\r\n        const tHeader = ['学生姓名', '学号']\r\n        const filterVal = ['userName', 'userId']\r\n        export_json_to_excel2(tHeader, studentCourseList, filterVal, '选课学生信息')\r\n    }\r\n    //下载作业\r\n    const downloadWorks = (type) =>{\r\n        if(type === 'part'){\r\n            if(userIdList.length !== 0) {\r\n                const hide = message.loading('文件正在打包中，请耐心等待～', 0);\r\n                handleTeacherDownloadSubmit({\r\n                    userIdList: userIdList,\r\n                    taskId: taskId,\r\n                    callback: e => (setDownloadVisible(e)),\r\n                    hide: hide\r\n                });\r\n            } else {\r\n                message.error('您还没有选择要下载的作业哦～')\r\n            }\r\n        } else if(type === 'all') {\r\n            const hide = message.loading('若文件体积过大，可能需要较长时间哦，请耐心等待～', 0);\r\n            handleTeacherDownloadSubmit({\r\n                userIdList: '',\r\n                taskId: taskId,\r\n                callback: e => (setDownloadVisible(e)),\r\n                hide:hide\r\n            });\r\n        }\r\n        }\r\n    //查看学生作业\r\n    const checkWorks = (e)=>{\r\n        setUserIdList('');\r\n        setCheckSubmit(\r\n            {\r\n                ...checkSubmit,\r\n                taskId: e.id\r\n            }\r\n        )\r\n        handleTeacherQuerySubmit({\r\n            ...checkSubmit,\r\n            taskId: e.id\r\n        });\r\n        setSubmitVisible(true);\r\n        setTaskId(e.id);\r\n    }\r\n    //查看学生作业中的翻页\r\n    const changePage = (e) => {\r\n        setCheckSubmit(\r\n            {\r\n                ...checkSubmit,\r\n                page: e\r\n            }\r\n        )\r\n        handleTeacherQuerySubmit({\r\n            ...checkSubmit,\r\n            page: e\r\n        })\r\n\r\n    }\r\n    //改变学生作业中每页显示数量\r\n    const onShowSizeChange = (current, pageSize) => {\r\n        setCheckSubmit(\r\n            {\r\n                ...checkSubmit,\r\n                page: 1,\r\n                rows: pageSize\r\n            }\r\n        )\r\n        handleTeacherQuerySubmit({\r\n            ...checkSubmit,\r\n            page: 1,\r\n            rows: pageSize\r\n        })\r\n    }\r\n\r\n\r\n    const columns = [\r\n        { title: '实验课程', dataIndex: 'courseName', key: 'courseName',align: 'center', },\r\n        { title: '教学班编号', dataIndex: 'teacherCourseId', key: 'teacherCourseId', align: 'center', },\r\n        {\r\n            title: '教学班备注',\r\n            key: 'remark',\r\n            align: 'center',\r\n            render: e => (\r\n                <div\r\n                    onClick = {\r\n                        ()=>{\r\n                            setTeacherCourseId(e.teacherCourseId);\r\n                            setRemarkVisible(!remarkVisible);\r\n                            setRemark(e.remark);\r\n                        }\r\n                    }\r\n                    style={{color: e.remark ? \"#F0BB04\" :\"#189EFF\", cursor: \"pointer\"}}\r\n                >{\r\n                    e.remark ?\r\n                        <div><span className=\"padding_row_xxs\" style={{color: 'rgba(0, 0, 0, 0.65)'}}>{e.remark.length > 10 ? e.remark.substr(0, 10) + '...' : e.remark}</span>修改</div>\r\n                        :\r\n                        <div>添加</div>\r\n                }\r\n                </div>\r\n            )\r\n        },\r\n        { title: '课程编号', dataIndex: 'courseNumber', key: 'courseNumber', align: 'center', },\r\n        { title: '添加时间', dataIndex: 'addTime', key: 'addTime', align: 'center', },\r\n        {\r\n            title: '课程处理',\r\n            key: \"dealCourse\",\r\n            align: 'center',\r\n            render: (e)=>(\r\n                <div>\r\n                    <span\r\n                        onClick={\r\n                            ()=>{\r\n                                setTeacherCourseId(e.teacherCourseId);\r\n                                setReleaseVisible(true);\r\n                            }\r\n                        }\r\n                        style={{color: \"#189EFF\", cursor: \"pointer\"}}\r\n                    >\r\n                        发布任务\r\n                    </span>\r\n                    <span\r\n                        onClick={()=>deleteConfirm(e, \"deleteCourse\")}\r\n                        style={{color: \"#B30000\", cursor: \"pointer\", padding: \"0 0.375rem\"}}\r\n                    >\r\n                        删除课程\r\n                    </span>\r\n                    <span\r\n                        onClick={()=>{\r\n                            setTeacherCourseId(e.teacherCourseId);\r\n                            handleCheckStudent({\r\n                                teacherCourseId: e.teacherCourseId\r\n                            });\r\n                            setCheckStudentVisible(true);\r\n                        }}\r\n                        style={{color: \"#F0BB04\", cursor: \"pointer\", padding: \"0 0.375rem\"}}\r\n                    >\r\n                        学生信息\r\n                    </span>\r\n                </div>\r\n            )\r\n        }\r\n\r\n    ];\r\n\r\n    const releaseProps = {\r\n        beforeUpload:\r\n            file => {\r\n                files.push(file);\r\n                files.length > 0 ? setUploadBtn(true) : setUploadBtn(false);\r\n                return false\r\n            },\r\n        onRemove:\r\n            file=>{\r\n                const index = files.indexOf(file.originFileObj);\r\n                files.splice(index, 1);\r\n                files.length > 0 ? setUploadBtn(true) : setUploadBtn(false);\r\n\r\n            },\r\n    };\r\n\r\n    const updateProps = {\r\n        beforeUpload:\r\n            file => {\r\n                updateFiles.push(file);\r\n                updateFiles.length > 0 ? setUpdateBtn(true) : setUpdateBtn(false);\r\n                return false\r\n            },\r\n        onRemove:\r\n            file=>{\r\n                const index = updateFiles.indexOf(file.originFileObj);\r\n                updateFiles.splice(index, 1);\r\n                updateFiles.length > 0 ? setUpdateBtn(true) : setUpdateBtn(false);\r\n\r\n            }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button onClick={() => {setAddCourseVisible(true)}} type='primary' className='margin_column_xxs' >\r\n                <Icon type={'plus'} />\r\n                添加\r\n            </Button>\r\n            <Table\r\n                rowKey={record => record.teacherCourseId}\r\n                size={'small'}\r\n                columns={columns}\r\n                expandedRowRender={(record)=>expandedRowRender(record)}\r\n                onExpand = {\r\n                    (expanded,record)=>{\r\n                        expanded && handleFetchTaskRes({teacherCourseId: record.teacherCourseId, courseTask});\r\n                    }\r\n                }\r\n                dataSource={[...myCourse]}\r\n                pagination={false}\r\n            />\r\n            <Modal\r\n                width={'64rem'}\r\n                title='添加课程'\r\n                visible={addCourseVisible}\r\n                footer={null}\r\n                onCancel = {() => {\r\n                    setAddCourseVisible(false);\r\n                }}\r\n            >\r\n                <AllCourse />\r\n            </Modal>\r\n            <Modal\r\n                title = \"发布实验任务及上传附件\"\r\n                visible = {releaseVisible}\r\n                onCancel={() => {\r\n                    setReleaseVisible(false);\r\n                    setUploadLoading(false);\r\n                    setFiles([]);\r\n                    setTaskName(\"\");\r\n                }}\r\n                footer = {[\r\n                    <Button\r\n                        onClick={() => {\r\n                            setReleaseVisible(!releaseVisible);\r\n                            setUploadLoading(false);\r\n                            setUploadBtn(false);\r\n                            setFiles([]);\r\n                            setTaskName(\"\");\r\n                        }}\r\n                    >\r\n                        取消\r\n                    </Button>\r\n                ]}\r\n                destroyOnClose = {true}\r\n            >\r\n                <div style={{display: \"flex\", marginBottom: \"0.75rem\"}}>\r\n                    <Input\r\n                        style={{width: \"75%\"}}\r\n                        value={taskName}\r\n                        placeholder = {\"请输入任务名称\"}\r\n                        onChange = {(e) =>{\r\n                            setTaskName(e.target.value);\r\n                        }}\r\n                    />\r\n                    <Button\r\n                        style={{marginLeft: \"0.75rem\"}}\r\n                        type = {\"primary\"}\r\n                        loading = {uploadLoading}\r\n                        onClick={()=> {\r\n                            if(files.length <= 1){\r\n                                setUploadLoading(true);\r\n                                handleUpload();\r\n                            }else{\r\n                                message.error(\"只能上传一个附件!\");\r\n                            }\r\n                        }}\r\n                    >\r\n                        发布任务\r\n                    </Button>\r\n                </div>\r\n                <div>\r\n                    <div style={{display: \"flex\", alignItems: \"center\"}} >\r\n                        <Upload\r\n                            {...releaseProps}\r\n                        >\r\n                            <Button\r\n                                disabled={uploadBtn}\r\n                                onClick={()=>(setTextVisible(false))}\r\n                                style={{marginRight: \"0.625rem\"}}\r\n                            >\r\n                                <Icon type = \"upload\"/>\r\n                                选择文件\r\n                            </Button>\r\n                        </Upload>\r\n                        <p style={{ display: textVisible ? \"\" : \"none\" }}>{textVisible ? '(注：上传的文件将覆盖原有文件！)' : '可不上传文件直接发布任务'}</p>\r\n                    </div>\r\n                    <div className=\"fontC_red fontS_12 padding_column_xxs\">发布的任务和上传到该任务的作业，将于每年8月1日清空，请老师及时备份。</div>\r\n                </div>\r\n        </Modal>\r\n\r\n            <Modal\r\n                rowKey = {e=>e.id}\r\n                title = \"修改任务\"\r\n                visible = {updateVisible}\r\n                onCancel={() => {\r\n                    setUpdateVisible(!updateVisible);\r\n                    setUpdateLoading(false);\r\n                    setUpdateBtn(false);\r\n                    setUpdateFiles([]);\r\n                }}\r\n                footer = {[\r\n                    <Button\r\n                        disabled={updateBtn}\r\n                        onClick={() => {\r\n                            setUpdateVisible(!updateVisible);\r\n                            setUpdateLoading(false);\r\n                          }\r\n                        }\r\n                    >\r\n                        取消\r\n                    </Button>\r\n                ]}\r\n                destroyOnClose = {true}\r\n\r\n            >\r\n                <div style={{display: \"flex\", marginBottom: \"0.75rem\"}}>\r\n                    <Input\r\n                        style={{width: \"75%\"}}\r\n                        value = {updateName}\r\n                        onChange = {(e) =>{\r\n                            setUpdateName(e.target.value);\r\n                        }}\r\n                    />\r\n                    <Button\r\n                        loading={updateLoading}\r\n                        style={{marginLeft: \"0.75rem\"}}\r\n                        type = {\"primary\"}\r\n                        onClick={()=>{\r\n                            setUpdateLoading(true);\r\n                            handleUpdate();\r\n                        }}\r\n                    >\r\n                        确认修改\r\n                    </Button>\r\n                </div>\r\n                <div\r\n                    style={{display: \"flex\", alignItems: \"center\"}}\r\n                >\r\n                    <Upload\r\n                        {...updateProps}\r\n                        showUploadList={true}\r\n                        multiple = {true}\r\n                    >\r\n                        <Button\r\n                            disabled={updateBtn}\r\n                            onClick={()=>(setTextVisible(false))}\r\n                            style={{marginRight: \"0.625rem\"}}\r\n                        >\r\n                            <Icon type = \"upload\"/>\r\n                            选择文件\r\n                        </Button>\r\n                    </Upload>\r\n                    <p style={{ display: textVisible ? \"\" : \"none\" }}>(注：可不上传文件直接发布任务~)</p>\r\n                </div>\r\n            </Modal>\r\n            <Modal\r\n                title = {`${remark ? \"修改\" : \"添加\"}备注`}\r\n                visible={remarkVisible}\r\n                footer = {null}\r\n                onCancel={()=>setRemarkVisible(!remarkVisible)}\r\n            >\r\n                <div  style = {{display: \"flex\" }} >\r\n                <Input\r\n                    style={{marginRight: \"0.8125rem\"}}\r\n                    placeholder={`${remark ? remark : \"请输入内容（如：班级代码、专业等）\"}`}\r\n                    value={remark}\r\n                    onChange = {(e) =>{\r\n                        setRemark(e.target.value);\r\n                    }}\r\n                />\r\n                <Button\r\n                    type={\"primary\"}\r\n                    onClick={()=>addRemark()}\r\n                >\r\n                    确认\r\n                </Button>\r\n                </div>\r\n            </Modal>\r\n            <Modal\r\n                title = \"未提交作业名单\"\r\n                visible={unSubmitVisible}\r\n                footer = {null}\r\n                onCancel={() => { setUnSubmitVisible(!unSubmitVisible) }}\r\n            >\r\n                <Table\r\n                    rowKey={e => (e.studentId)}\r\n                    size = \"small\"\r\n                    dataSource={[...unSubmitList]}\r\n                    columns={[\r\n                        { title: \"学生姓名\", dataIndex: \"userName\", key: \"userName\" },\r\n                        { title: \"学生学号\", dataIndex: \"userId\", key: \"userId\" }\r\n                    ]}\r\n                    pagination={false}\r\n\r\n                />\r\n\r\n            </Modal>\r\n            <Modal\r\n                title = \"选课学生信息\"\r\n                visible={checkStudentVisible}\r\n                footer = {null}\r\n                onCancel={() => { setCheckStudentVisible(false) }}\r\n                footer = {[\r\n                    <Button onClick={() => {setAddStudentVisible(true)}} >添加</Button>,\r\n                    <Button type='primary' onClick={exportStudent} >导出</Button>\r\n                ]}\r\n            >\r\n                <Table\r\n                    rowKey={e => (e.userId)}\r\n                    size={\"small\"}\r\n                    dataSource = {[...studentCourseList]}\r\n                    columns={[\r\n                        { title: \"学生姓名\", dataIndex: \"userName\", key: \"userName\" },\r\n                        { title: \"学生学号\", dataIndex: \"userId\", key: \"userId\" },\r\n                        {\r\n                            title: \"操作\",\r\n                            key: \"operate\",\r\n                            render: (e)=> (\r\n                                <span\r\n                                    onClick={()=>(deleteStudent(e))}\r\n                                    style={{color: \"#B30000\", cursor: \"pointer\", padding: \"0 0.375rem\"}}\r\n                                >\r\n                                    删除\r\n                                </span>\r\n                            )\r\n                        }\r\n                    ]}\r\n                    pagination={false}\r\n\r\n                />\r\n\r\n            </Modal>\r\n            <Modal\r\n                title={\"请确认！\"}\r\n                width={\"15rem\"}\r\n                visible={downloadVisible}\r\n                footer = {\r\n                    <a download=\"\" href={downloadUrl}>\r\n                        <Button type={\"primary\"} onClick={() => (setDownloadVisible(false))} >确定</Button>\r\n                    </a>\r\n                }\r\n                onCancel={()=>(setDownloadVisible(!downloadVisible))}\r\n            >\r\n                点击确认按钮即可开始下载～\r\n            </Modal>\r\n            <Modal\r\n                title={`已提交作业信息`}\r\n                visible={submitVisible}\r\n                width={\"64rem\"}\r\n                onCancel = {()=>(setSubmitVisible(!submitVisible))}\r\n                footer={null}\r\n            >\r\n\r\n                <Button\r\n                    className='margin_row_xxs'\r\n                    onClick={() => (downloadWorks('part'))}\r\n                    type = {\"primary\"}\r\n                    >\r\n                    <Icon type = \"download\" />\r\n                    选择下载\r\n                </Button>\r\n                <Button\r\n                    onClick={() => (downloadWorks('all'))}\r\n                    type = {\"primary\"}\r\n                >\r\n                    <Icon type = \"download\" />\r\n                    全部下载\r\n                </Button>\r\n                <Table\r\n                    rowKey={e => (e.id)}\r\n                    pagination={{\r\n                        current: checkSubmit.page,\r\n                        total:submitTotal,\r\n                        showSizeChanger: true,\r\n                        onShowSizeChange: onShowSizeChange,\r\n                        onChange: changePage\r\n                    }}\r\n                    rowSelection ={{\r\n                        onChange: (selectedRowKeys, selectedRows) => {\r\n                            //setStartDownload(selectedRows);\r\n                            let studentIdList = selectedRows.map((e)=>(\r\n                                e.studentId\r\n                            ));\r\n                            let idList = Array.from(new Set(studentIdList));\r\n                            setUserIdList(idList.join(\";\"));\r\n                        },\r\n                    }}\r\n                    dataSource={[...submitList]}\r\n                    columns={[\r\n                        {title: \"学生姓名\", dataIndex: \"userName\", key: \"userName\"},\r\n                        {title: \"学号\", dataIndex: \"studentId\", key: \"studentId\"},\r\n                        {\r\n                            title: \"作业名称\",\r\n                            key: \"workName\",\r\n                            render: (e)=>(\r\n                                <a href={e.url}>{e.workName}</a>\r\n                            )\r\n                        },\r\n                        {title: \"上传时间\", dataIndex: \"addTime\", key: \"addTime\"}]\r\n                    }\r\n                />\r\n\r\n            </Modal>\r\n            <AddStudents\r\n                addStudentVisible={addStudentVisible}\r\n                visibleCallback={(e) => (setAddStudentVisible(e))}\r\n                teacherCourseId={teacherCourseId}\r\n                />\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default connect(\r\n    state => ({\r\n        userId: state.getIn([\"userMana\", \"common\", \"userId\"]),\r\n        type: state.getIn([\"userMana\", \"common\", \"type\"]),\r\n        myCourse: state.getIn([\"course\", \"myCourse\"]),\r\n        courseTask: state.getIn([\"course\", \"courseTask\"]),\r\n        unSubmitList: state.getIn([\"course\", \"unsubmitList\"]),\r\n        submitList: state.getIn([\"course\", \"submitList\"]),\r\n        submitTotal: state.getIn([\"course\", \"submitTotal\"]),\r\n        downloadUrl: state.getIn([\"course\", \"downloadUrl\"]),\r\n        studentCourseList: state.getIn([\"course\", \"studentCourseList\"]),\r\n        studentCourseTotal: state.getIn([\"course\",\"studentCourseTotal\"]),\r\n        teacherUploadFlag: state.getIn([\"course\", \"teacherUploadFlag\"]),\r\n        teacherUpdateFlag: state.getIn([\"course\", \"teacherUpdateFlag\"]),\r\n    }) ,\r\n    dispatch => ({\r\n        handleMyCourseRes(args){\r\n            dispatch(course.queryMyCourse(args));\r\n        },\r\n        handleFetchTaskRes(teacherCourseId,courseTask){\r\n            dispatch(course.fetchCourseTask(teacherCourseId, courseTask));\r\n        },\r\n        handleTeacherDeleteCourse(args){\r\n            dispatch(course.teacherDeleteCourse(args))\r\n        },\r\n        handleTeacherReleaseTask(args){\r\n            dispatch(course.teacherReleaseTask(args))\r\n        },\r\n        handleTeacherUpdateTask(args){\r\n            dispatch(course.teacherUpdateTask(args))\r\n        },\r\n        handleAddRemark(args){\r\n            dispatch(course.teacherAddRemark(args))\r\n        },\r\n        handleTeacherDeleteTask(args){\r\n            dispatch(course.teacherDeleteTask(args))\r\n        },\r\n        handleToggleUpload(args){\r\n            dispatch(course.teacherToggleUpload(args));\r\n        },\r\n        handleTeacherQueryUnsubmit(args){\r\n            dispatch(course.teacherQueryUnsubmit(args))\r\n        },\r\n        handleTeacherQuerySubmit(taskId){\r\n            dispatch(course.teacherQuerySubmit(taskId))\r\n        },\r\n        handleTeacherDownloadSubmit(args){\r\n            dispatch(course.teacherDownloadSubmit(args))\r\n        },\r\n        handleDeleteStudentCourse(args){\r\n            dispatch(course.teacherDeleteStudent(args))\r\n        },\r\n        handleCheckStudent(args){\r\n            dispatch(course.teacherCheckStudent(args));\r\n        }\r\n    })\r\n)(TeacherTasks);\r\n"]},"metadata":{},"sourceType":"module"}