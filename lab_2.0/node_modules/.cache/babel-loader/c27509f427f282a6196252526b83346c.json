{"ast":null,"code":"import \"antd/es/table/style/css\";\nimport _Table from \"antd/es/table\";\nimport _toConsumableArray from \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\src\\\\pages\\\\Software.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport \"../static/style/learningDatas.scss\";\nimport SearchInput from \"../components/Search\";\nimport * as resource from \"../redux/actionCreators/resource\";\n\nvar Software = function Software(props) {\n  var page = props.page,\n      searchFlag = props.searchFlag,\n      handleSearchValue = props.handleSearchValue,\n      resourceName = props.resourceName,\n      userName = props.userName,\n      type = props.type,\n      total = props.total,\n      softwareResource = props.softwareResource,\n      handleFetchSoftwareRes = props.handleFetchSoftwareRes,\n      handleDownloadSoftware = props.handleDownloadSoftware,\n      softwareDataTemp = props.softwareDataTemp;\n  useEffect(function () {\n    handleFetchSoftwareRes({\n      page: 1,\n      type: \"software\",\n      resourceName: null,\n      userName: null\n    });\n  }, [softwareDataTemp]);\n  var columns = [{\n    title: '软件名称',\n    dataIndex: 'title',\n    key: 'title'\n  }, {\n    title: '大小',\n    dataIndex: 'size',\n    align: 'center',\n    key: 'size'\n  }, {\n    title: '上传人',\n    dataIndex: 'userName',\n    align: 'center',\n    key: 'userName'\n  }, {\n    title: '上传时间',\n    key: 'addTime',\n    align: 'center',\n    dataIndex: 'addTime'\n  }, {\n    title: '下载次数',\n    key: 'num',\n    align: 'center',\n    dataIndex: 'downloadNum'\n  }, {\n    title: '软件下载',\n    key: 'url',\n    align: 'center',\n    dataIndex: 'url',\n    render: function render(text, record) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        download: record.title,\n        href: {\n          text: text\n        }.text,\n        onClick: function onClick() {\n          handleDownloadSoftware({\n            id: record.id,\n            type: \"software\"\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }\n      }, \"\\u4E0B\\u8F7D\");\n    }\n  }];\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      current = _useState2[0],\n      setCurrent = _useState2[1];\n\n  useEffect(function () {\n    setCurrent(page);\n  }, [page]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dataWrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SearchInput, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(_Table, {\n    rowKey: function rowKey(e) {\n      return e.id;\n    },\n    columns: columns,\n    dataSource: _toConsumableArray(softwareResource),\n    size: 'small',\n    pagination: {\n      total: total,\n      pageSize: 10,\n      current: current,\n      onChange: function onChange(e) {\n        !searchFlag ? handleFetchSoftwareRes({\n          page: e,\n          type: \"software\",\n          resourceName: null,\n          userName: null\n        }) : handleSearchValue({\n          page: e,\n          type: type,\n          resourceName: resourceName,\n          userName: userName\n        });\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default connect(function (state) {\n  return {\n    total: state.getIn([\"resource\", \"resource\", \"allSoftwareTotal\"]),\n    softwareResource: state.getIn([\"resource\", \"resource\", \"softwareResource\"]),\n    resourceName: state.getIn([\"resource\", \"resource\", \"resourceName\"]),\n    type: state.getIn([\"resource\", \"resource\", \"type\"]),\n    userName: state.getIn([\"resource\", \"resource\", \"userName\"]),\n    searchFlag: state.getIn([\"resource\", \"resource\", \"searchFlag\"]),\n    searchResource: state.getIn([\"resource\", \"searchRes\", \"searchResource\"]),\n    page: state.getIn([\"resource\", \"resource\", \"page\"]),\n    softwareDataTemp: state.getIn([\"resource\", \"resource\", \"softwareDataTemp\"])\n  };\n}, function (dispatch) {\n  return {\n    handleFetchSoftwareRes: function handleFetchSoftwareRes(args) {\n      dispatch(resource.fetchSoftwareResource(args));\n    },\n    handleSearchValue: function handleSearchValue(args) {\n      dispatch(resource.fetchSearchValue(args));\n    },\n    handleDownloadSoftware: function handleDownloadSoftware(args) {\n      dispatch(resource.downloadSoftware(args));\n    }\n  };\n})(Software);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/pages/Software.js"],"names":["React","useEffect","useState","connect","SearchInput","resource","Software","props","page","searchFlag","handleSearchValue","resourceName","userName","type","total","softwareResource","handleFetchSoftwareRes","handleDownloadSoftware","softwareDataTemp","columns","title","dataIndex","key","align","render","text","record","id","current","setCurrent","e","pageSize","onChange","state","getIn","searchResource","dispatch","args","fetchSoftwareResource","fetchSearchValue","downloadSoftware"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"../static/style/learningDatas.scss\";\r\nimport SearchInput from \"../components/Search\";\r\nimport { Table } from 'antd';\r\nimport * as resource from \"../redux/actionCreators/resource\";\r\n\r\nconst Software = props => {\r\n    const {\r\n        page,\r\n        searchFlag,\r\n        handleSearchValue,\r\n        resourceName,\r\n        userName,\r\n        type,\r\n        total,\r\n        softwareResource,\r\n        handleFetchSoftwareRes,\r\n        handleDownloadSoftware,\r\n        softwareDataTemp\r\n    } = props;\r\n    useEffect(() => {\r\n        handleFetchSoftwareRes({page: 1, type: \"software\", resourceName: null, userName: null});\r\n    },[softwareDataTemp]);\r\n    const columns = [\r\n        {\r\n            title: '软件名称',\r\n            dataIndex: 'title',\r\n            key: 'title',\r\n        },\r\n        {\r\n            title: '大小',\r\n            dataIndex: 'size',\r\n            align: 'center',\r\n            key: 'size',\r\n        },\r\n        {\r\n            title: '上传人',\r\n            dataIndex: 'userName',\r\n            align: 'center',\r\n            key: 'userName',\r\n        },\r\n        {\r\n            title: '上传时间',\r\n            key: 'addTime',\r\n            align: 'center',\r\n            dataIndex: 'addTime',\r\n        },\r\n        {\r\n            title: '下载次数',\r\n            key: 'num',\r\n            align: 'center',\r\n            dataIndex: 'downloadNum',\r\n        },\r\n        {\r\n            title: '软件下载',\r\n            key: 'url',\r\n            align: 'center',\r\n            dataIndex: 'url',\r\n            render: (text, record) => (\r\n                <a\r\n                    download={record.title}\r\n                    href={{text}.text}\r\n                    onClick={\r\n                        () => {\r\n                            handleDownloadSoftware({\r\n                                id: record.id,\r\n                                type: \"software\"\r\n                            })\r\n                        }\r\n                    }\r\n                >\r\n                    下载\r\n                </a>\r\n            )\r\n        },\r\n    ];\r\n    const [current, setCurrent] = useState(1);\r\n    useEffect(()=>{\r\n        setCurrent(page);\r\n    },[page]);\r\n    return(\r\n        <div className=\"dataWrapper\">\r\n            <SearchInput/>\r\n            <Table\r\n                rowKey={e => (e.id)}\r\n                columns={columns}\r\n                dataSource={[...softwareResource]}\r\n                size={'small'}\r\n                pagination={{\r\n                    total,\r\n                    pageSize: 10,\r\n                    current,\r\n                    onChange: e => {\r\n                        !searchFlag ?\r\n                            handleFetchSoftwareRes({\r\n                                page: e,\r\n                                type: \"software\",\r\n                                resourceName: null,\r\n                                userName: null\r\n\r\n                            })\r\n                            :\r\n                            handleSearchValue({\r\n                                page: e,\r\n                                type,\r\n                                resourceName,\r\n                                userName\r\n                            })\r\n                    }\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default connect(\r\n    state => ({\r\n        total: state.getIn([\"resource\",\"resource\",\"allSoftwareTotal\"]),\r\n        softwareResource: state.getIn([\"resource\",\"resource\",\"softwareResource\"]),\r\n        resourceName: state.getIn([\"resource\",\"resource\",\"resourceName\"]),\r\n        type: state.getIn([\"resource\",\"resource\",\"type\"]),\r\n        userName: state.getIn([\"resource\",\"resource\",\"userName\"]),\r\n        searchFlag: state.getIn([\"resource\",\"resource\",\"searchFlag\"]),\r\n        searchResource: state.getIn([\"resource\", \"searchRes\", \"searchResource\"]),\r\n        page: state.getIn([\"resource\", \"resource\", \"page\"]),\r\n        softwareDataTemp: state.getIn([\"resource\", \"resource\", \"softwareDataTemp\"])\r\n    }),\r\n    dispatch => ({\r\n        handleFetchSoftwareRes(args) {\r\n            dispatch(resource.fetchSoftwareResource(args));\r\n        },\r\n        handleSearchValue(args){\r\n            dispatch(resource.fetchSearchValue(args));\r\n        },\r\n        handleDownloadSoftware(args) {\r\n            dispatch(resource.downloadSoftware(args));\r\n        }\r\n    })\r\n)(Software);\r\n"]},"metadata":{},"sourceType":"module"}