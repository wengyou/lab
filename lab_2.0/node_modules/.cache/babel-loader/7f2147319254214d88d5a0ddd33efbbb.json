{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(fetchSoftwareRes),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(fetchTeacherSoftwareRes),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(deleteSoftware),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(downloadSoftware),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(rootResourceSagas);\n\nimport { takeEvery, put, call } from 'redux-saga/effects';\nimport Service from \"../../../lib/Service\";\nimport { FETCH_SOFTWARE_RES_SUCCESS, FETCH_SOFTWARE_RESOURCE, FETCH_TEACHER_SOFTWARE, FETCH_TEACHER_SOFTWARE_SUCCESS, DELETE_SOFTWARE, DELETE_SOFTWARE_SUCCESS, DOWNLOAD_SOFTWARE, DOWNLOAD_SOFTWARE_SUCCESS } from \"../../../constants/actionTypes\";\nimport { openNotification } from \"../../../utils/commonFunction\";\n\nfunction fetchSoftwareRes(data) {\n  var storage, _data$args, page, type, resourceName, userName, url, res, resData;\n\n  return _regeneratorRuntime.wrap(function fetchSoftwareRes$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          storage = window.localStorage;\n          _data$args = data.args, page = _data$args.page, type = _data$args.type, resourceName = _data$args.resourceName, userName = _data$args.userName;\n\n          if (data.args.resourceName !== null) {\n            url = \"resource/queryResource?page=\".concat(page, \"&type=\").concat(type, \"&resourceName=\").concat(resourceName);\n          } else if (data.args.userName !== null) {\n            url = \"resource/queryResource?page=\".concat(page, \"&type=\").concat(type, \"&userName=\").concat(userName);\n          } else {\n            url = \"resource/queryResource?page=\".concat(page, \"&type=\").concat(type);\n          }\n\n          _context.next = 6;\n          return call(Service.get, url);\n\n        case 6:\n          res = _context.sent;\n          storage.softwareResource = JSON.stringify(res.data.data.items);\n          storage.total = JSON.stringify(res.data.data.total);\n          resData = Object.assign(res.data.data, {\n            type: type,\n            resourceName: resourceName,\n            userName: userName\n          });\n          _context.t0 = res.data.error_code;\n          _context.next = _context.t0 === 0 ? 13 : _context.t0 === -1 ? 16 : _context.t0 === 1 ? 18 : _context.t0 === 2 ? 20 : 22;\n          break;\n\n        case 13:\n          _context.next = 15;\n          return put({\n            type: FETCH_SOFTWARE_RES_SUCCESS,\n            payload: resData,\n            softwareResource: storage.softwareResource,\n            softwareTotal: storage.total\n          });\n\n        case 15:\n          return _context.abrupt(\"break\", 23);\n\n        case 16:\n          openNotification(res.data.message);\n          return _context.abrupt(\"break\", 23);\n\n        case 18:\n          openNotification(res.data.message);\n          return _context.abrupt(\"break\", 23);\n\n        case 20:\n          openNotification(res.data.message);\n          return _context.abrupt(\"break\", 23);\n\n        case 22:\n          return _context.abrupt(\"return\", 0);\n\n        case 23:\n          _context.next = 27;\n          break;\n\n        case 25:\n          _context.prev = 25;\n          _context.t1 = _context[\"catch\"](0);\n\n        case 27:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[0, 25]]);\n}\n\nfunction fetchTeacherSoftwareRes(data) {\n  var _data$args2, page, type, userName, url, res;\n\n  return _regeneratorRuntime.wrap(function fetchTeacherSoftwareRes$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _data$args2 = data.args, page = _data$args2.page, type = _data$args2.type, userName = _data$args2.userName;\n          url = \"resource/queryResource?page=\".concat(page, \"&type=\").concat(type, \"&userName=\").concat(userName);\n          _context2.next = 5;\n          return call(Service.get, url);\n\n        case 5:\n          res = _context2.sent;\n          _context2.t0 = res.data.error_code;\n          _context2.next = _context2.t0 === 0 ? 9 : _context2.t0 === -1 ? 12 : _context2.t0 === 1 ? 14 : _context2.t0 === 2 ? 16 : 18;\n          break;\n\n        case 9:\n          _context2.next = 11;\n          return put({\n            type: FETCH_TEACHER_SOFTWARE_SUCCESS,\n            payload: res.data.data\n          });\n\n        case 11:\n          return _context2.abrupt(\"break\", 19);\n\n        case 12:\n          openNotification(res.data.message);\n          return _context2.abrupt(\"break\", 19);\n\n        case 14:\n          openNotification(res.data.message);\n          return _context2.abrupt(\"break\", 19);\n\n        case 16:\n          openNotification(res.data.message);\n          return _context2.abrupt(\"break\", 19);\n\n        case 18:\n          return _context2.abrupt(\"return\", 0);\n\n        case 19:\n          _context2.next = 24;\n          break;\n\n        case 21:\n          _context2.prev = 21;\n          _context2.t1 = _context2[\"catch\"](0);\n          console.log(_context2.t1);\n\n        case 24:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[0, 21]]);\n}\n\nfunction deleteSoftware(args) {\n  var _args$args, resourceId, type, userId, formData, resourceIdList, data, res;\n\n  return _regeneratorRuntime.wrap(function deleteSoftware$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _args$args = args.args, resourceId = _args$args.resourceId, type = _args$args.type, userId = _args$args.userId;\n          formData = new FormData();\n          formData.append('resourceIdList', resourceId);\n          resourceIdList = formData.get('resourceIdList');\n          data = {\n            resourceIdList: resourceIdList,\n            type: type,\n            userId: userId\n          };\n          _context3.next = 8;\n          return call(Service.post, \"resource/delete\", data);\n\n        case 8:\n          res = _context3.sent;\n          _context3.t0 = res.data.error_code;\n          _context3.next = _context3.t0 === 0 ? 12 : _context3.t0 === -1 ? 16 : _context3.t0 === 1 ? 18 : _context3.t0 === 2 ? 20 : 22;\n          break;\n\n        case 12:\n          _context3.next = 14;\n          return put({\n            type: DELETE_SOFTWARE_SUCCESS\n          });\n\n        case 14:\n          openNotification(res.data.message);\n          return _context3.abrupt(\"break\", 23);\n\n        case 16:\n          openNotification(res.data.message);\n          return _context3.abrupt(\"break\", 23);\n\n        case 18:\n          openNotification(res.data.message);\n          return _context3.abrupt(\"break\", 23);\n\n        case 20:\n          openNotification(res.data.message);\n          return _context3.abrupt(\"break\", 23);\n\n        case 22:\n          openNotification(\"删除失败\");\n\n        case 23:\n          _context3.next = 28;\n          break;\n\n        case 25:\n          _context3.prev = 25;\n          _context3.t1 = _context3[\"catch\"](0);\n          console.log(_context3.t1);\n\n        case 28:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[0, 25]]);\n}\n\nfunction downloadSoftware(args) {\n  var _args$args2, id, type, data, res;\n\n  return _regeneratorRuntime.wrap(function downloadSoftware$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _args$args2 = args.args, id = _args$args2.id, type = _args$args2.type;\n          data = {\n            id: id,\n            type: type\n          };\n          _context4.next = 4;\n          return call(Service.post, \"resource/download\", data);\n\n        case 4:\n          res = _context4.sent;\n          _context4.t0 = res.data.error_code;\n          _context4.next = _context4.t0 === 0 ? 8 : _context4.t0 === -1 ? 11 : _context4.t0 === 1 ? 13 : _context4.t0 === 2 ? 15 : 17;\n          break;\n\n        case 8:\n          _context4.next = 10;\n          return put({\n            type: DOWNLOAD_SOFTWARE_SUCCESS\n          });\n\n        case 10:\n          return _context4.abrupt(\"break\", 18);\n\n        case 11:\n          openNotification(res.data.message);\n          return _context4.abrupt(\"break\", 18);\n\n        case 13:\n          openNotification(res.data.message);\n          return _context4.abrupt(\"break\", 18);\n\n        case 15:\n          openNotification(res.data.message);\n          return _context4.abrupt(\"break\", 18);\n\n        case 17:\n          return _context4.abrupt(\"return\", 0);\n\n        case 18:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}\n\nexport default function rootResourceSagas() {\n  return _regeneratorRuntime.wrap(function rootResourceSagas$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return takeEvery(FETCH_SOFTWARE_RESOURCE, fetchSoftwareRes);\n\n        case 2:\n          _context5.next = 4;\n          return takeEvery(FETCH_TEACHER_SOFTWARE, fetchTeacherSoftwareRes);\n\n        case 4:\n          _context5.next = 6;\n          return takeEvery(DELETE_SOFTWARE, deleteSoftware);\n\n        case 6:\n          _context5.next = 8;\n          return takeEvery(DOWNLOAD_SOFTWARE, downloadSoftware);\n\n        case 8:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/redux/sagas/resourceSagas/softwareResource.js"],"names":["fetchSoftwareRes","fetchTeacherSoftwareRes","deleteSoftware","downloadSoftware","rootResourceSagas","takeEvery","put","call","Service","FETCH_SOFTWARE_RES_SUCCESS","FETCH_SOFTWARE_RESOURCE","FETCH_TEACHER_SOFTWARE","FETCH_TEACHER_SOFTWARE_SUCCESS","DELETE_SOFTWARE","DELETE_SOFTWARE_SUCCESS","DOWNLOAD_SOFTWARE","DOWNLOAD_SOFTWARE_SUCCESS","openNotification","data","storage","window","localStorage","args","page","type","resourceName","userName","url","get","res","softwareResource","JSON","stringify","items","total","resData","Object","assign","error_code","payload","softwareTotal","message","console","log","resourceId","userId","formData","FormData","append","resourceIdList","post","id"],"mappings":"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","sourcesContent":["import {takeEvery, put, call} from 'redux-saga/effects';\r\nimport Service from \"../../../lib/Service\";\r\nimport {\r\n    FETCH_SOFTWARE_RES_SUCCESS,\r\n    FETCH_SOFTWARE_RESOURCE,\r\n    FETCH_TEACHER_SOFTWARE,\r\n    FETCH_TEACHER_SOFTWARE_SUCCESS,\r\n    DELETE_SOFTWARE,\r\n    DELETE_SOFTWARE_SUCCESS,\r\n    DOWNLOAD_SOFTWARE,\r\n    DOWNLOAD_SOFTWARE_SUCCESS\r\n} from \"../../../constants/actionTypes\";\r\nimport {openNotification} from \"../../../utils/commonFunction\";\r\n\r\nfunction* fetchSoftwareRes(data) {\r\n    try {\r\n        let storage = window.localStorage;\r\n        const {page, type, resourceName, userName} = data.args;\r\n        let url;\r\n        if (data.args.resourceName !== null) {\r\n            url = `resource/queryResource?page=${page}&type=${type}&resourceName=${resourceName}`;\r\n        } else if (data.args.userName !== null) {\r\n            url = `resource/queryResource?page=${page}&type=${type}&userName=${userName}`;\r\n        } else {\r\n            url = `resource/queryResource?page=${page}&type=${type}`;\r\n        }\r\n        const res = yield call(Service.get, url);\r\n        storage.softwareResource = JSON.stringify(res.data.data.items);\r\n        storage.total = JSON.stringify(res.data.data.total);\r\n        const resData = Object.assign(res.data.data, {type,resourceName,userName});\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: FETCH_SOFTWARE_RES_SUCCESS,\r\n                    payload: resData,\r\n                    softwareResource: storage.softwareResource,\r\n                    softwareTotal: storage.total,\r\n                });\r\n                break;\r\n            case -1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 2:\r\n                openNotification(res.data.message);\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    } catch(e) {\r\n\r\n    }\r\n}\r\n\r\nfunction *fetchTeacherSoftwareRes(data) {\r\n    try{\r\n        const {page, type, userName} = data.args;\r\n        let url = `resource/queryResource?page=${page}&type=${type}&userName=${userName}`;\r\n        const res = yield call(Service.get, url);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: FETCH_TEACHER_SOFTWARE_SUCCESS,\r\n                    payload: res.data.data\r\n                });\r\n                break;\r\n            case -1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 2:\r\n                openNotification(res.data.message);\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    } catch (e) {\r\n        console.log(e)\r\n    }\r\n\r\n}\r\n\r\nfunction *deleteSoftware(args) {\r\n    try{\r\n        const {resourceId, type, userId} = args.args;\r\n        let formData = new FormData();\r\n        formData.append('resourceIdList',resourceId);\r\n        const resourceIdList = formData.get('resourceIdList');\r\n        const data = {resourceIdList, type, userId};\r\n        const res = yield call(Service.post, \"resource/delete\", data );\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: DELETE_SOFTWARE_SUCCESS,\r\n                });\r\n                openNotification(res.data.message);\r\n                break;\r\n            case -1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 1:\r\n                openNotification(res.data.message);\r\n                break;\r\n            case 2:\r\n                openNotification(res.data.message);\r\n                break;\r\n            default:\r\n                openNotification(\"删除失败\");\r\n        }\r\n    }catch (e) {\r\n        console.log(e)\r\n    }\r\n}\r\n\r\nfunction *downloadSoftware(args) {\r\n    const {id, type } = args.args;\r\n    const data = {id, type };\r\n    const res = yield call(Service.post, \"resource/download\", data);\r\n    switch (res.data.error_code) {\r\n        case 0:\r\n            yield put({\r\n                type: DOWNLOAD_SOFTWARE_SUCCESS,\r\n            });\r\n            break;\r\n        case -1:\r\n            openNotification(res.data.message);\r\n            break;\r\n        case 1:\r\n            openNotification(res.data.message);\r\n            break;\r\n        case 2:\r\n            openNotification(res.data.message);\r\n            break;\r\n        default:\r\n            return 0;\r\n    }\r\n}\r\n\r\nexport default function *rootResourceSagas() {\r\n    yield takeEvery(FETCH_SOFTWARE_RESOURCE, fetchSoftwareRes);\r\n    yield takeEvery(FETCH_TEACHER_SOFTWARE, fetchTeacherSoftwareRes);\r\n    yield takeEvery(DELETE_SOFTWARE, deleteSoftware);\r\n    yield takeEvery(DOWNLOAD_SOFTWARE, downloadSoftware);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}