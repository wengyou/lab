{"ast":null,"code":"import\"antd/es/table/style/css\";import _Table from\"antd/es/table\";import _slicedToArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import\"../static/style/search.scss\";import*as resource from\"../redux/actionCreators/resource\";import*as admin from\"../redux/actionCreators/admin\";var StudentTable=function StudentTable(props){var studentMessage=props.studentMessage,total=props.total,handleSearchStudent=props.handleSearchStudent,userId=props.userId,userName=props.userName,page=props.page,resetPassword=props.resetPassword,reUserId=props.reUserId;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),current=_useState2[0],setCurrent=_useState2[1];useEffect(function(){setCurrent(page);},[page]);var columns=[{key:'1',title:'学号',dataIndex:'userId'},{key:'2',title:'学生姓名',dataIndex:'userName'},{key:'3',title:'性别',dataIndex:'sex'},{key:'4',title:'',dataIndex:'resetPassword',render:function render(text,record){return/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){resetPassword({'id':record.userId,'userId':reUserId});}},\"\\u91CD\\u7F6E\\u5BC6\\u7801\");}}];var rowSelection={getCheckboxProps:function getCheckboxProps(record){return{disabled:record.name==='Disabled User',// Column configuration not to be checked\nname:record.name};}};return/*#__PURE__*/React.createElement(_Table,{rowKey:function rowKey(record){return record.id;},dataSource:studentMessage,rowSelection:rowSelection,columns:columns,pagination:{current:current,total:total,pageSize:10,onChange:function onChange(e){handleSearchStudent({page:e,type:\"student\",userId:userId,userName:userName});},defaultCurrent:1}});};export default connect(function(state){return{studentMessage:state.getIn([\"resource\",\"resource\",\"studentMessage\"]),total:state.getIn([\"resource\",\"resource\",\"studentTotal\"]),userId:state.getIn([\"resource\",\"resource\",\"studentId\"]),userName:state.getIn([\"resource\",\"resource\",\"studentName\"]),page:state.getIn([\"resource\",\"resource\",\"page\"]),reUserId:state.getIn(['userMana','common','userId'])};},function(dispatch){return{handleSearchStudent:function handleSearchStudent(args){dispatch(resource.fetchStudentMes(args));},resetPassword:function resetPassword(args){dispatch(admin.resetPassword(args));}};})(StudentTable);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/components/StudentTable.js"],"names":["React","useEffect","useState","connect","resource","admin","StudentTable","props","studentMessage","total","handleSearchStudent","userId","userName","page","resetPassword","reUserId","current","setCurrent","columns","key","title","dataIndex","render","text","record","rowSelection","getCheckboxProps","disabled","name","id","pageSize","onChange","e","type","defaultCurrent","state","getIn","dispatch","args","fetchStudentMes"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"../static/style/search.scss\";\r\nimport { Table } from 'antd';\r\nimport * as resource from \"../redux/actionCreators/resource\";\r\nimport * as admin from \"../redux/actionCreators/admin\";\r\n\r\nconst StudentTable = props => {\r\n    const {studentMessage, total, handleSearchStudent, userId, userName, page, resetPassword, reUserId} = props;\r\n    const [current, setCurrent] = useState(1);\r\n    useEffect(()=>{\r\n        setCurrent(page);\r\n    },[page]);\r\n    const columns = [\r\n        {\r\n            key: '1',\r\n            title: '学号',\r\n            dataIndex: 'userId',\r\n        },\r\n        {\r\n            key: '2',\r\n            title: '学生姓名',\r\n            dataIndex: 'userName',\r\n        },\r\n        {\r\n            key: '3',\r\n            title: '性别',\r\n            dataIndex: 'sex',\r\n        },\r\n        {\r\n            key: '4',\r\n            title: '',\r\n            dataIndex: 'resetPassword',\r\n            render: (text, record) => {\r\n                return (<a\r\n                            onClick={() => {resetPassword({'id': record.userId, 'userId': reUserId})}}\r\n                        >\r\n                                重置密码\r\n                        </a>)\r\n\r\n            }\r\n        }\r\n    ];\r\n    const rowSelection = {\r\n        getCheckboxProps: record => ({\r\n            disabled: record.name === 'Disabled User', // Column configuration not to be checked\r\n            name: record.name,\r\n        }),\r\n    };\r\n\r\n    return(\r\n        <Table\r\n            rowKey={record => record.id}\r\n            dataSource={studentMessage}\r\n            rowSelection={rowSelection}\r\n            columns={columns}\r\n            pagination={\r\n                {\r\n                    current,\r\n                    total,\r\n                    pageSize: 10,\r\n                    onChange: e => {\r\n                            handleSearchStudent({\r\n                                page: e,\r\n                                type: \"student\",\r\n                                userId,\r\n                                userName\r\n                            })\r\n                    },\r\n                    defaultCurrent: 1,\r\n                }\r\n            }\r\n        />\r\n    )\r\n};\r\n\r\nexport default connect(\r\n    state => ({\r\n        studentMessage: state.getIn([\"resource\", \"resource\", \"studentMessage\"]),\r\n        total: state.getIn([\"resource\", \"resource\", \"studentTotal\"]),\r\n        userId: state.getIn([\"resource\", \"resource\", \"studentId\"]),\r\n        userName: state.getIn([\"resource\", \"resource\", \"studentName\"]),\r\n        page: state.getIn([\"resource\", \"resource\", \"page\"]),\r\n        reUserId: state.getIn(['userMana', 'common', 'userId'])\r\n    }),\r\n    dispatch => ({\r\n        handleSearchStudent(args){\r\n            dispatch(resource.fetchStudentMes(args))\r\n        },\r\n        resetPassword(args) {\r\n            dispatch(admin.resetPassword(args))\r\n        }\r\n    })\r\n)(StudentTable);\r\n"]},"metadata":{},"sourceType":"module"}