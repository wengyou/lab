{"ast":null,"code":"import\"antd/es/carousel/style/css\";import _Carousel from\"antd/es/carousel\";import\"antd/es/card/style/css\";import _Card from\"antd/es/card\";import\"antd/es/modal/style/css\";import _Modal from\"antd/es/modal\";import\"antd/es/button/style/css\";import _Button from\"antd/es/button\";import\"antd/es/table/style/css\";import _Table from\"antd/es/table\";import _toConsumableArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import\"../static/style/home.scss\";import*as announce from\"../redux/actionCreators/announce\";import\"../redux/sagas/announceSagas/announceSaga\";//首页的轮播图和公告\nvar Home=function Home(props){var total=props.total,handleFetchAnnounceRes=props.handleFetchAnnounceRes,announceResource=props.announceResource;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),modalContent=_useState2[0],setModalContent=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),modalVisible=_useState4[0],setModalVisible=_useState4[1];var handleShowModal=function handleShowModal(data){setModalVisible(true);setModalContent(data);};useEffect(function(){handleFetchAnnounceRes({page:1,rows:5});},[]);var columns=[{title:'公告标题',key:'title',width:'70%',render:function render(data){return/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return handleShowModal(data);}},data.title));}},{title:'发布时间',dataIndex:'addTime',key:'addTime',color:\"blue\"}];return/*#__PURE__*/React.createElement(\"div\",{className:\"wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"homeWrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"homeLeft\"},/*#__PURE__*/React.createElement(_Card,{title:\"实验室公告\"},/*#__PURE__*/React.createElement(_Table,{rowKey:function rowKey(e){return e.id;},scroll:total>5?{y:\"16rem\"}:false,dataSource:_toConsumableArray(announceResource),columns:columns,pagination:{total:total,simple:true,pageSize:5,onChange:function onChange(e){return handleFetchAnnounceRes({page:e,rows:5});}}}),/*#__PURE__*/React.createElement(_Modal,{centered:true,title:modalContent.title,visible:modalVisible,footer:/*#__PURE__*/React.createElement(_Button,{type:\"primary\",onClick:function onClick(){return setModalVisible(!modalVisible);}},\"\\u786E\\u5B9A\"),onCancel:function onCancel(){return setModalVisible(!modalVisible);}},/*#__PURE__*/React.createElement(\"div\",{dangerouslySetInnerHTML:{__html:modalContent.content}}),/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:\"0.9375rem\"}},\"\\u9644\\u4EF6:\",modalContent.fileName?/*#__PURE__*/React.createElement(\"a\",{download:\"\",href:modalContent.url,style:{marginLeft:\"0.6rem\"}},modalContent.fileName):'无'),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\",display:\"flex\",justifyContent:\"flex-end\"}},\"\\u2014\\u2014 \",modalContent.userName)))),/*#__PURE__*/React.createElement(\"div\",{className:\"homeRight\"},/*#__PURE__*/React.createElement(_Carousel,{autoplay:true},/*#__PURE__*/React.createElement(\"div\",{className:\"img-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"img-2\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"img-3\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"img-4\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"img-5\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"img-6\"})))));};export default connect(//允许我们将store中的数据作为props绑定到组件中，只要store发生了变化就会调用，必须返回一个纯对象，这个对象会与组件的 props 合并\nfunction(state){return{total:state.getIn([\"announce\",\"total\"]),announceResource:state.getIn([\"announce\",\"announceResource\"])};},function(dispatch){return{handleFetchAnnounceRes:function handleFetchAnnounceRes(page){dispatch(announce.queryAnnounce(page));}};})(Home);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/pages/Home.js"],"names":["React","useEffect","useState","connect","announce","Home","props","total","handleFetchAnnounceRes","announceResource","modalContent","setModalContent","modalVisible","setModalVisible","handleShowModal","data","page","rows","columns","title","key","width","render","dataIndex","color","e","id","y","simple","pageSize","onChange","__html","content","marginTop","fileName","url","marginLeft","display","justifyContent","userName","state","getIn","dispatch","queryAnnounce"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {Table, Carousel, Card, Modal, Button} from \"antd\";\r\nimport \"../static/style/home.scss\";\r\nimport * as announce from \"../redux/actionCreators/announce\";\r\nimport \"../redux/sagas/announceSagas/announceSaga\"\r\n\r\n//首页的轮播图和公告\r\nconst Home = props => {\r\n    const {total, handleFetchAnnounceRes, announceResource } = props;\r\n    const [modalContent,setModalContent] = useState({});\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const handleShowModal = data =>{\r\n        setModalVisible(true);\r\n        setModalContent(data);\r\n    };\r\n    useEffect(()=>{\r\n        handleFetchAnnounceRes({ page: 1, rows: 5})\r\n    }, []);\r\n\r\n    const columns = [\r\n        {\r\n            title: '公告标题',\r\n            key: 'title',\r\n            width: '70%',\r\n            render: (data) => (\r\n                <span><a onClick={()=>handleShowModal(data)}>{data.title}</a></span>\r\n            ),\r\n\r\n\r\n        },\r\n        {\r\n            title: '发布时间',\r\n            dataIndex: 'addTime',\r\n            key: 'addTime',\r\n            color: \"blue\"\r\n        }];\r\n    return (\r\n        <div className=\"wrap\">\r\n            <div className = \"homeWrap\">\r\n                <div className = \"homeLeft\">\r\n                    <Card\r\n                        title={\"实验室公告\"}\r\n                    >\r\n                        <Table\r\n                            rowKey={e=>(e.id)}\r\n                            scroll = {total > 5 ? {y: \"16rem\"} : false}\r\n                            dataSource = {[...announceResource]}\r\n                            columns = {columns}\r\n                            pagination = {{\r\n                                total,\r\n                                simple: true,\r\n                                pageSize: 5,\r\n                                onChange: e => handleFetchAnnounceRes({ page: e, rows: 5 }),\r\n                            }}\r\n                        />\r\n                        <Modal\r\n                            centered={true}\r\n                            title = {modalContent.title}\r\n                            visible={modalVisible}\r\n                            footer={\r\n                                <Button\r\n                                    type = \"primary\"\r\n                                    onClick={()=>(setModalVisible(!modalVisible))}\r\n                                >确定</Button>\r\n                            }\r\n                            onCancel={()=>(setModalVisible(!modalVisible))}\r\n                        >\r\n                            <div dangerouslySetInnerHTML = {{__html: modalContent.content}} />\r\n                            <div style={{marginTop:\"0.9375rem\"}}>附件:\r\n                                {\r\n                                    modalContent.fileName ?\r\n                                        <a\r\n                                            download={\"\"}\r\n                                            href={modalContent.url}\r\n                                            style={{marginLeft:\"0.6rem\"}}\r\n                                        >\r\n                                            {modalContent.fileName}\r\n                                        </a> :\r\n                                        '无'\r\n                                }\r\n                            </div>\r\n                            <div style={{width:\"100%\", display:\"flex\", justifyContent:\"flex-end\"}}>—— {modalContent.userName}</div>\r\n                        </Modal>\r\n                    </Card>\r\n                </div>\r\n                <div className = \"homeRight\">\r\n                    <Carousel autoplay>\r\n                        <div className={\"img-1\"}/>\r\n                        <div className={\"img-2\"}/>\r\n                        <div className={\"img-3\"}/>\r\n                        <div className={\"img-4\"}/>\r\n                        <div className={\"img-5\"}/>\r\n                        <div className={\"img-6\"}/>\r\n                    </Carousel>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default connect(\r\n    //允许我们将store中的数据作为props绑定到组件中，只要store发生了变化就会调用，必须返回一个纯对象，这个对象会与组件的 props 合并\r\n    state => ({\r\n        total: state.getIn([\"announce\", \"total\"]),\r\n        announceResource: state.getIn([\"announce\", \"announceResource\"])\r\n\r\n    }),\r\n    dispatch => ({\r\n        handleFetchAnnounceRes(page) {\r\n            dispatch(announce.queryAnnounce(page))\r\n        }\r\n    })\r\n)(Home);\r\n"]},"metadata":{},"sourceType":"module"}