{"ast":null,"code":"import{fromJS}from\"immutable\";import{default as constants,COUNTER_SUCCESS,LOG_OUT,LOGIN_SUCCESS,PRESERVE_SUCCESS,REGISTER_SUCCESS,REGISTERED_SUCCESS,FETCH_QUERY_REGISTER_SUCCESS,FETCH_PARAM_SUCCESS,SECRET_GUARD_EXISTENCE_SUCCESS,RESET_PASSWARD,ADD_QUESTION_SUCCESS,CHECK_QUESTION_SUCCESS,SEND_FORGET_FLAG_SUCCESS}from\"../../../constants/actionTypes\";var defaultSate=fromJS({login:false,userIdentify:\"游客\",name:\"\",userId:\"\",academy:\"\",class:\"\",discipline:\"\",grade:\"\",sex:\"\",type:\"\",phone:\"\",password:\"\",bigOpenKey:sessionStorage.getItem(\"bigOpenKey\"),smallOpenKey:sessionStorage.getItem(\"smallOpenKey\"),time:Date.now(),registerSuccess:false,counter:'',registeredFlag:\"\",registerTotal:\"\",registerStudent:[],pv:'',uv:'',param:[],isQuestion:'',resetPasswardData:{},isCheck:false,modifyPassward:'',visible:'',gorgetFlag:'',newUser:''});export default(function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:defaultSate;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case LOG_OUT:return state.merge({login:false,userIdentify:\"游客\",userId:\"\",academy:\"\",class:\"\",discipline:\"\",grade:\"\",sex:\"\",type:\"\",phone:\"\",bigOpenKey:sessionStorage.setItem(\"bigOpenKey\",\"1\"),time:Date.now()});case LOGIN_SUCCESS:return state.merge({login:true,userIdentify:action.payload.id,name:action.payload.name,userId:action.payload.userId,academy:action.payload.academy,class:action.payload.cls,discipline:action.payload.discipline,grade:action.payload.grade,sex:action.payload.sex,type:action.payload.type,phone:action.payload.phone,password:action.payload.password,bigOpenKey:sessionStorage.setItem(\"bigOpenKey\",\"1\"),time:Date.now()});case RESET_PASSWARD:return state.merge({resetPasswardData:action.payload,modifyPassward:true,isQuestion:false,newUser:new Date()});case SECRET_GUARD_EXISTENCE_SUCCESS:return state.merge({isQuestion:action.payload// modifyPassward: new Date()\n});case SEND_FORGET_FLAG_SUCCESS:return state.merge({forgetFlag:new Date()});case ADD_QUESTION_SUCCESS:return state.merge({isQuestion:true});case CHECK_QUESTION_SUCCESS:return state.merge({isCheck:true,visible:new Date(),login:true,userIdentify:action.payload.type=='student'&&'学生'||action.payload.type=='teacher'&&'教师'||action.payload.type=='admin'&&'超级管理员',name:action.payload.userName,userId:action.payload.userId,academy:action.payload.academy,class:action.payload.cls,discipline:action.payload.discipline,grade:action.payload.grade,sex:action.payload.sex,type:action.payload.type,phone:action.payload.phone,password:action.payload.password,bigOpenKey:sessionStorage.setItem(\"bigOpenKey\",\"1\")});case REGISTER_SUCCESS:return state.merge({registerSuccess:true});case PRESERVE_SUCCESS:return state.merge({login:true,name:action.payload.userName,userId:action.payload.userId,academy:action.payload.academy,class:action.payload.class,discipline:action.payload.discipline,grade:action.payload.grade,sex:action.payload.sex,type:action.payload.type,phone:action.payload.phone,password:action.payload.password,visible:new Date()});case COUNTER_SUCCESS:return state.merge({counter:action.payload});case FETCH_PARAM_SUCCESS:return state.merge({pv:action.payload[6].keyValue,uv:action.payload[7].keyValue,param:action.payload});//老师查询待批准学生\ncase FETCH_QUERY_REGISTER_SUCCESS:return state.merge({registerTotal:action.payload.total,registerStudent:action.payload.items});//老师批准学生\n// case constants.REGISTERED_SUCCESS:\n//     return state.merge({\n//         registerTotal: action.payload.total,\n//         registerStudent: action.payload.items,\n//     });\ncase REGISTERED_SUCCESS:return state.set(\"registeredFlag\",new Date());default:return state;}});","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/redux/reducers/userMana/common.js"],"names":["fromJS","default","constants","COUNTER_SUCCESS","LOG_OUT","LOGIN_SUCCESS","PRESERVE_SUCCESS","REGISTER_SUCCESS","REGISTERED_SUCCESS","FETCH_QUERY_REGISTER_SUCCESS","FETCH_PARAM_SUCCESS","SECRET_GUARD_EXISTENCE_SUCCESS","RESET_PASSWARD","ADD_QUESTION_SUCCESS","CHECK_QUESTION_SUCCESS","SEND_FORGET_FLAG_SUCCESS","defaultSate","login","userIdentify","name","userId","academy","class","discipline","grade","sex","type","phone","password","bigOpenKey","sessionStorage","getItem","smallOpenKey","time","Date","now","registerSuccess","counter","registeredFlag","registerTotal","registerStudent","pv","uv","param","isQuestion","resetPasswardData","isCheck","modifyPassward","visible","gorgetFlag","newUser","state","action","merge","setItem","payload","id","cls","forgetFlag","userName","keyValue","total","items","set"],"mappings":"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","sourcesContent":["import { fromJS } from \"immutable\";\r\nimport {\r\n    default as constants,\r\n    COUNTER_SUCCESS,\r\n    LOG_OUT,\r\n    LOGIN_SUCCESS,\r\n    PRESERVE_SUCCESS,\r\n    REGISTER_SUCCESS,\r\n    REGISTERED_SUCCESS,\r\n    FETCH_QUERY_REGISTER_SUCCESS,\r\n    FETCH_PARAM_SUCCESS,\r\n    SECRET_GUARD_EXISTENCE_SUCCESS,\r\n    RESET_PASSWARD,\r\n    ADD_QUESTION_SUCCESS,\r\n    CHECK_QUESTION_SUCCESS,\r\n    SEND_FORGET_FLAG_SUCCESS\r\n} from \"../../../constants/actionTypes\";\r\n\r\nconst defaultSate = fromJS({\r\n    login: false,\r\n    userIdentify: \"游客\",\r\n    name: \"\",\r\n    userId: \"\",\r\n    academy:\"\",\r\n    class: \"\",\r\n    discipline: \"\",\r\n    grade:\"\",\r\n    sex: \"\",\r\n    type: \"\",\r\n    phone: \"\",\r\n    password: \"\",\r\n    bigOpenKey: sessionStorage.getItem(\"bigOpenKey\"),\r\n    smallOpenKey: sessionStorage.getItem(\"smallOpenKey\"),\r\n    time: Date.now(),\r\n    registerSuccess: false,\r\n    counter: '',\r\n    registeredFlag: \"\",\r\n    registerTotal: \"\",\r\n    registerStudent: [],\r\n    pv: '',\r\n    uv: '',\r\n    param: [],\r\n    isQuestion: '',\r\n    resetPasswardData: {},\r\n    isCheck: false,\r\n    modifyPassward: '',\r\n    visible: '',\r\n    gorgetFlag: '',\r\n    newUser: ''\r\n});\r\n\r\nexport default (state = defaultSate, action) => {\r\n    switch (action.type) {\r\n        case LOG_OUT:\r\n            return state.merge({\r\n                login: false,\r\n                userIdentify: \"游客\",\r\n                userId: \"\",\r\n                academy:\"\",\r\n                class: \"\",\r\n                discipline: \"\",\r\n                grade:\"\",\r\n                sex: \"\",\r\n                type: \"\",\r\n                phone: \"\",\r\n                bigOpenKey: sessionStorage.setItem(\"bigOpenKey\", \"1\"),\r\n                time: Date.now()\r\n            });\r\n        case LOGIN_SUCCESS:\r\n            return state.merge({\r\n                login: true,\r\n                userIdentify:action.payload.id,\r\n                name: action.payload.name,\r\n                userId: action.payload.userId,\r\n                academy: action.payload.academy,\r\n                class: action.payload.cls,\r\n                discipline: action.payload.discipline,\r\n                grade: action.payload.grade,\r\n                sex: action.payload.sex,\r\n                type: action.payload.type,\r\n                phone: action.payload.phone,\r\n                password: action.payload.password,\r\n                bigOpenKey: sessionStorage.setItem(\"bigOpenKey\", \"1\"),\r\n                time: Date.now(),\r\n            });\r\n        case RESET_PASSWARD:\r\n            return state.merge({\r\n                resetPasswardData: action.payload,\r\n                modifyPassward: true,\r\n                isQuestion: false,  \r\n                newUser: new Date()\r\n            })\r\n        case SECRET_GUARD_EXISTENCE_SUCCESS:\r\n            return state.merge({\r\n                isQuestion: action.payload,\r\n                // modifyPassward: new Date()\r\n            })\r\n        case SEND_FORGET_FLAG_SUCCESS:\r\n            return state.merge({\r\n                forgetFlag: new Date()\r\n            })\r\n        case ADD_QUESTION_SUCCESS:\r\n            return state.merge({\r\n                isQuestion: true\r\n            })\r\n        case CHECK_QUESTION_SUCCESS: \r\n            return state.merge({\r\n                isCheck: true,\r\n                visible: new Date(),\r\n                login: true,\r\n                userIdentify: (action.payload.type == 'student' && '学生') || (action.payload.type == 'teacher' && '教师') || (action.payload.type == 'admin' && '超级管理员'),\r\n                name: action.payload.userName,\r\n                userId: action.payload.userId,\r\n                academy: action.payload.academy,\r\n                class: action.payload.cls,\r\n                discipline: action.payload.discipline,\r\n                grade: action.payload.grade,\r\n                sex: action.payload.sex,\r\n                type: action.payload.type,\r\n                phone: action.payload.phone,\r\n                password: action.payload.password,\r\n                bigOpenKey: sessionStorage.setItem(\"bigOpenKey\", \"1\"),\r\n            })\r\n        case REGISTER_SUCCESS:\r\n            return state.merge({\r\n                registerSuccess: true,\r\n            });\r\n        case PRESERVE_SUCCESS:\r\n            return state.merge({\r\n                login: true,\r\n                name: action.payload.userName,\r\n                userId: action.payload.userId,\r\n                academy: action.payload.academy,\r\n                class: action.payload.class,\r\n                discipline: action.payload.discipline,\r\n                grade: action.payload.grade,\r\n                sex: action.payload.sex,\r\n                type: action.payload.type,\r\n                phone: action.payload.phone,\r\n                password: action.payload.password,\r\n                visible: new Date()\r\n            });\r\n        case COUNTER_SUCCESS:\r\n            return state.merge({\r\n                counter: action.payload\r\n            });\r\n        case FETCH_PARAM_SUCCESS:\r\n            return state.merge({\r\n                pv: action.payload[6].keyValue,\r\n                uv: action.payload[7].keyValue,\r\n                param: action.payload\r\n            });\r\n        //老师查询待批准学生\r\n        case FETCH_QUERY_REGISTER_SUCCESS:\r\n            return state.merge({\r\n                registerTotal: action.payload.total,\r\n                registerStudent: action.payload.items,\r\n            });\r\n        //老师批准学生\r\n        // case constants.REGISTERED_SUCCESS:\r\n        //     return state.merge({\r\n        //         registerTotal: action.payload.total,\r\n        //         registerStudent: action.payload.items,\r\n        //     });\r\n        case REGISTERED_SUCCESS:\r\n            return state.set(\"registeredFlag\", new Date());\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}