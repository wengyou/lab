{"ast":null,"code":"import\"antd/es/table/style/css\";import _Table from\"antd/es/table\";import _slicedToArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import{connect}from\"react-redux\";import\"../static/style/search.scss\";import*as resource from\"../redux/actionCreators/resource\";import*as admin from\"../redux/actionCreators/admin\";var StudentTable=function StudentTable(props){var studentMessage=props.studentMessage,total=props.total,handleSearchStudent=props.handleSearchStudent,userId=props.userId,userName=props.userName,page=props.page,resetPassword=props.resetPassword;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),current=_useState2[0],setCurrent=_useState2[1];useEffect(function(){setCurrent(page);},[page]);var columns=[{key:'1',title:'学号',dataIndex:'userId'},{key:'2',title:'学生姓名',dataIndex:'userName'},{key:'3',title:'性别',dataIndex:'sex'},// {\n//     title: '登录密码',\n//     dataIndex: '',\n// },\n{key:'4',title:'',dataIndex:'resetPassword',render:function render(text,record){return/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){resetPassword({'id':record.userId,'userId':userId});}},\"\\u91CD\\u7F6E\\u5BC6\\u7801\");}}];var rowSelection={onChange:function onChange(selectedRowKeys,selectedRows){console.log(\"selectedRowKeys: \".concat(selectedRowKeys),'selectedRows: ',selectedRows);},getCheckboxProps:function getCheckboxProps(record){return{disabled:record.name==='Disabled User',// Column configuration not to be checked\nname:record.name};}};return/*#__PURE__*/React.createElement(_Table,{rowKey:function rowKey(record){return record.id;},dataSource:studentMessage,rowSelection:rowSelection,columns:columns,pagination:{current:current,total:total,pageSize:10,onChange:function onChange(e){handleSearchStudent({page:e,type:\"student\",userId:userId,userName:userName});},defaultCurrent:1}});};export default connect(function(state){return{studentMessage:state.getIn([\"resource\",\"resource\",\"studentMessage\"]),total:state.getIn([\"resource\",\"resource\",\"studentTotal\"]),userId:state.getIn([\"resource\",\"resource\",\"studentId\"]),userName:state.getIn([\"resource\",\"resource\",\"studentName\"]),page:state.getIn([\"resource\",\"resource\",\"page\"])};},function(dispatch){return{handleSearchStudent:function handleSearchStudent(args){dispatch(resource.fetchStudentMes(args));},resetPassword:function resetPassword(args){dispatch(admin.resetPassword(args));}};})(StudentTable);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/components/StudentTable.js"],"names":["React","useEffect","useRef","useState","connect","resource","admin","StudentTable","props","studentMessage","total","handleSearchStudent","userId","userName","page","resetPassword","current","setCurrent","columns","key","title","dataIndex","render","text","record","rowSelection","onChange","selectedRowKeys","selectedRows","console","log","getCheckboxProps","disabled","name","id","pageSize","e","type","defaultCurrent","state","getIn","dispatch","args","fetchStudentMes"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"../static/style/search.scss\";\r\nimport { Table } from 'antd';\r\nimport * as resource from \"../redux/actionCreators/resource\";\r\nimport * as admin from \"../redux/actionCreators/admin\";\r\n\r\nconst StudentTable = props => {\r\n    const {studentMessage, total, handleSearchStudent, userId, userName, page, resetPassword} = props;\r\n    const [current, setCurrent] = useState(1);\r\n    useEffect(()=>{\r\n        setCurrent(page);\r\n    },[page]);\r\n    const columns = [\r\n        {\r\n            key: '1',\r\n            title: '学号',\r\n            dataIndex: 'userId',\r\n        },\r\n        {\r\n            key: '2',\r\n            title: '学生姓名',\r\n            dataIndex: 'userName',\r\n        },\r\n        {\r\n            key: '3',\r\n            title: '性别',\r\n            dataIndex: 'sex',\r\n        },\r\n        // {\r\n        //     title: '登录密码',\r\n        //     dataIndex: '',\r\n        // },\r\n        {\r\n            key: '4',\r\n            title: '',\r\n            dataIndex: 'resetPassword',  \r\n            render: (text, record) => {\r\n                return (<a \r\n                            onClick={() => {resetPassword({'id': record.userId, 'userId': userId})}}\r\n                        >\r\n                                重置密码\r\n                        </a>)\r\n                \r\n            }\r\n        }\r\n    ];\r\n    const rowSelection = {\r\n        onChange: (selectedRowKeys, selectedRows) => {\r\n            console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);\r\n        },\r\n        getCheckboxProps: record => ({\r\n            disabled: record.name === 'Disabled User', // Column configuration not to be checked\r\n            name: record.name,\r\n        }),\r\n    };\r\n\r\n    return(\r\n        <Table\r\n            rowKey={record => record.id}\r\n            dataSource={studentMessage}\r\n            rowSelection={rowSelection}\r\n            columns={columns}\r\n            pagination={\r\n                {\r\n                    current,\r\n                    total,\r\n                    pageSize: 10,\r\n                    onChange: e => {\r\n                            handleSearchStudent({\r\n                                page: e,\r\n                                type: \"student\",\r\n                                userId,\r\n                                userName\r\n                            })\r\n                    },\r\n                    defaultCurrent: 1,\r\n                }\r\n            }\r\n        />\r\n    )\r\n};\r\n\r\nexport default connect(\r\n    state => ({\r\n        studentMessage: state.getIn([\"resource\", \"resource\", \"studentMessage\"]),\r\n        total: state.getIn([\"resource\", \"resource\", \"studentTotal\"]),\r\n        userId: state.getIn([\"resource\", \"resource\", \"studentId\"]),\r\n        userName: state.getIn([\"resource\", \"resource\", \"studentName\"]),\r\n        page: state.getIn([\"resource\", \"resource\", \"page\"]),\r\n    }),\r\n    dispatch => ({\r\n        handleSearchStudent(args){\r\n            dispatch(resource.fetchStudentMes(args))\r\n        },\r\n        resetPassword(args) {\r\n            dispatch(admin.resetPassword(args))\r\n        }\r\n    })\r\n)(StudentTable);"]},"metadata":{},"sourceType":"module"}