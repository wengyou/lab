{"ast":null,"code":"import{fromJS}from\"immutable\";import*as constants from\"../../../constants/actionTypes\";import{HANDLE_TEACHERRES_SUCCESS}from\"../../../constants/actionTypes\";var defaultState=fromJS({studyResource:[],softwareResource:[],searchFlag:false,allSoftwareTotal:\"\",allLearningTotal:\"\",mySoftwareTotal:\"\",myLearningTotal:\"\",searchTotal:\"\",type:\"\",resourceName:\"\",//上传人名字\nuserName:\"\",teacherData:[],teacherSoftware:[],registerTotal:\"\",registerStudent:[],teacherName:[],studentTotal:\"\",studentMessage:[],studentId:\"\",studentName:\"\",page:1,time:Date.now(),uploadFlag:true,softwareTemp:\"\",resourceTemp:\"\",learningDataTemp:\"\",softwareDataTemp:\"\"});export default(function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:defaultState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){//获取学习资源\ncase constants.FETCH_STUDY_RES_SUCCESS://merge：浅合并，新数据与旧数据对比，旧数据中不存在的属性直接添加，旧数据中已存在的属性用新数据中的覆盖\nreturn state.merge({searchFlag:false,allLearningTotal:action.payload.total,studyResource:action.payload.items,type:action.payload.type,resourceName:action.payload.resourceName,userName:action.payload.userName,page:action.payload.page});//学习资源下载次数\ncase constants.DOWNLOAD_RESOURCE_SUCCESS:return state.set(\"learningDataTemp\",new Date());case constants.DOWNLOAD_SOFTWARE_SUCCESS:return state.set(\"softwareDataTemp\",new Date());//获取软件资源\ncase constants.FETCH_SOFTWARE_RES_SUCCESS:return state.merge({storageSoftwareRes:JSON.parse(action.softwareResource),storageSoftwareTotal:JSON.parse(action.softwareTotal),allSoftwareTotal:action.payload.total,softwareResource:action.payload.items,type:action.payload.type,resourceName:action.payload.resourceName,userName:action.payload.userName,page:action.payload.page});//下载软件\ncase constants.FETCH_LOAD_RESOURCE_SUCCESS:return state.merge({learningUrl:action.loadUrl});//搜索学习资源\ncase constants.FETCH_SEARCH_DATA_SUCCESS:return state.merge({searchFlag:true,allLearningTotal:action.payload.total,studyResource:action.payload.items,type:action.payload.type,resourceName:action.payload.resourceName,userName:action.payload.userName,page:action.payload.page});//搜索软件资源\ncase constants.FETCH_SEARCH_SOFTWARE_SUCCESS:return state.merge({searchFlag:true,allSoftwareTotal:action.payload.total,type:action.payload.type,resourceName:action.payload.resourceName,userName:action.payload.userName,softwareResource:action.payload.items,page:action.payload.page});//关于tab键的切换\ncase constants.CHANGE_TYPE:return state.set(\"type\",action.key==='3'?\"material\":\"software\");//获取老师学习资源\ncase constants.FETCH_TEACHER_DATA_SUCCESS:return state.merge({myLearningTotal:action.payload.total,teacherData:action.payload.items});//获取老师软件资源\ncase constants.FETCH_TEACHER_SOFTWARE_SUCCESS:return state.merge({mySoftwareTotal:action.payload.total,teacherSoftware:action.payload.items});//删除我的资料\ncase constants.DELETE_DATA_SUCCESS:return state.set(\"resourceTemp\",new Date());//删除我的软件\ncase constants.DELETE_SOFTWARE_SUCCESS:return state.set(\"softwareTemp\",new Date());//上传学习资源\ncase constants.FETCH_UPLOAD_DATA_SUCCESS:return state.merge({time:Date.now(),uploadFlag:new Date(),resourceTemp:Date.now()});case constants.NOT_UPLOAD:return state.merge({uploadFlag:new Date(),time:new Date()});//上传软件资源\ncase constants.FETCH_UPLOAD_SOFTWARE_SUCCESS:return state.merge({time:Date.now(),uploadFlag:new Date(),softwareTemp:Date.now()});//     //老师查询待批准学生\n// case constants.FETCH_QUERY_REGISTER_SUCCESS:\n//     return state.merge({\n//          registerTotal: action.payload.total,\n//          registerStudent: action.payload.items,\n//     });\n//     //老师批准学生\n// case constants.REGISTERED_SUCCESS:\n//     return state.merge({\n//         registerTotal: action.payload.total,\n//         registerStudent: action.payload.items,\n//     });\n//获取全部老师姓名\ncase constants.HANDLE_TEACHERRES_SUCCESS:return state.merge({teacherName:action.payload});//老师搜索学生信息\ncase constants.FETCH_STUDENT_MESSAGE_SUCCESS:return state.merge({studentTotal:action.payload.total,studentMessage:action.payload.items,studentId:action.userId,studentName:action.userName,page:action.payload.page,time:Date.now()});default:return state;}});","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/redux/reducers/resource/resource.js"],"names":["fromJS","constants","HANDLE_TEACHERRES_SUCCESS","defaultState","studyResource","softwareResource","searchFlag","allSoftwareTotal","allLearningTotal","mySoftwareTotal","myLearningTotal","searchTotal","type","resourceName","userName","teacherData","teacherSoftware","registerTotal","registerStudent","teacherName","studentTotal","studentMessage","studentId","studentName","page","time","Date","now","uploadFlag","softwareTemp","resourceTemp","learningDataTemp","softwareDataTemp","state","action","FETCH_STUDY_RES_SUCCESS","merge","payload","total","items","DOWNLOAD_RESOURCE_SUCCESS","set","DOWNLOAD_SOFTWARE_SUCCESS","FETCH_SOFTWARE_RES_SUCCESS","storageSoftwareRes","JSON","parse","storageSoftwareTotal","softwareTotal","FETCH_LOAD_RESOURCE_SUCCESS","learningUrl","loadUrl","FETCH_SEARCH_DATA_SUCCESS","FETCH_SEARCH_SOFTWARE_SUCCESS","CHANGE_TYPE","key","FETCH_TEACHER_DATA_SUCCESS","FETCH_TEACHER_SOFTWARE_SUCCESS","DELETE_DATA_SUCCESS","DELETE_SOFTWARE_SUCCESS","FETCH_UPLOAD_DATA_SUCCESS","NOT_UPLOAD","FETCH_UPLOAD_SOFTWARE_SUCCESS","FETCH_STUDENT_MESSAGE_SUCCESS","userId"],"mappings":"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","sourcesContent":["import {fromJS} from \"immutable\";\r\nimport * as constants from \"../../../constants/actionTypes\"\r\nimport {HANDLE_TEACHERRES_SUCCESS} from \"../../../constants/actionTypes\";\r\n\r\nconst defaultState = fromJS({\r\n    studyResource: [],\r\n    softwareResource:[],\r\n    searchFlag: false,\r\n    allSoftwareTotal: \"\",\r\n    allLearningTotal: \"\",\r\n    mySoftwareTotal: \"\",\r\n    myLearningTotal: \"\",\r\n    searchTotal: \"\",\r\n    type: \"\",\r\n    resourceName: \"\",\r\n    //上传人名字\r\n    userName: \"\",\r\n    teacherData: [],\r\n    teacherSoftware: [],\r\n    registerTotal: \"\",\r\n    registerStudent: [],\r\n    teacherName: [],\r\n    studentTotal: \"\",\r\n    studentMessage: [],\r\n    studentId: \"\",\r\n    studentName: \"\",\r\n    page: 1,\r\n    time: Date.now(),\r\n    uploadFlag: true,\r\n    softwareTemp: \"\",\r\n    resourceTemp: \"\",\r\n    learningDataTemp: \"\",\r\n    softwareDataTemp: \"\",\r\n});\r\n\r\nexport default (state = defaultState, action) => {\r\n    switch (action.type) {\r\n        //获取学习资源\r\n        case constants.FETCH_STUDY_RES_SUCCESS:\r\n            //merge：浅合并，新数据与旧数据对比，旧数据中不存在的属性直接添加，旧数据中已存在的属性用新数据中的覆盖\r\n            return state.merge({\r\n                searchFlag: false,\r\n                allLearningTotal: action.payload.total,\r\n                studyResource: action.payload.items,\r\n                type: action.payload.type,\r\n                resourceName: action.payload.resourceName,\r\n                userName: action.payload.userName,\r\n                page: action.payload.page,\r\n            });\r\n            //学习资源下载次数\r\n        case constants.DOWNLOAD_RESOURCE_SUCCESS:\r\n            return state.set(\"learningDataTemp\", new Date());\r\n        case constants.DOWNLOAD_SOFTWARE_SUCCESS:\r\n            return state.set(\"softwareDataTemp\", new Date());\r\n            //获取软件资源\r\n        case constants.FETCH_SOFTWARE_RES_SUCCESS:\r\n            return state.merge({\r\n                storageSoftwareRes: JSON.parse(action.softwareResource),\r\n                storageSoftwareTotal: JSON.parse(action.softwareTotal),\r\n                allSoftwareTotal: action.payload.total,\r\n                softwareResource: action.payload.items,\r\n                type: action.payload.type,\r\n                resourceName: action.payload.resourceName,\r\n                userName: action.payload.userName,\r\n                page: action.payload.page,\r\n            });\r\n            //下载软件\r\n        case constants.FETCH_LOAD_RESOURCE_SUCCESS:\r\n            return state.merge({\r\n                learningUrl: action.loadUrl\r\n            });\r\n            //搜索学习资源\r\n        case constants.FETCH_SEARCH_DATA_SUCCESS:\r\n            return state.merge({\r\n                searchFlag: true,\r\n                allLearningTotal: action.payload.total,\r\n                studyResource: action.payload.items,\r\n                type: action.payload.type,\r\n                resourceName: action.payload.resourceName,\r\n                userName: action.payload.userName,\r\n                page: action.payload.page,\r\n            });\r\n            //搜索软件资源\r\n        case constants.FETCH_SEARCH_SOFTWARE_SUCCESS:\r\n            return state.merge({\r\n                searchFlag: true,\r\n                allSoftwareTotal: action.payload.total,\r\n                type: action.payload.type,\r\n                resourceName: action.payload.resourceName,\r\n                userName: action.payload.userName,\r\n                softwareResource: action.payload.items,\r\n                page: action.payload.page,\r\n            });\r\n            //关于tab键的切换\r\n        case constants.CHANGE_TYPE:\r\n            return state.set(\"type\", action.key === '3' ? \"material\" : \"software\");\r\n            //获取老师学习资源\r\n        case  constants.FETCH_TEACHER_DATA_SUCCESS:\r\n            return state.merge({\r\n                myLearningTotal: action.payload.total,\r\n                teacherData: action.payload.items,\r\n            });\r\n            //获取老师软件资源\r\n        case  constants.FETCH_TEACHER_SOFTWARE_SUCCESS:\r\n            return state.merge({\r\n                mySoftwareTotal: action.payload.total,\r\n                teacherSoftware: action.payload.items,\r\n            });\r\n            //删除我的资料\r\n        case constants.DELETE_DATA_SUCCESS:\r\n            return state.set(\"resourceTemp\", new Date());\r\n            //删除我的软件\r\n        case constants.DELETE_SOFTWARE_SUCCESS:\r\n            return state.set(\"softwareTemp\", new Date());\r\n            //上传学习资源\r\n        case constants.FETCH_UPLOAD_DATA_SUCCESS:\r\n            return state.merge({\r\n                time: Date.now(),\r\n                uploadFlag: new Date(),\r\n                resourceTemp: Date.now()\r\n            });\r\n        case constants.NOT_UPLOAD:\r\n            return state.merge({\r\n                uploadFlag: new Date(),\r\n                time: new Date(),\r\n            });\r\n            //上传软件资源\r\n        case constants.FETCH_UPLOAD_SOFTWARE_SUCCESS:\r\n            return state.merge({\r\n                time: Date.now(),\r\n                uploadFlag: new Date(),\r\n                softwareTemp: Date.now()\r\n            });\r\n        //     //老师查询待批准学生\r\n        // case constants.FETCH_QUERY_REGISTER_SUCCESS:\r\n        //     return state.merge({\r\n        //          registerTotal: action.payload.total,\r\n        //          registerStudent: action.payload.items,\r\n        //     });\r\n        //     //老师批准学生\r\n        // case constants.REGISTERED_SUCCESS:\r\n        //     return state.merge({\r\n        //         registerTotal: action.payload.total,\r\n        //         registerStudent: action.payload.items,\r\n        //     });\r\n            //获取全部老师姓名\r\n        case constants.HANDLE_TEACHERRES_SUCCESS:\r\n            return state.merge({\r\n                teacherName: action.payload\r\n            });\r\n        //老师搜索学生信息\r\n        case constants.FETCH_STUDENT_MESSAGE_SUCCESS:\r\n            return state.merge({\r\n                studentTotal: action.payload.total,\r\n                studentMessage: action.payload.items,\r\n                studentId: action.userId,\r\n                studentName: action.userName,\r\n                page: action.payload.page,\r\n                time: Date.now()\r\n            });\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}