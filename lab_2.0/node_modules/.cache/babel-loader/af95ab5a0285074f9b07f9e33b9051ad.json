{"ast":null,"code":"import\"antd/es/modal/style/css\";import _Modal from\"antd/es/modal\";import\"antd/es/table/style/css\";import _Table from\"antd/es/table\";import\"antd/es/upload/style/css\";import _Upload from\"antd/es/upload\";import\"antd/es/icon/style/css\";import _Icon from\"antd/es/icon\";import\"antd/es/menu/style/css\";import _Menu from\"antd/es/menu\";import _objectSpread from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import\"antd/es/dropdown/style/css\";import _Dropdown from\"antd/es/dropdown\";import\"antd/es/button/style/css\";import _Button from\"antd/es/button\";import _slicedToArray from\"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import\"antd/es/select/style/css\";import _Select from\"antd/es/select\";import\"antd/es/input/style/css\";import _Input from\"antd/es/input\";import React,{useEffect,useRef,useState}from\"react\";import{connect}from\"react-redux\";import*as admin from\"../../redux/actionCreators/admin\";import\"../../static/style/admin.scss\";import{openNotification}from\"../../utils/commonFunction\";var Search=_Input.Search;var InputGroup=_Input.Group;var Option=_Select.Option;var StudentInformation=function StudentInformation(props){var total=props.total,adminStudentData=props.adminStudentData,handleStudentData=props.handleStudentData,handleAddStudent=props.handleAddStudent,handleDeleteStudent=props.handleDeleteStudent,handleModifyStudent=props.handleModifyStudent,handleSearchAdminStudent=props.handleSearchAdminStudent,handleImportUser=props.handleImportUser,addStudentFlag=props.addStudentFlag,temp=props.temp,modifyStudentTemp=props.modifyStudentTemp,searchFlag=props.searchFlag,resetPassword=props.resetPassword,userId_i=props.userId_i,addVisible=props.addVisible;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setId=_useState2[1];var isEditing=function isEditing(record){return record.id===id;};var userId=useRef();var userName=useRef();var phone=useRef();var academy=useState();var grade=useRef();var discipline=useRef();var cls=useRef();var columns=[{// width: '6.5rem',\nkey:'1',title:'学号',dataIndex:'userId',editable:true},{// width: '5rem',\nkey:'2',title:'学生姓名',render:function render(text,record){return isEditing(record)?/*#__PURE__*/React.createElement(_Input,{ref:userName,defaultValue:record.userName}):/*#__PURE__*/React.createElement(\"span\",null,record.userName);},editable:true},{key:'3',title:'年级',render:function render(text,record){return isEditing(record)?/*#__PURE__*/React.createElement(_Input,{ref:grade,defaultValue:record.grade}):/*#__PURE__*/React.createElement(\"span\",null,record.grade);},editable:true},{// width: '7rem',\nkey:'4',title:'学院',render:function render(text,record){return isEditing(record)?/*#__PURE__*/React.createElement(_Input,{ref:academy,defaultValue:record.academy}):/*#__PURE__*/React.createElement(\"span\",null,record.academy);},editable:true},{// width: '7rem',\nkey:'5',title:'专业',render:function render(text,record){return isEditing(record)?/*#__PURE__*/React.createElement(_Input,{ref:discipline,defaultValue:record.discipline}):/*#__PURE__*/React.createElement(\"span\",null,record.discipline);},editable:true},{// width: '6rem',\nkey:'6',title:'班级',render:function render(text,record){return isEditing(record)?/*#__PURE__*/React.createElement(_Input,{ref:cls,defaultValue:record.cls}):/*#__PURE__*/React.createElement(\"span\",null,record.cls);},editable:true},{// width: '6.5rem',\nkey:'7',title:'电话',render:function render(text,record){return isEditing(record)?/*#__PURE__*/React.createElement(_Input,{ref:phone,defaultValue:record.phone}):/*#__PURE__*/React.createElement(\"span\",null,record.phone);},editable:true},{key:'8',title:'性别',render:function render(text,record){return isEditing(record)?/*#__PURE__*/React.createElement(_Dropdown,{overlay:menu},/*#__PURE__*/React.createElement(_Button,{style:{padding:\"0 20px\"}},sex)):/*#__PURE__*/React.createElement(\"span\",null,record.sex);},editable:true},{// width: '6rem',\nkey:'9',title:'注册时间',dataIndex:'registerDate',editable:true},{key:'10',title:'',dataIndex:'operation',render:function render(text,record){var editable=isEditing(record);return editable?/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){handleModifyStudent({userId:record.userId,userName:userName.current.state.value,grade:grade.current.state.value,academy:academy.current.state.value,discipline:discipline.current.state.value,cls:cls.current.state.value,phone:phone.current.state.value,sex:sex});setId(\"\");}},\"\\u4FDD\\u5B58\"):/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return setId(record.id);}},\"\\u4FEE\\u6539\");}},{key:'11',title:'',dataIndex:'resetPassword',render:function render(text,record){return/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){resetPassword({'id':record.userId,'userId':userId_i});}},\"\\u91CD\\u7F6E\\u5BC6\\u7801\");}}];var $columns=columns.map(function(el){if(!el.editable){return el;}return _objectSpread(_objectSpread({},el),{},{onCell:function onCell(record){return{record:record,dataIndex:el.dataIndex,title:el.title,editing:isEditing(record)};}});});var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),addFlag=_useState4[0],changeAddFlag=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),$selectedRowKeys=_useState6[0],changeSelectedRowKeys=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),selectedRowKeys=_useState8[0],setSelectedRowKeys=_useState8[1];var _useState9=useState(\"男\"),_useState10=_slicedToArray(_useState9,2),sex=_useState10[0],setSex=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),list=_useState12[0],setList=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),file=_useState14[0],setFile=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),value=_useState16[0],setValue=_useState16[1];var _useState17=useState(1),_useState18=_slicedToArray(_useState17,2),presentPage=_useState18[0],setPresentPage=_useState18[1];var _useState19=useState(true),_useState20=_slicedToArray(_useState19,2),deleteBtn=_useState20[0],setDeleteBtn=_useState20[1];var flag=\"userName\";function onClick(e){setSex(e.key);}var clearCheck=function clearCheck(){setSelectedRowKeys([]);};var menu=/*#__PURE__*/React.createElement(_Menu,{onClick:onClick},/*#__PURE__*/React.createElement(_Menu.Item,{style:{textAlign:\"center\"},key:\"\\u7537\"},\"\\u7537\"),/*#__PURE__*/React.createElement(_Menu.Item,{style:{textAlign:\"center\"},key:\"\\u5973\"},\"\\u5973\"));useEffect(function(){handleStudentData(presentPage===1?{page:1,type:\"student\"}:Math.ceil(total/10)>presentPage?{page:presentPage,type:\"student\"}:{page:presentPage-1,type:\"student\"});},[temp,modifyStudentTemp]);useEffect(function(){changeAddFlag(false);},[addStudentFlag]);useEffect(function(){changeAddFlag(addVisible);},[addVisible]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"adminTop\"},/*#__PURE__*/React.createElement(_Button,{onClick:function onClick(){return changeAddFlag(true);},style:{marginLeft:\"0.5rem\"},icon:\"plus\"},\"\\u6DFB\\u52A0\\u5B66\\u751F\"),/*#__PURE__*/React.createElement(_Button,{disabled:deleteBtn,style:{marginLeft:\"0.5rem\"},icon:\"close\",onClick:function onClick(){handleDeleteStudent({list:list});}},\"\\u5220\\u9664\\u5B66\\u751F\"),/*#__PURE__*/React.createElement(_Upload,{style:{marginLeft:\"0.5rem\"},name:\"file\",beforeUpload:function beforeUpload(file,FileList){setFile(file);},customRequest:function customRequest(){handleImportUser({file:file});},showUploadList:false},/*#__PURE__*/React.createElement(_Button,null,/*#__PURE__*/React.createElement(_Icon,{type:\"upload\"}),\" \\u6279\\u91CF\\u5BFC\\u5165\\u5B66\\u751F\")),/*#__PURE__*/React.createElement(InputGroup,{compact:true,style:{display:\"flex\",flexWrap:\"nowrap\",width:\"20rem\",marginLeft:\"0.5rem\"}},/*#__PURE__*/React.createElement(_Select,{defaultValue:\"userName\",onChange:function onChange(value){return flag=value;}},/*#__PURE__*/React.createElement(Option,{value:\"userName\"},\"\\u59D3\\u540D\"),/*#__PURE__*/React.createElement(Option,{value:\"userId\"},\"\\u5B66\\u53F7\"),/*#__PURE__*/React.createElement(Option,{value:\"grade\"},\"\\u5E74\\u7EA7\")),/*#__PURE__*/React.createElement(Search,{placeholder:\"请输入搜索内容\",onSearch:function onSearch(value){handleSearchAdminStudent({page:1,value:value,type:\"student\",flag:flag});setValue(value);},enterButton:true,style:{width:\"16rem\"}}))),/*#__PURE__*/React.createElement(_Table,{tableLayout:\"fixed\",rowKey:function rowKey(record){return record.id;},size:\"middle\",columns:$columns,rowSelection:{selectedRowKeys:selectedRowKeys,onChange:function onChange(selectedRowKeys,selectedRows){var userId=selectedRows.map(function(el){return el.userId;});setList(userId);changeSelectedRowKeys(userId);setSelectedRowKeys(selectedRowKeys);selectedRowKeys.length>0?setDeleteBtn(false):setDeleteBtn(true);}},dataSource:Array.from(adminStudentData),pagination:{total:total,pageSize:10,defaultCurrent:1,current:presentPage,onChange:function onChange(e){!searchFlag?handleStudentData({page:e,type:\"student\"}):handleSearchAdminStudent({page:e,value:value,type:\"student\",flag:flag});setPresentPage(e);clearCheck();}}}),/*#__PURE__*/React.createElement(_Modal,{afterClose:function afterClose(){userId.current&&userName.current&&cls.current&&phone.current&&grade.current&&academy.current&&discipline.current&&setTimeout(function(){userId.current.state.value=\"\";userName.current.state.value=\"\";phone.current.state.value=\"\";grade.current.state.value=\"\";academy.current.state.value=\"\";discipline.current.state.value=\"\";cls.current.state.value=\"\";},2000);},title:\"添加学生\",visible:addFlag,onCancel:function onCancel(){changeAddFlag(!addFlag);},okText:\"\\u6DFB\\u52A0\",onOk:function onOk(){handleAddStudent({type:\"student\",userId:userId.current.state.value,userName:userName.current.state.value,grade:grade.current.state.value,academy:academy.current.state.value,discipline:discipline.current.state.value,cls:cls.current.state.value,phone:phone.current.state.value,sex:sex,adminStudentData:adminStudentData});}},/*#__PURE__*/React.createElement(\"div\",{className:\"_wrap row row-start-center\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u5B66\\u53F7\\uFF1A\"),/*#__PURE__*/React.createElement(_Input,{ref:userId})),/*#__PURE__*/React.createElement(\"div\",{className:\"_wrap row row-start-center\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u59D3\\u540D\\uFF1A\"),/*#__PURE__*/React.createElement(_Input,{ref:userName})),/*#__PURE__*/React.createElement(\"div\",{className:\"_wrap row row-start-center\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u5E74\\u7EA7\\uFF1A\"),/*#__PURE__*/React.createElement(_Input,{ref:grade})),/*#__PURE__*/React.createElement(\"div\",{className:\"_wrap row row-start-center\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u5B66\\u9662\\uFF1A\"),/*#__PURE__*/React.createElement(_Input,{ref:academy})),/*#__PURE__*/React.createElement(\"div\",{className:\"_wrap row row-start-center\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u4E13\\u4E1A\\uFF1A\"),/*#__PURE__*/React.createElement(_Input,{ref:discipline})),/*#__PURE__*/React.createElement(\"div\",{className:\"_wrap row row-start-center\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u73ED\\u7EA7\\uFF1A\"),/*#__PURE__*/React.createElement(_Input,{ref:cls})),/*#__PURE__*/React.createElement(\"div\",{className:\"_wrap row row-start-center\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u7535\\u8BDD\\uFF1A\"),/*#__PURE__*/React.createElement(_Input,{ref:phone})),/*#__PURE__*/React.createElement(\"div\",{className:\"_wrap row row-start-center\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u9009\\u62E9\\u6027\\u522B\\uFF1A\"),/*#__PURE__*/React.createElement(_Dropdown,{overlay:menu},/*#__PURE__*/React.createElement(_Button,{style:{padding:\"0 20px\"}},sex)))),/*#__PURE__*/React.createElement(\"style\",null,\"\\n                    ._wrap {\\n                        margin-bottom: 20px;\\n                    }\\n                    .ant-input {\\n                        width: 80%;\\n                    }\\n                    input {\\n                        margin: 20px;\\n                    }\\n                    \"));};export default connect(function(state){return{total:state.getIn([\"admin\",\"userManage\",\"studentTotal\"]),adminStudentData:state.getIn([\"admin\",\"userManage\",\"adminStudentData\"]),addStudentFlag:state.getIn([\"admin\",\"userManage\",\"addStudentFlag\"]),temp:state.getIn([\"admin\",\"userManage\",\"temp\"]),modifyStudentTemp:state.getIn([\"admin\",\"userManage\",\"modifyStudentTemp\"]),studentPage:state.getIn([\"admin\",\"userManage\",\"studentPage\"]),searchFlag:state.getIn([\"admin\",\"userManage\",\"studentSearchFlag\"]),userId_i:state.getIn([\"userMana\",\"common\",\"userId\"]),addVisible:state.getIn([\"admin\",\"userManage\",\"addVisible\"])};},function(dispatch){return{handleStudentData:function handleStudentData(args){dispatch(admin.fetchStudentData(args));},handleAddStudent:function handleAddStudent(args){if(args.userId.length<6||args.userId.length>30){openNotification(\"请输入6-30位的学号\");}else if(args.userName.length<2||args.userName.length>10){openNotification(\"请输入2-10位的名字\");}else if(args.grade.length!==4){openNotification(\"请输入4位数的年级\");}else if(args.cls.length<2||args.cls.length>30){openNotification(\"请输入2-10位的班级号\");}else if(args.academy.length>30){openNotification(\"学院字数大于30，不符合规定\");}else if(args.discipline.length>30){openNotification(\"专业字数大于30，不符合规定\");}else if(args.phone.length<6||args.phone.length>30){openNotification(\"请输入6-30位的电话号码\");}else{dispatch(admin.addNewStudent(args));}},handleDeleteStudent:function handleDeleteStudent(args){dispatch(admin.deleteStudent(args));},handleModifyStudent:function handleModifyStudent(args){dispatch(admin.modifyStudent(args));},handleSearchAdminStudent:function handleSearchAdminStudent(args){dispatch(admin.searchStudent(args));},handleImportUser:function handleImportUser(args){dispatch(admin.importUser(args));},resetPassword:function resetPassword(args){dispatch(admin.resetPassword(args));}};})(StudentInformation);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/components/Administrator/StudentInformation.js"],"names":["React","useEffect","useRef","useState","connect","admin","openNotification","Search","InputGroup","Group","Option","StudentInformation","props","total","adminStudentData","handleStudentData","handleAddStudent","handleDeleteStudent","handleModifyStudent","handleSearchAdminStudent","handleImportUser","addStudentFlag","temp","modifyStudentTemp","searchFlag","resetPassword","userId_i","addVisible","id","setId","isEditing","record","userId","userName","phone","academy","grade","discipline","cls","columns","key","title","dataIndex","editable","render","text","menu","padding","sex","current","state","value","$columns","map","el","onCell","editing","addFlag","changeAddFlag","$selectedRowKeys","changeSelectedRowKeys","selectedRowKeys","setSelectedRowKeys","setSex","list","setList","file","setFile","setValue","presentPage","setPresentPage","deleteBtn","setDeleteBtn","flag","onClick","e","clearCheck","textAlign","page","type","Math","ceil","marginLeft","FileList","display","flexWrap","width","onChange","selectedRows","length","Array","from","pageSize","defaultCurrent","setTimeout","getIn","studentPage","dispatch","args","fetchStudentData","addNewStudent","deleteStudent","modifyStudent","searchStudent","importUser"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {Button, Table, Input, Modal, Dropdown, Menu, Select, Upload, Icon } from 'antd';\r\nimport * as admin from \"../../redux/actionCreators/admin\";\r\nimport \"../../static/style/admin.scss\";\r\nimport {openNotification} from \"../../utils/commonFunction\";\r\nconst { Search } = Input;\r\nconst InputGroup = Input.Group;\r\nconst { Option } = Select;\r\nconst StudentInformation = props => {\r\n    const {\r\n        total,\r\n        adminStudentData,\r\n        handleStudentData,\r\n        handleAddStudent,\r\n        handleDeleteStudent,\r\n        handleModifyStudent,\r\n        handleSearchAdminStudent,\r\n        handleImportUser,\r\n        addStudentFlag,\r\n        temp,\r\n        modifyStudentTemp,\r\n        searchFlag,\r\n        resetPassword,\r\n        userId_i,\r\n        addVisible\r\n    } = props;\r\n    const [id, setId] = useState(\"\");\r\n    const isEditing = record => record.id === id;\r\n    const userId = useRef();\r\n    const userName = useRef();\r\n    const phone = useRef();\r\n    const academy = useState();\r\n    const grade = useRef();\r\n    const discipline = useRef();\r\n    const cls = useRef();\r\n    const columns = [\r\n        {\r\n            // width: '6.5rem',\r\n            key: '1',\r\n            title: '学号',\r\n            dataIndex: 'userId',\r\n            editable: true\r\n        },\r\n        {\r\n            // width: '5rem',\r\n            key: '2',\r\n            title: '学生姓名',\r\n            render: (text, record) => {\r\n                return isEditing(record) ? (\r\n                    <Input ref={userName} defaultValue={record.userName} />\r\n                ):(\r\n                    <span>{record.userName}</span>\r\n                )\r\n            },\r\n            editable: true\r\n        },\r\n        {\r\n            key: '3',\r\n            title: '年级',\r\n            render: (text, record) => {\r\n                return isEditing(record) ? (\r\n                    <Input ref={grade} defaultValue={record.grade} />\r\n                ):(\r\n                    <span>{record.grade}</span>\r\n                )\r\n            },\r\n            editable: true\r\n\r\n        },\r\n        {\r\n            // width: '7rem',\r\n            key: '4',\r\n            title: '学院',\r\n            render: (text, record) => {\r\n                return isEditing(record) ? (\r\n                    <Input ref={academy} defaultValue={record.academy} />\r\n                ):(\r\n                    <span>{record.academy}</span>\r\n                )\r\n            },\r\n            editable: true\r\n        },\r\n        {\r\n            // width: '7rem',\r\n            key: '5',\r\n            title: '专业',\r\n            render: (text, record) => {\r\n                return isEditing(record) ? (\r\n                    <Input ref={discipline} defaultValue={record.discipline} />\r\n                ):(\r\n                    <span>{record.discipline}</span>\r\n                )\r\n            },\r\n            editable: true\r\n        },\r\n        {\r\n            // width: '6rem',\r\n            key: '6',\r\n            title: '班级',\r\n            render: (text, record) => {\r\n                return isEditing(record) ? (\r\n                    <Input ref={cls} defaultValue={record.cls} />\r\n                ):(\r\n                    <span>{record.cls}</span>\r\n                )\r\n            },\r\n            editable: true\r\n        },\r\n        {\r\n            // width: '6.5rem',\r\n            key: '7',\r\n            title: '电话',\r\n            render: (text, record) => {\r\n                return isEditing(record) ? (\r\n                    <Input ref={phone} defaultValue={record.phone} />\r\n                ):(\r\n                    <span>{record.phone}</span>\r\n                )\r\n            },\r\n            editable: true\r\n        },\r\n        {\r\n            key: '8',\r\n            title: '性别',\r\n            render: (text, record) => {\r\n                return isEditing(record) ? (\r\n                    <Dropdown overlay={menu}>\r\n                        <Button style={{ padding: \"0 20px\" }}>{sex}</Button>\r\n                    </Dropdown>\r\n                ):(\r\n                    <span>{record.sex}</span>\r\n                )\r\n            },\r\n            editable: true\r\n        },\r\n        {\r\n            // width: '6rem',\r\n            key: '9',\r\n            title: '注册时间',\r\n            dataIndex: 'registerDate',\r\n            editable: true,\r\n        },\r\n        {\r\n            key: '10',\r\n            title: '',\r\n            dataIndex: 'operation',\r\n            render: (text, record) => {\r\n                const editable = isEditing(record);\r\n                return editable ? (\r\n                    <a\r\n                        onClick={\r\n                            () => {\r\n                                handleModifyStudent({\r\n                                    userId: record.userId,\r\n                                    userName: userName.current.state.value,\r\n                                    grade: grade.current.state.value,\r\n                                    academy: academy.current.state.value,\r\n                                    discipline: discipline.current.state.value,\r\n                                    cls: cls.current.state.value,\r\n                                    phone: phone.current.state.value,\r\n                                    sex\r\n                                });\r\n                                setId(\"\")\r\n                            }\r\n                        }\r\n                    >\r\n                        保存\r\n                    </a>\r\n                ) : (\r\n                    <a\r\n                        onClick={ () => setId(record.id)}\r\n                    >\r\n                        修改\r\n                    </a>\r\n                )\r\n            }\r\n        },\r\n        {\r\n            key: '11',\r\n            title: '',\r\n            dataIndex: 'resetPassword',\r\n            render: (text, record) => {\r\n                return (<a\r\n                            onClick={() => {resetPassword({'id': record.userId, 'userId': userId_i})}}\r\n                        >\r\n                                重置密码\r\n                        </a>)\r\n\r\n            }\r\n        }\r\n    ];\r\n    const $columns = columns.map(el => {\r\n        if (!el.editable) {\r\n            return el;\r\n        }\r\n        return {\r\n            ...el,\r\n            onCell: record => ({\r\n                record,\r\n                dataIndex: el.dataIndex,\r\n                title: el.title,\r\n                editing: isEditing(record),\r\n            })\r\n        }\r\n    });\r\n    const [addFlag, changeAddFlag] = useState(false);\r\n    const [$selectedRowKeys, changeSelectedRowKeys] = useState([]);\r\n    const [selectedRowKeys, setSelectedRowKeys] = useState([]);\r\n    const [sex, setSex] = useState(\"男\");\r\n    const [list, setList] = useState([]);\r\n    const [file, setFile ] = useState();\r\n    const [value, setValue] = useState(\"\");\r\n    const [presentPage, setPresentPage] = useState(1);\r\n    const [deleteBtn, setDeleteBtn ] = useState(true);\r\n    let flag = \"userName\";\r\n    function onClick(e) {\r\n        setSex(e.key);\r\n    }\r\n    const clearCheck = () => {\r\n        setSelectedRowKeys([])\r\n    };\r\n    const menu = (\r\n        <Menu onClick={onClick}>\r\n            <Menu.Item style={{ textAlign: \"center\" }} key=\"男\">男</Menu.Item>\r\n            <Menu.Item style={{ textAlign: \"center\" }} key=\"女\">女</Menu.Item>\r\n        </Menu>\r\n    );\r\n    useEffect(() => {\r\n        handleStudentData(\r\n            presentPage === 1 ?\r\n                {page: 1, type: \"student\"} :\r\n                (Math.ceil(total / 10) > presentPage ?\r\n                        {page: presentPage, type: \"student\"} :\r\n                        {page: presentPage - 1, type: \"student\"}\r\n                ));\r\n    },[temp, modifyStudentTemp]);\r\n    useEffect(() => {\r\n        changeAddFlag(false);\r\n    },[addStudentFlag]);\r\n    useEffect(() => {\r\n        changeAddFlag(addVisible)\r\n    }, [addVisible])\r\n    return (\r\n        <>\r\n            <div className=\"adminTop\">\r\n                <Button\r\n                    onClick={() => changeAddFlag(true)}\r\n                    style={{marginLeft: \"0.5rem\"}}\r\n                    icon={\"plus\"}\r\n                >\r\n                    添加学生\r\n                </Button>\r\n                <Button\r\n                    disabled={deleteBtn}\r\n                    style={{marginLeft: \"0.5rem\"}}\r\n                    icon={\"close\"}\r\n                    onClick={\r\n                        () => {\r\n                            handleDeleteStudent({list: list})\r\n                        }\r\n                    }\r\n                >\r\n                    删除学生\r\n                </Button>\r\n                <Upload\r\n                    style={{marginLeft: \"0.5rem\"}}\r\n                    name={\"file\"}\r\n                    beforeUpload={\r\n                        (file, FileList) => {\r\n                            setFile(file);\r\n                        }\r\n                    }\r\n                    customRequest={\r\n                        () => {\r\n                            handleImportUser({\r\n                                file\r\n                            })\r\n                        }\r\n                    }\r\n                    showUploadList={false}\r\n                >\r\n                    <Button>\r\n                        <Icon type=\"upload\" /> 批量导入学生\r\n                    </Button>\r\n                </Upload>\r\n                <InputGroup\r\n                    compact\r\n                    style={{display: \"flex\", flexWrap: \"nowrap\", width: \"20rem\", marginLeft: \"0.5rem\"}}\r\n                >\r\n                    <Select\r\n                        defaultValue=\"userName\"\r\n                        onChange={\r\n                            value => flag = value\r\n                        }\r\n                    >\r\n                        <Option value=\"userName\">姓名</Option>\r\n                        <Option value=\"userId\">学号</Option>\r\n                        <Option value=\"grade\">年级</Option>\r\n                    </Select>\r\n                    <Search\r\n                        placeholder={\"请输入搜索内容\"}\r\n                        onSearch={\r\n                            value => {\r\n                                handleSearchAdminStudent({\r\n                                    page: 1,\r\n                                    value,\r\n                                    type: \"student\",\r\n                                    flag: flag\r\n                                });\r\n                                setValue(value);\r\n                            }\r\n                        }\r\n                        enterButton\r\n                        style={{width: \"16rem\"}}\r\n                    />\r\n                </InputGroup>\r\n            </div>\r\n            <Table\r\n                tableLayout={\"fixed\"}\r\n                rowKey={record => record.id}\r\n                size={\"middle\"}\r\n                columns={ $columns }\r\n                rowSelection={{\r\n                    selectedRowKeys,\r\n                    onChange: (selectedRowKeys, selectedRows) => {\r\n                        const userId = selectedRows.map(el => {\r\n                            return el.userId;\r\n                        });\r\n                        setList(userId);\r\n                        changeSelectedRowKeys(userId);\r\n                        setSelectedRowKeys(selectedRowKeys);\r\n                        selectedRowKeys.length > 0 ? setDeleteBtn(false) : setDeleteBtn(true);\r\n                    },\r\n                }}\r\n                dataSource={ Array.from(adminStudentData)}\r\n                pagination={{\r\n                    total,\r\n                    pageSize: 10,\r\n                    defaultCurrent: 1,\r\n                    current: presentPage,\r\n                    onChange: e => {\r\n                        !searchFlag ?\r\n                        handleStudentData({\r\n                            page: e,\r\n                            type: \"student\"\r\n                        }) :\r\n                            handleSearchAdminStudent({\r\n                                page: e,\r\n                                value,\r\n                                type: \"student\",\r\n                                flag: flag\r\n                            });\r\n                        setPresentPage(e);\r\n                        clearCheck();\r\n                    }\r\n                }}\r\n            />\r\n            {/* 添加学生 */}\r\n            <Modal\r\n                afterClose={() => {\r\n                    userId.current && userName.current && cls.current && phone.current && grade.current && academy.current && discipline.current &&\r\n                    setTimeout(() => {\r\n                        userId.current.state.value = \"\";\r\n                        userName.current.state.value = \"\";\r\n                        phone.current.state.value = \"\";\r\n                        grade.current.state.value = \"\";\r\n                        academy.current.state.value = \"\";\r\n                        discipline.current.state.value = \"\";\r\n                        cls.current.state.value = \"\";\r\n                    }, 2000)\r\n                }}\r\n                title={\"添加学生\"}\r\n                visible={addFlag}\r\n                onCancel={\r\n                    () => {\r\n                        changeAddFlag(!addFlag);\r\n                    }\r\n                }\r\n                okText=\"添加\"\r\n                onOk={() => {\r\n                    handleAddStudent({\r\n                        type: \"student\",\r\n                        userId: userId.current.state.value,\r\n                        userName: userName.current.state.value,\r\n                        grade: grade.current.state.value,\r\n                        academy: academy.current.state.value,\r\n                        discipline: discipline.current.state.value,\r\n                        cls: cls.current.state.value,\r\n                        phone: phone.current.state.value,\r\n                        sex,\r\n                        adminStudentData\r\n                    });\r\n                }}\r\n            >\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>学号：</label>\r\n                    <Input ref={userId} />\r\n                </div>\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>姓名：</label>\r\n                    <Input ref={userName} />\r\n                </div>\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>年级：</label>\r\n                    <Input ref={grade} />\r\n                </div>\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>学院：</label>\r\n                    <Input ref={academy} />\r\n                </div>\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>专业：</label>\r\n                    <Input ref={discipline} />\r\n                </div>\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>班级：</label>\r\n                    <Input ref={cls} />\r\n                </div>\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>电话：</label>\r\n                    <Input ref={phone} />\r\n                </div>\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>选择性别：</label>\r\n                    <Dropdown overlay={menu}>\r\n                        <Button style={{ padding: \"0 20px\" }}>{sex}</Button>\r\n                    </Dropdown>\r\n                </div>\r\n            </Modal>\r\n            <style>\r\n                {\r\n                    `\r\n                    ._wrap {\r\n                        margin-bottom: 20px;\r\n                    }\r\n                    .ant-input {\r\n                        width: 80%;\r\n                    }\r\n                    input {\r\n                        margin: 20px;\r\n                    }\r\n                    `\r\n                }\r\n            </style>\r\n        </>\r\n    )\r\n\r\n};\r\nexport default connect(\r\n    state => ({\r\n        total: state.getIn([\"admin\", \"userManage\", \"studentTotal\"]),\r\n        adminStudentData: state.getIn([\"admin\", \"userManage\", \"adminStudentData\"]),\r\n        addStudentFlag: state.getIn([\"admin\", \"userManage\", \"addStudentFlag\"]),\r\n        temp: state.getIn([\"admin\", \"userManage\", \"temp\"]),\r\n        modifyStudentTemp: state.getIn([\"admin\", \"userManage\", \"modifyStudentTemp\"]),\r\n        studentPage: state.getIn([\"admin\", \"userManage\", \"studentPage\"]),\r\n        searchFlag: state.getIn([\"admin\", \"userManage\", \"studentSearchFlag\"]),\r\n        userId_i: state.getIn([\"userMana\", \"common\", \"userId\"]),\r\n        addVisible: state.getIn([\"admin\", \"userManage\", \"addVisible\"]),\r\n    }),\r\n    dispatch => ({\r\n        handleStudentData(args) {\r\n            dispatch(admin.fetchStudentData(args));\r\n        },\r\n        handleAddStudent(args) {\r\n            if (args.userId.length < 6 || args.userId.length > 30){\r\n                openNotification(\"请输入6-30位的学号\")\r\n            } else if (args.userName.length < 2 || args.userName.length > 10) {\r\n                openNotification(\"请输入2-10位的名字\")\r\n            } else if (args.grade.length !== 4) {\r\n                openNotification(\"请输入4位数的年级\")\r\n            } else if (args.cls.length < 2 || args.cls.length > 30){\r\n                openNotification(\"请输入2-10位的班级号\")\r\n            } else if (args.academy.length > 30) {\r\n                openNotification(\"学院字数大于30，不符合规定\")\r\n            } else if (args.discipline.length > 30) {\r\n                openNotification(\"专业字数大于30，不符合规定\")\r\n            } else if (args.phone.length < 6 || args.phone.length > 30){\r\n                openNotification(\"请输入6-30位的电话号码\")\r\n            } else {\r\n                dispatch(admin.addNewStudent(args));\r\n            }\r\n        },\r\n        handleDeleteStudent(args) {\r\n            dispatch(admin.deleteStudent(args))\r\n        },\r\n        handleModifyStudent(args) {\r\n            dispatch(admin.modifyStudent(args))\r\n        },\r\n        handleSearchAdminStudent(args) {\r\n            dispatch(admin.searchStudent(args))\r\n        },\r\n        handleImportUser(args) {\r\n            dispatch(admin.importUser(args))\r\n        },\r\n        resetPassword(args) {\r\n            dispatch(admin.resetPassword(args))\r\n        }\r\n    })\r\n)(StudentInformation);\r\n"]},"metadata":{},"sourceType":"module"}