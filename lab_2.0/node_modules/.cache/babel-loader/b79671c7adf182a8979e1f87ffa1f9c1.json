{"ast":null,"code":"import \"antd/es/modal/style/css\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/table/style/css\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/menu/style/css\";\nimport _Menu from \"antd/es/menu\";\nimport _objectSpread from \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport \"antd/es/dropdown/style/css\";\nimport _Dropdown from \"antd/es/dropdown\";\nimport \"antd/es/button/style/css\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/input/style/css\";\nimport _Input from \"antd/es/input\";\nimport _slicedToArray from \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\src\\\\components\\\\Administrator\\\\AdminMessage.js\";\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as admin from \"../../redux/actionCreators/admin\";\nimport \"../../static/style/admin.scss\";\nimport { openNotification } from \"../../utils/commonFunction\";\n\nvar mapStateToState = function mapStateToState(state) {\n  return {\n    adminData: state.getIn([\"admin\", \"userManage\", \"adminData\"]),\n    total: state.getIn([\"admin\", \"userManage\", \"adminTotal\"]),\n    addAdminFlag: state.getIn([\"admin\", \"userManage\", \"addAdminFlag\"]),\n    modifyAdminTemp: state.getIn([\"admin\", \"userManage\", \"modifyAdminTemp\"]),\n    addVisible: state.getIn([\"admin\", \"userManage\", \"addVisible\"])\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    handleAdminData: function handleAdminData(args) {\n      dispatch(admin.fetchAdministratorData(args));\n    },\n    handleAddAdmin: function handleAddAdmin(args) {\n      if (args.userId.length <= 6 || args.userId.length >= 30) {\n        openNotification(\"教师编号长度为大于等于6小于等于30的数字，请重新输入\");\n      } else if (args.userName.length <= 2 || args.userName.length >= 30) {\n        openNotification(\"教师姓名长度为大于等于2小于等于30的字符，请重新输入\");\n      } else {\n        dispatch(admin.addNewAdmin(args));\n      }\n    },\n    handleModifyAdmin: function handleModifyAdmin(args) {\n      dispatch(admin.modifyAdmin(args));\n    }\n  };\n};\n\nvar AdminMessage = function AdminMessage(props) {\n  var handleAdminData = props.handleAdminData,\n      handleAddAdmin = props.handleAddAdmin,\n      handleModifyAdmin = props.handleModifyAdmin,\n      total = props.total,\n      adminData = props.adminData,\n      addAdminFlag = props.addAdminFlag,\n      modifyAdminTemp = props.modifyAdminTemp,\n      addVisible = props.addVisible; // console.log(adminData)\n\n  var userId = useRef();\n  var userName = useRef();\n  var phone = useRef();\n  var academy = useState();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      id = _useState2[0],\n      setId = _useState2[1];\n\n  var isEditing = function isEditing(record) {\n    return record.id === id;\n  };\n\n  var columns = [{\n    key: '1',\n    title: '管理员账号',\n    dataIndex: 'userId',\n    editable: true\n  }, {\n    key: '2',\n    title: '管理员姓名',\n    render: function render(text, record) {\n      return isEditing(record) ? /*#__PURE__*/React.createElement(_Input, {\n        ref: userName,\n        defaultValue: record.userName,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }\n      }) : /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }\n      }, record.userName);\n    },\n    editable: true\n  }, {\n    key: '3',\n    title: '学院',\n    render: function render(text, record) {\n      return isEditing(record) ? /*#__PURE__*/React.createElement(_Input, {\n        ref: academy,\n        defaultValue: record.academy,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }\n      }) : /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }\n      }, record.academy);\n    },\n    editable: true\n  }, {\n    key: '4',\n    title: '性别',\n    render: function render(text, record) {\n      return isEditing(record) ? /*#__PURE__*/React.createElement(_Dropdown, {\n        overlay: menu,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Button, {\n        style: {\n          padding: \"0 20px\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }\n      }, sex)) : /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }\n      }, record.sex);\n    },\n    editable: true\n  }, {\n    key: '5',\n    title: '',\n    dataIndex: 'operation',\n    render: function render(text, record) {\n      var editable = isEditing(record);\n      return editable ? /*#__PURE__*/React.createElement(\"a\", {\n        onClick: function onClick() {\n          handleModifyAdmin({\n            userId: record.userId,\n            userName: userName.current.state.value,\n            academy: academy.current.state.value,\n            sex: sex\n          });\n          setId(\"\");\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }\n      }, \"\\u4FDD\\u5B58\") : /*#__PURE__*/React.createElement(\"a\", {\n        onClick: function onClick() {\n          return setId(record.id);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }\n      }, \"\\u4FEE\\u6539\");\n    }\n  }];\n  var $columns = columns.map(function (el) {\n    if (!el.editable) {\n      return el;\n    }\n\n    return _objectSpread(_objectSpread({}, el), {}, {\n      onCell: function onCell(record) {\n        return {\n          record: record,\n          dataIndex: el.dataIndex,\n          title: el.title,\n          editing: isEditing(record)\n        };\n      }\n    });\n  });\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      addFlag = _useState4[0],\n      changeAddFlag = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      $selectedRowKeys = _useState6[0],\n      changeSelectedRowKeys = _useState6[1];\n\n  var _useState7 = useState(\"男\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      sex = _useState8[0],\n      setSex = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      list = _useState10[0],\n      setList = _useState10[1];\n\n  var _useState11 = useState(1),\n      _useState12 = _slicedToArray(_useState11, 2),\n      presentPage = _useState12[0],\n      setPresentPage = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      selectedRowKeys = _useState14[0],\n      setSelectedRowKeys = _useState14[1];\n\n  var clearCheck = function clearCheck() {\n    setSelectedRowKeys([]);\n  };\n\n  function onClick(e) {\n    setSex(e.key);\n  }\n\n  var menu = /*#__PURE__*/React.createElement(_Menu, {\n    onClick: onClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Menu.Item, {\n    style: {\n      textAlign: \"center\"\n    },\n    key: \"\\u7537\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, \"\\u7537\"), /*#__PURE__*/React.createElement(_Menu.Item, {\n    style: {\n      textAlign: \"center\"\n    },\n    key: \"\\u5973\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, \"\\u5973\"));\n  useEffect(function () {\n    changeAddFlag(addVisible);\n  }, [addVisible]);\n  useEffect(function () {\n    handleAdminData(presentPage === 1 ? {\n      page: 1,\n      type: \"admin\"\n    } : Math.ceil(total / 10) > presentPage ? {\n      page: presentPage,\n      type: \"admin\"\n    } : {\n      page: presentPage - 1,\n      type: \"admin\"\n    });\n    clearCheck();\n  }, [modifyAdminTemp]);\n  useEffect(function () {\n    changeAddFlag(false);\n  }, [addAdminFlag]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    style: {\n      margin: \"0.5rem 0 0 0.5rem\"\n    },\n    onClick: function onClick() {\n      return changeAddFlag(true);\n    },\n    icon: \"plus\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }, \"\\u6DFB\\u52A0\\u7BA1\\u7406\\u5458\")), /*#__PURE__*/React.createElement(_Table, {\n    rowKey: function rowKey(record) {\n      return record.id;\n    },\n    size: \"middle\",\n    columns: $columns,\n    rowSelection: {\n      selectedRowKeys: selectedRowKeys,\n      onChange: function onChange(selectedRowKeys, selectedRows) {\n        var userId = selectedRows.map(function (el) {\n          return el.userId;\n        });\n        console.log(selectedRows);\n        setList(userId);\n        changeSelectedRowKeys(userId);\n        setSelectedRowKeys(selectedRowKeys);\n      }\n    },\n    dataSource: Array.from(adminData),\n    pagination: {\n      total: total,\n      defaultCurrent: presentPage,\n      onChange: function onChange(page) {\n        handleAdminData({\n          page: page,\n          type: \"admin\"\n        });\n        setPresentPage(page);\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(_Modal, {\n    afterClose: function afterClose() {\n      userId.current && userName.current && phone.current && setTimeout(function () {\n        userId.current.state.value = \"\";\n        userName.current.state.value = \"\";\n        phone.current.state.value = \"\";\n      }, 2000);\n    },\n    title: \"添加管理员\",\n    visible: addFlag,\n    onCancel: function onCancel() {\n      changeAddFlag(false);\n    },\n    okText: \"\\u6DFB\\u52A0\",\n    onOk: function onOk() {\n      handleAddAdmin({\n        type: \"admin\",\n        userId: userId.current.state.value,\n        userName: userName.current.state.value,\n        // phone: phone.current.state.value,\n        sex: sex,\n        adminData: adminData\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"_wrap row row-start-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 21\n    }\n  }, \"\\u7BA1\\u7406\\u5458\\u8D26\\u53F7\\uFF1A\"), /*#__PURE__*/React.createElement(_Input, {\n    ref: userId,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"_wrap row row-start-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 21\n    }\n  }, \"\\u7BA1\\u7406\\u5458\\u59D3\\u540D\\uFF1A\"), /*#__PURE__*/React.createElement(_Input, {\n    ref: userName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"_wrap row row-start-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 21\n    }\n  }, \"\\u9009\\u62E9\\u6027\\u522B\\uFF1A\"), /*#__PURE__*/React.createElement(_Dropdown, {\n    overlay: menu,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    style: {\n      padding: \"0 20px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 25\n    }\n  }, sex)))), /*#__PURE__*/React.createElement(\"style\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }\n  }, \"\\n                    ._wrap {\\n                        margin-bottom: 20px;\\n                    }\\n                    .ant-input {\\n                        width: 80%;\\n                    }\\n                    input {\\n                        margin: 20px;\\n                    }\\n                    \"));\n};\n\nexport default connect(mapStateToState, mapDispatchToProps)(AdminMessage);","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/components/Administrator/AdminMessage.js"],"names":["React","useEffect","useRef","useState","connect","admin","openNotification","mapStateToState","state","adminData","getIn","total","addAdminFlag","modifyAdminTemp","addVisible","mapDispatchToProps","dispatch","handleAdminData","args","fetchAdministratorData","handleAddAdmin","userId","length","userName","addNewAdmin","handleModifyAdmin","modifyAdmin","AdminMessage","props","phone","academy","id","setId","isEditing","record","columns","key","title","dataIndex","editable","render","text","menu","padding","sex","current","value","$columns","map","el","onCell","editing","addFlag","changeAddFlag","$selectedRowKeys","changeSelectedRowKeys","setSex","list","setList","presentPage","setPresentPage","selectedRowKeys","setSelectedRowKeys","clearCheck","onClick","e","textAlign","page","type","Math","ceil","margin","onChange","selectedRows","console","log","Array","from","defaultCurrent","setTimeout"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,MAA1B,EAAkCC,QAAlC,QAAiD,OAAjD;AACA,SAASC,OAAT,QAAwB,aAAxB;AAEA,OAAO,KAAKC,KAAZ,MAAuB,kCAAvB;AACA,OAAO,+BAAP;AACA,SAAQC,gBAAR,QAA+B,4BAA/B;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,KAAK;AAAA,SAAK;AAC9BC,IAAAA,SAAS,EAAED,KAAK,CAACE,KAAN,CAAY,CAAC,OAAD,EAAU,YAAV,EAAwB,WAAxB,CAAZ,CADmB;AAE9BC,IAAAA,KAAK,EAAEH,KAAK,CAACE,KAAN,CAAY,CAAC,OAAD,EAAU,YAAV,EAAwB,YAAxB,CAAZ,CAFuB;AAG9BE,IAAAA,YAAY,EAAEJ,KAAK,CAACE,KAAN,CAAY,CAAC,OAAD,EAAU,YAAV,EAAwB,cAAxB,CAAZ,CAHgB;AAI9BG,IAAAA,eAAe,EAAEL,KAAK,CAACE,KAAN,CAAY,CAAC,OAAD,EAAU,YAAV,EAAwB,iBAAxB,CAAZ,CAJa;AAK9BI,IAAAA,UAAU,EAAEN,KAAK,CAACE,KAAN,CAAY,CAAC,OAAD,EAAU,YAAV,EAAwB,YAAxB,CAAZ;AALkB,GAAL;AAAA,CAA7B;;AAQA,IAAMK,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ;AAAA,SAAK;AACpCC,IAAAA,eADoC,2BACpBC,IADoB,EACf;AACjBF,MAAAA,QAAQ,CAACX,KAAK,CAACc,sBAAN,CAA6BD,IAA7B,CAAD,CAAR;AACH,KAHmC;AAIpCE,IAAAA,cAJoC,0BAIrBF,IAJqB,EAIf;AACjB,UAAIA,IAAI,CAACG,MAAL,CAAYC,MAAZ,IAAsB,CAAtB,IAA2BJ,IAAI,CAACG,MAAL,CAAYC,MAAZ,IAAsB,EAArD,EAAwD;AACpDhB,QAAAA,gBAAgB,CAAC,6BAAD,CAAhB;AACH,OAFD,MAEO,IAAIY,IAAI,CAACK,QAAL,CAAcD,MAAd,IAAuB,CAAvB,IAA4BJ,IAAI,CAACK,QAAL,CAAcD,MAAd,IAAuB,EAAvD,EAA2D;AAC9DhB,QAAAA,gBAAgB,CAAC,6BAAD,CAAhB;AACH,OAFM,MAEA;AACHU,QAAAA,QAAQ,CAACX,KAAK,CAACmB,WAAN,CAAkBN,IAAlB,CAAD,CAAR;AACH;AACJ,KAZmC;AAapCO,IAAAA,iBAboC,6BAalBP,IAbkB,EAaZ;AACpBF,MAAAA,QAAQ,CAACX,KAAK,CAACqB,WAAN,CAAkBR,IAAlB,CAAD,CAAR;AACH;AAfmC,GAAL;AAAA,CAAnC;;AAkBA,IAAMS,YAAY,GAAG,SAAfA,YAAe,CAAAC,KAAK,EAAI;AAAA,MAEtBX,eAFsB,GAUtBW,KAVsB,CAEtBX,eAFsB;AAAA,MAGtBG,cAHsB,GAUtBQ,KAVsB,CAGtBR,cAHsB;AAAA,MAItBK,iBAJsB,GAUtBG,KAVsB,CAItBH,iBAJsB;AAAA,MAKtBd,KALsB,GAUtBiB,KAVsB,CAKtBjB,KALsB;AAAA,MAMtBF,SANsB,GAUtBmB,KAVsB,CAMtBnB,SANsB;AAAA,MAOtBG,YAPsB,GAUtBgB,KAVsB,CAOtBhB,YAPsB;AAAA,MAQtBC,eARsB,GAUtBe,KAVsB,CAQtBf,eARsB;AAAA,MAStBC,UATsB,GAUtBc,KAVsB,CAStBd,UATsB,EAW1B;;AACA,MAAMO,MAAM,GAAGnB,MAAM,EAArB;AACA,MAAMqB,QAAQ,GAAGrB,MAAM,EAAvB;AACA,MAAM2B,KAAK,GAAG3B,MAAM,EAApB;AACA,MAAM4B,OAAO,GAAG3B,QAAQ,EAAxB;;AAf0B,kBAgBNA,QAAQ,CAAC,EAAD,CAhBF;AAAA;AAAA,MAgBnB4B,EAhBmB;AAAA,MAgBfC,KAhBe;;AAiB1B,MAAMC,SAAS,GAAG,SAAZA,SAAY,CAAAC,MAAM;AAAA,WAAIA,MAAM,CAACH,EAAP,KAAcA,EAAlB;AAAA,GAAxB;;AACA,MAAMI,OAAO,GAAG,CACZ;AACIC,IAAAA,GAAG,EAAE,GADT;AAEIC,IAAAA,KAAK,EAAE,OAFX;AAGIC,IAAAA,SAAS,EAAE,QAHf;AAIIC,IAAAA,QAAQ,EAAE;AAJd,GADY,EAOZ;AACIH,IAAAA,GAAG,EAAE,GADT;AAEIC,IAAAA,KAAK,EAAE,OAFX;AAGIG,IAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOP,MAAP,EAAkB;AACtB,aAAOD,SAAS,CAACC,MAAD,CAAT,gBACH;AAAO,QAAA,GAAG,EAAEX,QAAZ;AAAsB,QAAA,YAAY,EAAEW,MAAM,CAACX,QAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADG,gBAGH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAOW,MAAM,CAACX,QAAd,CAHJ;AAKH,KATL;AAUIgB,IAAAA,QAAQ,EAAE;AAVd,GAPY,EAmBZ;AACIH,IAAAA,GAAG,EAAE,GADT;AAEIC,IAAAA,KAAK,EAAE,IAFX;AAGIG,IAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOP,MAAP,EAAkB;AACtB,aAAOD,SAAS,CAACC,MAAD,CAAT,gBACH;AAAO,QAAA,GAAG,EAAEJ,OAAZ;AAAqB,QAAA,YAAY,EAAEI,MAAM,CAACJ,OAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADG,gBAGH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAOI,MAAM,CAACJ,OAAd,CAHJ;AAKH,KATL;AAUIS,IAAAA,QAAQ,EAAE;AAVd,GAnBY,EAgCZ;AACIH,IAAAA,GAAG,EAAE,GADT;AAEIC,IAAAA,KAAK,EAAE,IAFX;AAGIG,IAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOP,MAAP,EAAkB;AACtB,aAAOD,SAAS,CAACC,MAAD,CAAT,gBACH;AAAU,QAAA,OAAO,EAAEQ,IAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAQ,QAAA,KAAK,EAAE;AAAEC,UAAAA,OAAO,EAAE;AAAX,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAuCC,GAAvC,CADJ,CADG,gBAKH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAOV,MAAM,CAACU,GAAd,CALJ;AAOH,KAXL;AAYIL,IAAAA,QAAQ,EAAE;AAZd,GAhCY,EA8CZ;AACIH,IAAAA,GAAG,EAAE,GADT;AAEIC,IAAAA,KAAK,EAAE,EAFX;AAGIC,IAAAA,SAAS,EAAE,WAHf;AAIIE,IAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOP,MAAP,EAAkB;AACtB,UAAMK,QAAQ,GAAGN,SAAS,CAACC,MAAD,CAA1B;AACA,aAAOK,QAAQ,gBACX;AACI,QAAA,OAAO,EACH,mBAAM;AACFd,UAAAA,iBAAiB,CAAC;AACdJ,YAAAA,MAAM,EAAEa,MAAM,CAACb,MADD;AAEdE,YAAAA,QAAQ,EAAEA,QAAQ,CAACsB,OAAT,CAAiBrC,KAAjB,CAAuBsC,KAFnB;AAGdhB,YAAAA,OAAO,EAAEA,OAAO,CAACe,OAAR,CAAgBrC,KAAhB,CAAsBsC,KAHjB;AAIdF,YAAAA,GAAG,EAAHA;AAJc,WAAD,CAAjB;AAMAZ,UAAAA,KAAK,CAAC,EAAD,CAAL;AACH,SAVT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADW,gBAiBX;AACI,QAAA,OAAO,EAAG;AAAA,iBAAMA,KAAK,CAACE,MAAM,CAACH,EAAR,CAAX;AAAA,SADd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAjBJ;AAuBH;AA7BL,GA9CY,CAAhB;AA8EA,MAAMgB,QAAQ,GAAGZ,OAAO,CAACa,GAAR,CAAY,UAAAC,EAAE,EAAI;AAC/B,QAAI,CAACA,EAAE,CAACV,QAAR,EAAkB;AACd,aAAOU,EAAP;AACH;;AACD,2CACOA,EADP;AAEIC,MAAAA,MAAM,EAAE,gBAAAhB,MAAM;AAAA,eAAK;AACfA,UAAAA,MAAM,EAANA,MADe;AAEfI,UAAAA,SAAS,EAAEW,EAAE,CAACX,SAFC;AAGfD,UAAAA,KAAK,EAAEY,EAAE,CAACZ,KAHK;AAIfc,UAAAA,OAAO,EAAElB,SAAS,CAACC,MAAD;AAJH,SAAL;AAAA;AAFlB;AASH,GAbgB,CAAjB;;AAhG0B,mBA8GO/B,QAAQ,CAAC,KAAD,CA9Gf;AAAA;AAAA,MA8GnBiD,OA9GmB;AAAA,MA8GVC,aA9GU;;AAAA,mBA+GwBlD,QAAQ,CAAC,EAAD,CA/GhC;AAAA;AAAA,MA+GnBmD,gBA/GmB;AAAA,MA+GDC,qBA/GC;;AAAA,mBAgHJpD,QAAQ,CAAC,GAAD,CAhHJ;AAAA;AAAA,MAgHnByC,GAhHmB;AAAA,MAgHdY,MAhHc;;AAAA,mBAiHFrD,QAAQ,CAAC,EAAD,CAjHN;AAAA;AAAA,MAiHnBsD,IAjHmB;AAAA,MAiHbC,OAjHa;;AAAA,oBAkHavD,QAAQ,CAAC,CAAD,CAlHrB;AAAA;AAAA,MAkHnBwD,WAlHmB;AAAA,MAkHNC,cAlHM;;AAAA,oBAmHoBzD,QAAQ,CAAC,EAAD,CAnH5B;AAAA;AAAA,MAmHnB0D,eAnHmB;AAAA,MAmHFC,kBAnHE;;AAoH1B,MAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACrBD,IAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACH,GAFD;;AAIA,WAASE,OAAT,CAAiBC,CAAjB,EAAoB;AAChBT,IAAAA,MAAM,CAACS,CAAC,CAAC7B,GAAH,CAAN;AACH;;AACD,MAAMM,IAAI,gBACN;AAAM,IAAA,OAAO,EAAEsB,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,0BAAM,IAAN;AAAW,IAAA,KAAK,EAAE;AAAEE,MAAAA,SAAS,EAAE;AAAb,KAAlB;AAA2C,IAAA,GAAG,EAAC,QAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,0BAAM,IAAN;AAAW,IAAA,KAAK,EAAE;AAAEA,MAAAA,SAAS,EAAE;AAAb,KAAlB;AAA2C,IAAA,GAAG,EAAC,QAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,CADJ;AAMAjE,EAAAA,SAAS,CAAC,YAAM;AACZoD,IAAAA,aAAa,CAACvC,UAAD,CAAb;AACH,GAFQ,EAEN,CAACA,UAAD,CAFM,CAAT;AAGAb,EAAAA,SAAS,CAAC,YAAK;AACXgB,IAAAA,eAAe,CACX0C,WAAW,KAAK,CAAhB,GACI;AAACQ,MAAAA,IAAI,EAAE,CAAP;AAAUC,MAAAA,IAAI,EAAE;AAAhB,KADJ,GAEKC,IAAI,CAACC,IAAL,CAAU3D,KAAK,GAAG,EAAlB,IAAwBgD,WAAxB,GACO;AAACQ,MAAAA,IAAI,EAAER,WAAP;AAAoBS,MAAAA,IAAI,EAAE;AAA1B,KADP,GAEO;AAACD,MAAAA,IAAI,EAAER,WAAW,GAAG,CAArB;AAAwBS,MAAAA,IAAI,EAAE;AAA9B,KALD,CAAf;AAOAL,IAAAA,UAAU;AACb,GATQ,EASN,CAAClD,eAAD,CATM,CAAT;AAUAZ,EAAAA,SAAS,CAAC,YAAM;AACZoD,IAAAA,aAAa,CAAC,KAAD,CAAb;AACH,GAFQ,EAEP,CAACzC,YAAD,CAFO,CAAT;AAIA,sBACI,uDACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AACI,IAAA,KAAK,EAAE;AAAC2D,MAAAA,MAAM,EAAE;AAAT,KADX;AAEI,IAAA,OAAO,EAAG;AAAA,aAAMlB,aAAa,CAAC,IAAD,CAAnB;AAAA,KAFd;AAGI,IAAA,IAAI,EAAE,MAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCADJ,CADJ,eAWI;AACI,IAAA,MAAM,EAAE,gBAAAnB,MAAM;AAAA,aAAIA,MAAM,CAACH,EAAX;AAAA,KADlB;AAEI,IAAA,IAAI,EAAE,QAFV;AAGI,IAAA,OAAO,EAAGgB,QAHd;AAII,IAAA,YAAY,EAAE;AACVc,MAAAA,eAAe,EAAfA,eADU;AAEVW,MAAAA,QAAQ,EAAE,kBAACX,eAAD,EAAkBY,YAAlB,EAAmC;AACzC,YAAMpD,MAAM,GAAGoD,YAAY,CAACzB,GAAb,CAAiB,UAAAC,EAAE,EAAI;AAClC,iBAAOA,EAAE,CAAC5B,MAAV;AACH,SAFc,CAAf;AAGAqD,QAAAA,OAAO,CAACC,GAAR,CAAYF,YAAZ;AACAf,QAAAA,OAAO,CAACrC,MAAD,CAAP;AACAkC,QAAAA,qBAAqB,CAAClC,MAAD,CAArB;AACAyC,QAAAA,kBAAkB,CAACD,eAAD,CAAlB;AACH;AAVS,KAJlB;AAgBI,IAAA,UAAU,EAAGe,KAAK,CAACC,IAAN,CAAWpE,SAAX,CAhBjB;AAiBI,IAAA,UAAU,EAAE;AACRE,MAAAA,KAAK,EAALA,KADQ;AAERmE,MAAAA,cAAc,EAAEnB,WAFR;AAGRa,MAAAA,QAAQ,EAAE,kBAACL,IAAD,EAAU;AAChBlD,QAAAA,eAAe,CAAC;AAACkD,UAAAA,IAAI,EAAEA,IAAP;AAAaC,UAAAA,IAAI,EAAE;AAAnB,SAAD,CAAf;AACAR,QAAAA,cAAc,CAACO,IAAD,CAAd;AACH;AANO,KAjBhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXJ,eAsCI;AACI,IAAA,UAAU,EAAE,sBAAM;AACd9C,MAAAA,MAAM,CAACwB,OAAP,IAAkBtB,QAAQ,CAACsB,OAA3B,IAAsChB,KAAK,CAACgB,OAA5C,IACAkC,UAAU,CAAC,YAAM;AACb1D,QAAAA,MAAM,CAACwB,OAAP,CAAerC,KAAf,CAAqBsC,KAArB,GAA6B,EAA7B;AACAvB,QAAAA,QAAQ,CAACsB,OAAT,CAAiBrC,KAAjB,CAAuBsC,KAAvB,GAA+B,EAA/B;AACAjB,QAAAA,KAAK,CAACgB,OAAN,CAAcrC,KAAd,CAAoBsC,KAApB,GAA4B,EAA5B;AACH,OAJS,EAIP,IAJO,CADV;AAMH,KARL;AASI,IAAA,KAAK,EAAE,OATX;AAUI,IAAA,OAAO,EAAEM,OAVb;AAWI,IAAA,QAAQ,EACJ,oBAAM;AACFC,MAAAA,aAAa,CAAC,KAAD,CAAb;AACH,KAdT;AAgBI,IAAA,MAAM,EAAC,cAhBX;AAiBI,IAAA,IAAI,EAAE,gBAAM;AACRjC,MAAAA,cAAc,CAAC;AACXgD,QAAAA,IAAI,EAAE,OADK;AAEX/C,QAAAA,MAAM,EAAEA,MAAM,CAACwB,OAAP,CAAerC,KAAf,CAAqBsC,KAFlB;AAGXvB,QAAAA,QAAQ,EAAEA,QAAQ,CAACsB,OAAT,CAAiBrC,KAAjB,CAAuBsC,KAHtB;AAIX;AACAF,QAAAA,GAAG,EAAHA,GALW;AAMXnC,QAAAA,SAAS,EAATA;AANW,OAAD,CAAd;AAQH,KA1BL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBA4BI;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CADJ,eAEI;AAAO,IAAA,GAAG,EAAEY,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CA5BJ,eAgCI;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CADJ,eAEI;AAAO,IAAA,GAAG,EAAEE,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAhCJ,eAwCI;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCADJ,eAEI;AAAU,IAAA,OAAO,EAAEmB,IAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAQ,IAAA,KAAK,EAAE;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuCC,GAAvC,CADJ,CAFJ,CAxCJ,CAtCJ,eAqFI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0TArFJ,CADJ;AAuGH,CAzPD;;AA2PA,eAAexC,OAAO,CAACG,eAAD,EAAkBQ,kBAAlB,CAAP,CAA6CY,YAA7C,CAAf","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {Button, Table, Input,  Modal, Dropdown, Menu} from 'antd';\r\nimport * as admin from \"../../redux/actionCreators/admin\";\r\nimport \"../../static/style/admin.scss\";\r\nimport {openNotification} from \"../../utils/commonFunction\";\r\n\r\nconst mapStateToState = state => ({\r\n    adminData: state.getIn([\"admin\", \"userManage\", \"adminData\"]),\r\n    total: state.getIn([\"admin\", \"userManage\", \"adminTotal\"]),\r\n    addAdminFlag: state.getIn([\"admin\", \"userManage\", \"addAdminFlag\"]),\r\n    modifyAdminTemp: state.getIn([\"admin\", \"userManage\", \"modifyAdminTemp\"]),\r\n    addVisible: state.getIn([\"admin\", \"userManage\", \"addVisible\"]),\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    handleAdminData(args){\r\n        dispatch(admin.fetchAdministratorData(args));\r\n    },\r\n    handleAddAdmin(args) {\r\n        if (args.userId.length <= 6 || args.userId.length >= 30){\r\n            openNotification(\"教师编号长度为大于等于6小于等于30的数字，请重新输入\")\r\n        } else if (args.userName.length <=2 || args.userName.length >=30) {\r\n            openNotification(\"教师姓名长度为大于等于2小于等于30的字符，请重新输入\")\r\n        } else {\r\n            dispatch(admin.addNewAdmin(args));  \r\n        }\r\n    },\r\n    handleModifyAdmin(args) {\r\n        dispatch(admin.modifyAdmin(args));\r\n    }\r\n});\r\n\r\nconst AdminMessage = props => {\r\n    const {\r\n        handleAdminData,\r\n        handleAddAdmin,\r\n        handleModifyAdmin,\r\n        total,\r\n        adminData,\r\n        addAdminFlag,\r\n        modifyAdminTemp,\r\n        addVisible\r\n    } = props;\r\n    // console.log(adminData)\r\n    const userId = useRef();\r\n    const userName = useRef();\r\n    const phone = useRef();\r\n    const academy = useState();\r\n    const [id, setId] = useState(\"\");\r\n    const isEditing = record => record.id === id;\r\n    const columns = [\r\n        {\r\n            key: '1',\r\n            title: '管理员账号',\r\n            dataIndex: 'userId',\r\n            editable: true\r\n        },\r\n        {\r\n            key: '2',\r\n            title: '管理员姓名',\r\n            render: (text, record) => {\r\n                return isEditing(record) ? (\r\n                    <Input ref={userName} defaultValue={record.userName} />\r\n                ):(\r\n                    <span>{record.userName}</span>\r\n                )\r\n            },\r\n            editable: true\r\n        },\r\n        {\r\n            key: '3',\r\n            title: '学院',\r\n            render: (text, record) => {\r\n                return isEditing(record) ? (\r\n                    <Input ref={academy} defaultValue={record.academy} />\r\n                ):(\r\n                    <span>{record.academy}</span>\r\n                )\r\n            },\r\n            editable: true\r\n\r\n        },\r\n        {\r\n            key: '4',\r\n            title: '性别',\r\n            render: (text, record) => {\r\n                return isEditing(record) ? (\r\n                    <Dropdown overlay={menu}>\r\n                        <Button style={{ padding: \"0 20px\" }}>{sex}</Button>\r\n                    </Dropdown>\r\n                ):(\r\n                    <span>{record.sex}</span>\r\n                )\r\n            },\r\n            editable: true\r\n        },\r\n        {\r\n            key: '5',\r\n            title: '',\r\n            dataIndex: 'operation',\r\n            render: (text, record) => {\r\n                const editable = isEditing(record);\r\n                return editable ? (\r\n                    <a\r\n                        onClick={\r\n                            () => {\r\n                                handleModifyAdmin({\r\n                                    userId: record.userId,\r\n                                    userName: userName.current.state.value,\r\n                                    academy: academy.current.state.value,\r\n                                    sex\r\n                                });\r\n                                setId(\"\")\r\n                            }\r\n                        }\r\n                    >\r\n                        保存\r\n                    </a>\r\n                ) : (\r\n                    <a\r\n                        onClick={ () => setId(record.id)}\r\n                    >\r\n                        修改\r\n                    </a>\r\n                )\r\n            }\r\n        }\r\n    ];\r\n    const $columns = columns.map(el => {\r\n        if (!el.editable) {\r\n            return el;\r\n        }\r\n        return {\r\n            ...el,\r\n            onCell: record => ({\r\n                record,\r\n                dataIndex: el.dataIndex,\r\n                title: el.title,\r\n                editing: isEditing(record),\r\n            })\r\n        }\r\n    });\r\n    const [addFlag, changeAddFlag] = useState(false);\r\n    const [$selectedRowKeys, changeSelectedRowKeys] = useState([]);\r\n    const [sex, setSex] = useState(\"男\");\r\n    const [list, setList] = useState([]);\r\n    const [presentPage, setPresentPage ] = useState(1);\r\n    const [selectedRowKeys, setSelectedRowKeys] = useState([]);\r\n    const clearCheck = () => {\r\n        setSelectedRowKeys([])\r\n    };\r\n\r\n    function onClick(e) {\r\n        setSex(e.key);\r\n    }\r\n    const menu = (\r\n        <Menu onClick={onClick}>\r\n            <Menu.Item style={{ textAlign: \"center\" }} key=\"男\">男</Menu.Item>\r\n            <Menu.Item style={{ textAlign: \"center\" }} key=\"女\">女</Menu.Item>\r\n        </Menu>\r\n    );\r\n    useEffect(() => {\r\n        changeAddFlag(addVisible)\r\n    }, [addVisible])\r\n    useEffect(()=> {\r\n        handleAdminData(\r\n            presentPage === 1 ?\r\n                {page: 1, type: \"admin\"} :\r\n                (Math.ceil(total / 10) > presentPage ?\r\n                        {page: presentPage, type: \"admin\"} :\r\n                        {page: presentPage - 1, type: \"admin\"}\r\n                ));\r\n        clearCheck()\r\n    }, [modifyAdminTemp]);\r\n    useEffect(() => {\r\n        changeAddFlag(false)\r\n    },[addAdminFlag]);\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                <Button\r\n                    style={{margin: \"0.5rem 0 0 0.5rem\"}}\r\n                    onClick={ () => changeAddFlag(true)}\r\n                    icon={\"plus\"}\r\n                >\r\n                    添加管理员\r\n                </Button>\r\n            </div>\r\n            {/* 表格 */}\r\n            <Table\r\n                rowKey={record => record.id}\r\n                size={\"middle\"}\r\n                columns={ $columns }\r\n                rowSelection={{\r\n                    selectedRowKeys,\r\n                    onChange: (selectedRowKeys, selectedRows) => {\r\n                        const userId = selectedRows.map(el => {\r\n                            return el.userId;\r\n                        });\r\n                        console.log(selectedRows);\r\n                        setList(userId);\r\n                        changeSelectedRowKeys(userId);\r\n                        setSelectedRowKeys(selectedRowKeys);\r\n                    },\r\n                }}\r\n                dataSource={ Array.from(adminData)}\r\n                pagination={{\r\n                    total,\r\n                    defaultCurrent: presentPage,\r\n                    onChange: (page) => {\r\n                        handleAdminData({page: page, type: \"admin\"});\r\n                        setPresentPage(page);\r\n                    }\r\n                }}\r\n            />\r\n            {/* 添加管理员 */}\r\n            <Modal\r\n                afterClose={() => {\r\n                    userId.current && userName.current && phone.current &&  \r\n                    setTimeout(() => {\r\n                        userId.current.state.value = \"\";\r\n                        userName.current.state.value = \"\";\r\n                        phone.current.state.value = \"\";\r\n                    }, 2000)\r\n                }}\r\n                title={\"添加管理员\"}\r\n                visible={addFlag}\r\n                onCancel={\r\n                    () => {\r\n                        changeAddFlag(false);\r\n                    }\r\n                }\r\n                okText=\"添加\"\r\n                onOk={() => {\r\n                    handleAddAdmin({\r\n                        type: \"admin\",\r\n                        userId: userId.current.state.value,\r\n                        userName: userName.current.state.value,\r\n                        // phone: phone.current.state.value,\r\n                        sex,\r\n                        adminData\r\n                    });\r\n                }}\r\n            >\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>管理员账号：</label>\r\n                    <Input ref={userId} />\r\n                </div>\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>管理员姓名：</label>\r\n                    <Input ref={userName} />\r\n                </div>\r\n                {/* <div className=\"_wrap row row-start-center\">\r\n                    <label>教师电话：</label>\r\n                    <Input ref={phone} />\r\n                </div> */}\r\n                <div className=\"_wrap row row-start-center\">\r\n                    <label>选择性别：</label>\r\n                    <Dropdown overlay={menu}>\r\n                        <Button style={{ padding: \"0 20px\" }}>{sex}</Button>\r\n                    </Dropdown>\r\n                </div>\r\n            </Modal>\r\n            <style>\r\n                {\r\n                    `\r\n                    ._wrap {\r\n                        margin-bottom: 20px;\r\n                    }\r\n                    .ant-input {\r\n                        width: 80%;\r\n                    }\r\n                    input {\r\n                        margin: 20px;\r\n                    }\r\n                    `\r\n                }\r\n            </style>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default connect(mapStateToState, mapDispatchToProps)(AdminMessage);\r\n"]},"metadata":{},"sourceType":"module"}