{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\projects\\\\lab\\\\lab_2.0\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport \"antd/es/message/style/css\";\nimport _message from \"antd/es/message\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(releaseAnnounce),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(editAnnounce),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(deleteAnnounce),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(rootAnnounceSaga);\n\nimport { takeEvery, put, call } from \"redux-saga/effects\";\nimport Service from \"../../../lib/Service\";\nimport { ADMIN_RELEASE_ANNOUNCE, ADMIN_RELEASE_ANNOUNCE_SUCCESS, ADMIN_EDIT_ANNOUNCE, ADMIN_EDIT_ANNOUNCE_SUCCESS, ADMIN_DELETE_ANNOUNCE, ADMIN_DELETE_ANNOUNCE_SUCCESS } from \"../../../constants/actionTypes\";\n\nfunction releaseAnnounce(args) {\n  var _args$args, userName, title, content, file, formData, res;\n\n  return _regeneratorRuntime.wrap(function releaseAnnounce$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _args$args = args.args, userName = _args$args.userName, title = _args$args.title, content = _args$args.content, file = _args$args.file;\n          formData = new FormData();\n          formData.append('userName', userName);\n          formData.append('title', title);\n          formData.append('content', content);\n          formData.append('file', file);\n          _context.next = 9;\n          return call(Service.post, \"admin/addAnnounce\", formData);\n\n        case 9:\n          res = _context.sent;\n          _context.t0 = res.data.error_code;\n          _context.next = _context.t0 === 0 ? 13 : _context.t0 === -1 ? 17 : _context.t0 === 1 ? 19 : 21;\n          break;\n\n        case 13:\n          _message.success(\"发布成功~\");\n\n          _context.next = 16;\n          return put({\n            type: ADMIN_RELEASE_ANNOUNCE_SUCCESS\n          });\n\n        case 16:\n          return _context.abrupt(\"break\", 22);\n\n        case 17:\n          _message.error(\"发布失败, 该文件已存在！\");\n\n          return _context.abrupt(\"break\", 22);\n\n        case 19:\n          _message.error(\"权限不足！\");\n\n          return _context.abrupt(\"break\", 22);\n\n        case 21:\n          return _context.abrupt(\"return\", 0);\n\n        case 22:\n          _context.next = 26;\n          break;\n\n        case 24:\n          _context.prev = 24;\n          _context.t1 = _context[\"catch\"](0);\n\n        case 26:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[0, 24]]);\n}\n\nfunction editAnnounce(args) {\n  var _args$args2, userName, title, content, file, announceId, formData, res;\n\n  return _regeneratorRuntime.wrap(function editAnnounce$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _args$args2 = args.args, userName = _args$args2.userName, title = _args$args2.title, content = _args$args2.content, file = _args$args2.file, announceId = _args$args2.announceId;\n          formData = new FormData();\n          formData.append('userName', userName);\n          formData.append('title', title);\n          formData.append('content', content);\n          formData.append('file', file);\n          formData.append('announceId', announceId);\n          _context2.next = 10;\n          return call(Service.post, \"admin/updateAnnounce\", formData);\n\n        case 10:\n          res = _context2.sent;\n          _context2.t0 = res.data.error_code;\n          _context2.next = _context2.t0 === 0 ? 14 : _context2.t0 === -1 ? 18 : _context2.t0 === 1 ? 20 : 22;\n          break;\n\n        case 14:\n          _message.success(\"修改成功~\");\n\n          _context2.next = 17;\n          return put({\n            type: ADMIN_EDIT_ANNOUNCE_SUCCESS\n          });\n\n        case 17:\n          return _context2.abrupt(\"break\", 23);\n\n        case 18:\n          _message.error(\"修改失败！\");\n\n          return _context2.abrupt(\"break\", 23);\n\n        case 20:\n          _message.error(\"权限不足！\");\n\n          return _context2.abrupt(\"break\", 23);\n\n        case 22:\n          return _context2.abrupt(\"return\", 0);\n\n        case 23:\n          _context2.next = 27;\n          break;\n\n        case 25:\n          _context2.prev = 25;\n          _context2.t1 = _context2[\"catch\"](0);\n\n        case 27:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[0, 25]]);\n}\n\nfunction deleteAnnounce(arg) {\n  var announceId, formData, res;\n  return _regeneratorRuntime.wrap(function deleteAnnounce$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          announceId = arg.announceId.announceId;\n          formData = new FormData();\n          formData.append(\"announceId\", announceId);\n          _context3.next = 6;\n          return call(Service.post, \"admin/deleteAnnounce\", formData);\n\n        case 6:\n          res = _context3.sent;\n          _context3.t0 = res.data.error_code;\n          _context3.next = _context3.t0 === 0 ? 10 : _context3.t0 === -1 ? 14 : 16;\n          break;\n\n        case 10:\n          _context3.next = 12;\n          return put({\n            type: ADMIN_DELETE_ANNOUNCE_SUCCESS\n          });\n\n        case 12:\n          _message.success(res.data.message);\n\n          return _context3.abrupt(\"break\", 17);\n\n        case 14:\n          _message.error(\"删除失败！\");\n\n          return _context3.abrupt(\"break\", 17);\n\n        case 16:\n          return _context3.abrupt(\"return\", 0);\n\n        case 17:\n          _context3.next = 21;\n          break;\n\n        case 19:\n          _context3.prev = 19;\n          _context3.t1 = _context3[\"catch\"](0);\n\n        case 21:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[0, 19]]);\n}\n\nexport default function rootAnnounceSaga() {\n  return _regeneratorRuntime.wrap(function rootAnnounceSaga$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return takeEvery(ADMIN_RELEASE_ANNOUNCE, releaseAnnounce);\n\n        case 2:\n          _context4.next = 4;\n          return takeEvery(ADMIN_DELETE_ANNOUNCE, deleteAnnounce);\n\n        case 4:\n          _context4.next = 6;\n          return takeEvery(ADMIN_EDIT_ANNOUNCE, editAnnounce);\n\n        case 6:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}","map":{"version":3,"sources":["C:/projects/lab/lab_2.0/src/redux/sagas/adminSagas/labAnnounce.js"],"names":["releaseAnnounce","editAnnounce","deleteAnnounce","rootAnnounceSaga","takeEvery","put","call","Service","ADMIN_RELEASE_ANNOUNCE","ADMIN_RELEASE_ANNOUNCE_SUCCESS","ADMIN_EDIT_ANNOUNCE","ADMIN_EDIT_ANNOUNCE_SUCCESS","ADMIN_DELETE_ANNOUNCE","ADMIN_DELETE_ANNOUNCE_SUCCESS","args","userName","title","content","file","formData","FormData","append","post","res","data","error_code","success","type","error","announceId","arg","message"],"mappings":";;;;oDAYUA,e;qDA8BAC,Y;qDA+BAC,c;qDA0BeC,gB;;AAnGzB,SAASC,SAAT,EAAoBC,GAApB,EAAyBC,IAAzB,QAAqC,oBAArC;AACA,OAAOC,OAAP,MAAoB,sBAApB;AAEA,SACIC,sBADJ,EAEIC,8BAFJ,EAGIC,mBAHJ,EAIIC,2BAJJ,EAKIC,qBALJ,EAMIC,6BANJ,QAOO,gCAPP;;AASA,SAAUb,eAAV,CAA0Bc,IAA1B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEiDA,IAAI,CAACA,IAFtD,EAEeC,QAFf,cAEeA,QAFf,EAEyBC,KAFzB,cAEyBA,KAFzB,EAEgCC,OAFhC,cAEgCA,OAFhC,EAEyCC,IAFzC,cAEyCA,IAFzC;AAGcC,UAAAA,QAHd,GAGyB,IAAIC,QAAJ,EAHzB;AAIQD,UAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BN,QAA5B;AACAI,UAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBL,KAAzB;AACAG,UAAAA,QAAQ,CAACE,MAAT,CAAgB,SAAhB,EAA2BJ,OAA3B;AACAE,UAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBH,IAAxB;AAPR;AAQoB,iBAAMZ,IAAI,CAACC,OAAO,CAACe,IAAT,uBAAoCH,QAApC,CAAV;;AARpB;AAQcI,UAAAA,GARd;AAAA,wBASgBA,GAAG,CAACC,IAAJ,CAASC,UATzB;AAAA,0CAUiB,CAVjB,wBAgBiB,CAAC,CAhBlB,wBAmBiB,CAnBjB;AAAA;;AAAA;AAWgB,mBAAQC,OAAR,CAAgB,OAAhB;;AAXhB;AAYgB,iBAAMrB,GAAG,CAAC;AACNsB,YAAAA,IAAI,EAAElB;AADA,WAAD,CAAT;;AAZhB;AAAA;;AAAA;AAiBgB,mBAAQmB,KAAR,CAAc,eAAd;;AAjBhB;;AAAA;AAoBgB,mBAAQA,KAAR,CAAc,OAAd;;AApBhB;;AAAA;AAAA,2CAuBuB,CAvBvB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA8BA,SAAU3B,YAAV,CAAuBa,IAAvB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAE6DA,IAAI,CAACA,IAFlE,EAEeC,QAFf,eAEeA,QAFf,EAEyBC,KAFzB,eAEyBA,KAFzB,EAEgCC,OAFhC,eAEgCA,OAFhC,EAEyCC,IAFzC,eAEyCA,IAFzC,EAE+CW,UAF/C,eAE+CA,UAF/C;AAGcV,UAAAA,QAHd,GAGyB,IAAIC,QAAJ,EAHzB;AAIQD,UAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BN,QAA5B;AACAI,UAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBL,KAAzB;AACAG,UAAAA,QAAQ,CAACE,MAAT,CAAgB,SAAhB,EAA2BJ,OAA3B;AACAE,UAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBH,IAAxB;AACAC,UAAAA,QAAQ,CAACE,MAAT,CAAgB,YAAhB,EAA8BQ,UAA9B;AARR;AASoB,iBAAMvB,IAAI,CAACC,OAAO,CAACe,IAAT,0BAAuCH,QAAvC,CAAV;;AATpB;AAScI,UAAAA,GATd;AAAA,yBAUgBA,GAAG,CAACC,IAAJ,CAASC,UAVzB;AAAA,4CAWiB,CAXjB,yBAiBiB,CAAC,CAjBlB,yBAoBiB,CApBjB;AAAA;;AAAA;AAYgB,mBAAQC,OAAR,CAAgB,OAAhB;;AAZhB;AAagB,iBAAMrB,GAAG,CAAC;AACNsB,YAAAA,IAAI,EAAEhB;AADA,WAAD,CAAT;;AAbhB;AAAA;;AAAA;AAkBgB,mBAAQiB,KAAR,CAAc,OAAd;;AAlBhB;;AAAA;AAqBgB,mBAAQA,KAAR,CAAc,OAAd;;AArBhB;;AAAA;AAAA,4CAwBuB,CAxBvB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA+BA,SAAU1B,cAAV,CAAyB4B,GAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEeD,UAAAA,UAFf,GAE6BC,GAAG,CAACD,UAFjC,CAEeA,UAFf;AAGcV,UAAAA,QAHd,GAGyB,IAAIC,QAAJ,EAHzB;AAIQD,UAAAA,QAAQ,CAACE,MAAT,CAAgB,YAAhB,EAA8BQ,UAA9B;AAJR;AAMoB,iBAAMvB,IAAI,CAACC,OAAO,CAACe,IAAT,0BAAuCH,QAAvC,CAAV;;AANpB;AAMcI,UAAAA,GANd;AAAA,yBAOgBA,GAAG,CAACC,IAAJ,CAASC,UAPzB;AAAA,4CAQiB,CARjB,yBAciB,CAAC,CAdlB;AAAA;;AAAA;AAAA;AASgB,iBAAMpB,GAAG,CAAC;AACNsB,YAAAA,IAAI,EAAEd;AADA,WAAD,CAAT;;AAThB;AAYgB,mBAAQa,OAAR,CAAgBH,GAAG,CAACC,IAAJ,CAASO,OAAzB;;AAZhB;;AAAA;AAegB,mBAAQH,KAAR,CAAc,OAAd;;AAfhB;;AAAA;AAAA,4CAkBuB,CAlBvB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA0BA,eAAe,SAAUzB,gBAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACX,iBAAMC,SAAS,CAACI,sBAAD,EAAyBR,eAAzB,CAAf;;AADW;AAAA;AAEX,iBAAMI,SAAS,CAACQ,qBAAD,EAAwBV,cAAxB,CAAf;;AAFW;AAAA;AAGX,iBAAME,SAAS,CAACM,mBAAD,EAAsBT,YAAtB,CAAf;;AAHW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { takeEvery, put, call } from \"redux-saga/effects\";\r\nimport Service from \"../../../lib/Service\";\r\nimport { message } from \"antd\";\r\nimport {\r\n    ADMIN_RELEASE_ANNOUNCE,\r\n    ADMIN_RELEASE_ANNOUNCE_SUCCESS,\r\n    ADMIN_EDIT_ANNOUNCE,\r\n    ADMIN_EDIT_ANNOUNCE_SUCCESS,\r\n    ADMIN_DELETE_ANNOUNCE,\r\n    ADMIN_DELETE_ANNOUNCE_SUCCESS,\r\n} from \"../../../constants/actionTypes\";\r\n\r\nfunction *releaseAnnounce(args) {\r\n    try {\r\n        const {userName, title, content, file} = args.args;\r\n        const formData = new FormData();\r\n        formData.append('userName', userName);\r\n        formData.append('title', title);\r\n        formData.append('content', content);\r\n        formData.append('file', file);\r\n        const res = yield call(Service.post, `admin/addAnnounce`, formData);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                message.success(\"发布成功~\");\r\n                yield put({\r\n                    type: ADMIN_RELEASE_ANNOUNCE_SUCCESS,\r\n                });\r\n                break;\r\n            case -1:\r\n                message.error(\"发布失败, 该文件已存在！\");\r\n                break;\r\n            case 1:\r\n                message.error(\"权限不足！\");\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n    catch (e) {\r\n\r\n    }\r\n}\r\nfunction *editAnnounce(args) {\r\n    try {\r\n        const {userName, title, content, file, announceId} = args.args;\r\n        const formData = new FormData();\r\n        formData.append('userName', userName);\r\n        formData.append('title', title);\r\n        formData.append('content', content);\r\n        formData.append('file', file);\r\n        formData.append('announceId', announceId);\r\n        const res = yield call(Service.post, `admin/updateAnnounce`, formData);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                message.success(\"修改成功~\");\r\n                yield put({\r\n                    type: ADMIN_EDIT_ANNOUNCE_SUCCESS,\r\n                });\r\n                break;\r\n            case -1:\r\n                message.error(\"修改失败！\");\r\n                break;\r\n            case 1:\r\n                message.error(\"权限不足！\");\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n    catch (e) {\r\n\r\n    }\r\n}\r\nfunction* deleteAnnounce(arg) {\r\n    try {\r\n        const {announceId} = arg.announceId;\r\n        const formData = new FormData;\r\n        formData.append(\"announceId\", announceId );\r\n\r\n        const res = yield call(Service.post, `admin/deleteAnnounce`, formData);\r\n        switch (res.data.error_code) {\r\n            case 0:\r\n                yield put({\r\n                    type: ADMIN_DELETE_ANNOUNCE_SUCCESS,\r\n                });\r\n                message.success(res.data.message);\r\n                break;\r\n            case -1:\r\n                message.error(\"删除失败！\");\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n    catch(e){\r\n\r\n    }\r\n}\r\n\r\nexport default function* rootAnnounceSaga() {\r\n    yield takeEvery(ADMIN_RELEASE_ANNOUNCE, releaseAnnounce);\r\n    yield takeEvery(ADMIN_DELETE_ANNOUNCE, deleteAnnounce);\r\n    yield takeEvery(ADMIN_EDIT_ANNOUNCE, editAnnounce);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}